<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0072)http://www.magiclantern.fm/forum/index.php?action=printpage;topic=1452.0 -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="robots" content="noindex">
<script type="text/javascript" async="" src="./Magic Lantern Forum - Canon 40D_files/ga.js"></script><script async="" src="./Magic Lantern Forum - Canon 40D_files/cloudflare.min.js"></script><script type="text/javascript">
//<![CDATA[
try{if (!window.CloudFlare) {var CloudFlare=[{verbose:0,p:0,byc:0,owlid:"cf",bag2:1,mirage2:0,oracle:0,paths:{cloudflare:"/cdn-cgi/nexp/dok9v=02fcfa4f56/"},atok:"7cbcd1732c8b3221503a5521d65339ea",petok:"48d8105c5048333f09d46df65956eb1b476a7bab-1396454156-1800",zone:"magiclantern.fm",rocket:"0",apps:{"ga_key":{"ua":"UA-32660555-1","ga_bs":"2"}}}];var a=document.createElement("script"),b=document.getElementsByTagName("script")[0];a.async=!0;a.src="//ajax.cloudflare.com/cdn-cgi/nexp/dok9v=b064e16429/cloudflare.min.js";b.parentNode.insertBefore(a,b);}}catch(e){};
//]]>
</script>
<link rel="canonical" href="http://www.magiclantern.fm/forum/index.php?topic=1452.0">
<title>Print Page - [UNMAINTAINED] Canon 40D</title>
<style type="text/css">body,a{color:#000;background:#fff;}body,td,.normaltext{font-family:Verdana,arial,helvetica,serif;font-size:small;}h1#title{font-size:large;font-weight:bold;}h2#linktree{margin:1em 0 2.5em 0;font-size:small;font-weight:bold;}dl#posts{width:90%;margin:0;padding:0;list-style:none;}dt.postheader{border:solid #000;border-width:1px 0;padding:4px 0;}dd.postbody{margin:1em 0 2em 2em;}table{empty-cells:show;}blockquote,code{border:1px solid #000;margin:3px;padding:1px;display:block;}code{font:x-small monospace;}blockquote{font-size:x-small;}.smalltext,.quoteheader,.codeheader{font-size:x-small;}.largetext{font-size:large;}.centertext{text-align:center;}hr{height:1px;border:0;color:black;background-color:black;}</style>
<script type="text/javascript">
/* <![CDATA[ */
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-32660555-1']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

(function(b){(function(a){"__CF"in b&&"DJS"in b.__CF?b.__CF.DJS.push(a):"addEventListener"in b?b.addEventListener("load",a,!1):b.attachEvent("onload",a)})(function(){"FB"in b&&"Event"in FB&&"subscribe"in FB.Event&&(FB.Event.subscribe("edge.create",function(a){_gaq.push(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){_gaq.push(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){_gaq.push(["_trackSocial","facebook","send",a])}));"twttr"in b&&"events"in twttr&&"bind"in twttr.events&&twttr.events.bind("tweet",function(a){if(a){var b;if(a.target&&a.target.nodeName=="IFRAME")a:{if(a=a.target.src){a=a.split("#")[0].match(/[^?=&]+=([^&]*)?/g);b=0;for(var c;c=a[b];++b)if(c.indexOf("url")===0){b=unescape(c.split("=")[1]);break a}}b=void 0}_gaq.push(["_trackSocial","twitter","tweet",b])}})})})(window);
/* ]]> */
</script><style type="text/css">.cf-hidden { display: none; } .cf-invisible { visibility: hidden; }</style>
<style type="text/css"></style></head>
<body>
<h1 id="title">Magic Lantern Forum</h1>
<h2 id="linktree">Magic Lantern Releases =&gt; Camera-specific discussion =&gt; Topic started by: dichterDichter on July 18, 2012, 08:55:06 AM</h2>
<dl id="posts">
<dt class="postheader">
Title: <strong>[UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>July 18, 2012, 08:55:06 AM</strong>
</dt>
<dd class="postbody">
wow. I have a 40D and i think the 5Dc and the 40D are both VxWorks. Am i right? So would it work on a 40D?<br>It would be awsome to be able to record movies with the 40D.<br><br>nice work.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>July 18, 2012, 09:09:09 AM</strong>
</dt>
<dd class="postbody">
In theory, you have the foundation for running user code on 40D and most other VxWorks cameras.<br><br>In practice, there should also be a developer who must have this camera, skills and lots of time to work on it.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>July 18, 2012, 09:24:59 AM</strong>
</dt>
<dd class="postbody">
thank you.<br>ok... i have that camera, skills : hmmm, lots of time : doh!<br>but why not. maybe as a winter project.<br>Is it the current release or is there a special fork?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>July 18, 2012, 09:30:59 AM</strong>
</dt>
<dd class="postbody">
It's in the current source tree.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>July 18, 2012, 02:41:20 PM</strong>
</dt>
<dd class="postbody">
ok, lets see what happens when i start that on my 40D this evening.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>July 18, 2012, 02:50:42 PM</strong>
</dt>
<dd class="postbody">
Don't run that code blindly, first understand how it works. It has zero chances to work on 40D unmodified, and can be dangerous.<br><br>http://magiclantern.wikia.com/wiki/Other_dslr<br>http://magiclantern.wikia.com/wiki/For_Developers<br><br>First get a firmware dump, find out LED address and try blinking it.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>July 18, 2012, 04:21:06 PM</strong>
</dt>
<dd class="postbody">
yes, right. i will start with little steps. Thank you.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>July 18, 2012, 06:29:52 PM</strong>
</dt>
<dd class="postbody">
I suggest you look at my initial project for the 5dc:<br>www.bitbucket.org/coutts/5dplus (http://www.bitbucket.org/coutts/5dplus)<br><br>Everything starts in entry.S. First use a dumper tool to extract the firmware image from a canon firmware update file (see the build_scripts/eos_tools_v11 folder in that project linked above). Use decrypt_fw and then dissect_fw to split the FIR up. See this wiki page for more details:<br>http://magiclantern.wikia.com/wiki/Packing_FIR_Files (http://magiclantern.wikia.com/wiki/Packing_FIR_Files)<br><br>After you analyze the firmware dump using a program like IDA Pro (or the free ARM Console (http://magiclantern.wikia.com/wiki/GPL_Tools/ARM_console) created by Alex) to see how the camera boots/works, then attempt to boot a custom FIR file running user code. Use the assemble_fw perl script in the eos_tools directory to assemble a new FIR file with your usercode (compiled autoexec.bin) instead of canon's payload. The final step is to run decrypt_fw again on this fir to sign it for the camera to accept it. (Note: this step may or may not be necessary, depends on the camera. Try both if one doesn't work). Start by just blinking an LED or something basic to know your code runs. You don't need to boot the main firmware to blink an LED.<br><br>If 40d is similar to the 5dc, then you won't be able to run any practical code from a FIR (including calling the EnableBootDisk function or booting the firmware/camera) so you will need to write some code that scans the bootloader area (0xFFFF0000-0xFFFFFFFF) for function signatures to identify the read/write bootflag functions. This will allow you to set the camera's bootflag, to boot an autoexec.bin file with a prepared card, and development takes off from there (you will be able to boot the firmware and do anything from autoexec). I created this bootdisk code from the 350d method, using the 400d bootloader to find the signatures I needed. Only modification you will need is to change are the references to these:<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">read_bootflag = (ft_read_bootflag)0xFFFF8AE0;<br>write_bootflag = (ft_write_bootflag)0xFFFF89F0;<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>https://bitbucket.org/coutts/5dplus/src/e486f2e53796/bootdisk.c (https://bitbucket.org/coutts/5dplus/src/e486f2e53796/bootdisk.c)<br><br>The 5dc took me many hours to get going, I dumped many memory addresses through LED blinks in binary, you should be prepared to do the same. Here is some code that you can use to blink out the contents of a memory address if you know the red/blue LED addresses:<br>https://bitbucket.org/coutts/5dplus/src/a1cc964de4af/init.c<br><br>You can use this to write code to search for specific signatures of the read_bootflag and write_bootflag functions. Some signatures would be instructions like:<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">MOVEQ&nbsp; &nbsp;R7, #0xF8000000<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>which is assembled and looks like this in memory:<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">0x03A0733E<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Use the 5dc bootloader (I can send you it) to know what signatures you're looking for (unique instructions that would only appear in the read/write bootflag functions). After you find a signature and have a match at some spot in the BL area (0xFFFF0000-0xFFFFFFFF), use this address and search in reverse (going backwards in memory to lower addresses) until you find the nearest PUSH (STMFD) instruction, this will be the address of the start of the function so that you can call it / use it.<br><br><br><br>I'll just tell you the signatures to find.<br>First, for <strong>write_bootflag</strong>. Here is a small snippet from that function, the first 5 instructions:<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">ROM:FFFF89F0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;STMFD&nbsp; &nbsp;SP!, {R4-R8,LR}<br>ROM:FFFF89F4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOV&nbsp; &nbsp; &nbsp;R5, R1<br>ROM:FFFF89F8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOV&nbsp; &nbsp; &nbsp;R4, #0<br>ROM:FFFF89FC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CMP&nbsp; &nbsp; &nbsp;R0, #0<br>ROM:FFFF8A00&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOVNE&nbsp; &nbsp;R7, #0xF8000000<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>If you were scanning memory, these 5 instructions would look like this(starting at 0xFFFF89F0 on the left and ending on 0xFFFF8A00 on the right):<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">0xE92D41F0 0xE1A05001 0xE3A04000 0xE3500000 0x13A0733E<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>So, look for the signature for the <strong>MOVNE R7, #0xF8000000</strong> instruction, then once you find it, search backwards for the STMFD (push) instruction signature, and you will have located <strong>write_bootflag</strong> in the 40d bootloader. Chances are the functions will probably be identical, but take caution to verify at least 3 times that you have located the correct function and it seems the same / similar to the 5dc one (remember we are working blind here).<br><br><br>Now, <strong>read_bootflag</strong>. First 5 instructions look like:<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">ROM:FFFF8AE0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;STR&nbsp; &nbsp; &nbsp;LR, [SP,#var_4]!<br>ROM:FFFF8AE4&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;CMP&nbsp; &nbsp; &nbsp;R0, #0<br>ROM:FFFF8AE8&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOVNE&nbsp; &nbsp;R3, #0xF8000000<br>ROM:FFFF8AEC&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;ADDNE&nbsp; &nbsp;R3, R3, #0x2000<br>ROM:FFFF8AF0&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;MOVNE&nbsp; &nbsp;R2, #0x40<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>And in memory would look like this (same thing as before, starting at 0xFFFF8AE0 on left and ending at 0xFFFF8AF0 on the right):<br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">0xE52DE004 0xE3500000 0x3E33A013 0x12833A02 0x13A02040<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Note: there isn't a STMFD (push) instruction in read_bootflag. The 400d bootloader is like this too, so chances are the 40d is as well.<br><br><strong>NOTE:</strong> you may need to reverse endianness of the assembled instructions above to see them in memory, but maybe not, I can't remember :P<br><br><br>So, once you have located read_bootflag() and write_bootflag(), you will be able to really start developing. :) This may seem confusing, and I'm sorry, but I hope you will see how valuable this information is (I had to figure it all out on my own). The 350d people dumped the bootloader using a photo diode and the LED to blink the code in binary to a computer, I couldn't figure that out so I did it this way. Let me know if you have any questions, I can probably help a lot. Do you use gmail?<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>July 23, 2012, 01:54:30 PM</strong>
</dt>
<dd class="postbody">
Argh, first i have to repair my camera... broken release. <br>Thats really annoying.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Michael Zöller</strong> on <strong>July 23, 2012, 04:20:39 PM</strong>
</dt>
<dd class="postbody">
coutts, thats some very helpful information and should probably go into the wiki!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>July 24, 2012, 10:01:22 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg4477#msg4477">Quote from: Michael Zöller on July 23, 2012, 04:20:39 PM</a></div></div><blockquote class="bbc_standard_quote">coutts, thats some very helpful information and should probably go into the wiki!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>should be more than enough to get any port started :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>July 27, 2012, 07:18:23 AM</strong>
</dt>
<dd class="postbody">
There are plenty of Canon 40d users like me waiting to use MagicLantern on their 40d. Please! Make it happen. I am not a developer.....all can I do is to pray for your success :)<br><br>&nbsp;
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>July 29, 2012, 02:09:36 AM</strong>
</dt>
<dd class="postbody">
Finally some good news! I am enjoying the ML. I thank all who have worked on this project. I hope one day to use the ML with a 40D. I hope to give my contribution to make this possible.<br><br>I think the work done by Coutts to 5DC will be useful for even the 40D and 400D.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>July 31, 2012, 01:30:31 AM</strong>
</dt>
<dd class="postbody">
I'm thinking start doing the first tests.<br>I know it's a bit risky. Certainly, I will need your help.<br>Firstly, I will begin by installing and configuring ubuntu to compile the project. When I can, I will test the tools specified by Coutts.<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 05, 2012, 02:39:09 AM</strong>
</dt>
<dd class="postbody">
Hi,<br><br>I still have nothing to work but I have spent many hours reading the forums CHDK / ML. <br>I'm learning, have some patience with me. This still seems very complicated. Sorry if the questions are basic.<br><br>I got the firmware version 40d1.1.1. With application dissect_fw3_2, I got the unencrypted header and body. I've compiled a small application to try to find the addresses of the red and blue LED, but I've got a problem. I do not know how to encrypt the new firmware to be able to use on my machine. I read a lot about it but I could not understand the steps that have to follow.<br><br>If I can correctly encrypt my firmware I can proceed with my tests.<br><br>Since I've been searching for some string in the firmware files and I could see some interesting things. I found the string EnableBootDisk.<br><br>After seeing the flashing LEDs, I'll try to do a DUMP the firmware. <br>When I succeed in the previous tests, I proceed to the discovery of the function EnableBootDisk addresses.<br><br>Someone can help me create my own firmware for the 40D?<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 10, 2012, 05:09:08 AM</strong>
</dt>
<dd class="postbody">
I have a 40D with version 1.1.1. After much reading and testing I was able to flash both LEDs.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 10, 2012, 04:07:49 PM</strong>
</dt>
<dd class="postbody">
I used the information provided by Coutts to flash both LEDs.<br><br>See the examples:<br><br><br>1_1000D LED Finder (https://bitbucket.org/coutts/1000d_dev/src/a7835d17602f/engelmarkus_examples/1_1000D%20LED%20Finder/)<br><br>2_1000D LED-Dumper (https://bitbucket.org/coutts/1000d_dev/src/a7835d17602f/engelmarkus_examples/2_1000D%20LED-Dumper)<br><br>These are the addresses of blue and red LEDs:<br><br>LED_RED&nbsp; &nbsp; &nbsp;0xC02200E0<br>LED_BLUE&nbsp; &nbsp; 0xC02200E8
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>August 10, 2012, 08:20:03 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7082#msg7082">Quote from: jplxpto on August 10, 2012, 04:07:49 PM</a></div></div><blockquote class="bbc_standard_quote">I used the information provided by Coutts to flash both LEDs.<br><br>See the examples:<br><br><br>1_1000D LED Finder (https://bitbucket.org/coutts/1000d_dev/src/a7835d17602f/engelmarkus_examples/1_1000D%20LED%20Finder/)<br><br>2_1000D LED-Dumper (https://bitbucket.org/coutts/1000d_dev/src/a7835d17602f/engelmarkus_examples/2_1000D%20LED-Dumper)<br><br>These are the addresses of blue and red LEDs:<br><br>LED_RED&nbsp; &nbsp; &nbsp;0xC02200E0<br>LED_BLUE&nbsp; &nbsp; 0xC02200E8<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>great job! Let's get the 40d port on its way :)<br>Next step: copy/paste boot code into entry.S like the 5dc one. copy enough of the boot code until you can hook a task.<br><br>For initial hacking you may want to refer to 5dplus:<br>https://bitbucket.org/coutts/5dplus
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 10, 2012, 08:35:04 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7103#msg7103">Quote from: coutts on August 10, 2012, 08:20:03 PM</a></div></div><blockquote class="bbc_standard_quote">great job! Let's get the 40d port on its way :)<br>Next step: copy/paste boot code into entry.S like the 5dc one. copy enough of the boot code until you can hook a task.<br><br>For initial hacking you may want to refer to 5dplus:<br>https://bitbucket.org/coutts/5dplus<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Coutts, <br><br>yes I am currently reading your posts in CHDK.<br>In 2008 there were major developments, but for some unknown reason you moved away from this project. Made great advances that have helped future ports to other cameras but 40D &amp; 450D were forgotten! Why?! ...<br><br>Their progress in the port 1000D can give a great help! I think the cameras 1000D, 450D, 40D have many similarities. This can be an advantage.<br><br>Thank you for providing the code :<br><br>https://bitbucket.org/coutts/1000d_dev<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 10, 2012, 08:42:48 PM</strong>
</dt>
<dd class="postbody">
I really want to install the Magic Lantern in my camera and give my modest contribution to the community but,<br>&nbsp;without your precious help will not go away.<br><br>You have done an excellent job over the years.<br><br>Congratulations.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 10, 2012, 08:58:18 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7103#msg7103">Quote from: coutts on August 10, 2012, 08:20:03 PM</a></div></div><blockquote class="bbc_standard_quote">great job! Let's get the 40d port on its way :)<br>Next step: copy/paste boot code into entry.S like the 5dc one. copy enough of the boot code until you can hook a task.<br><br>For initial hacking you may want to refer to 5dplus:<br>https://bitbucket.org/coutts/5dplus<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Many will read this and get to thinking that an easy task! ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 11, 2012, 05:45:19 PM</strong>
</dt>
<dd class="postbody">
Has anyone done a dump of the ROM and BL fir v 1.1.1.?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2012, 06:31:20 AM</strong>
</dt>
<dd class="postbody">
I read a lot and follow the tips and suggestions from Coutts.<br><br>I analyzed the 5DC BL code and found the signatures of functions and read_bootflag write_bootflag. <br>Later, I created a small program to find them in my 40d fir 1.1.1.<br><br>I still do not know the original values of bootflags but I have called the function read_bootflags.<br><br>Not yet confirmed, but I believe that the addresses are:<br><br>read_bootflag -&gt; 0xffff 63a8<br>write_bootflag -&gt; 0xffff 62b8
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2012, 06:34:09 AM</strong>
</dt>
<dd class="postbody">
Someone can explain me how to operate the boot flags?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2012, 08:07:59 PM</strong>
</dt>
<dd class="postbody">
The original values of bootflags are:<br><br>F8000000 =&nbsp; 0<br>F8000004 =&nbsp; 0<br>F8000008 = -1<br>F800000C = -1
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2012, 08:58:35 PM</strong>
</dt>
<dd class="postbody">
<strong>I have good news.</strong><br><br><strong>The autoboot already works!!!</strong><br><br>I used the addresses of functions and LEDs that I presented to you earlier.<br>I used some test applications of Coutts, and made the necessary changes.<br><br>The second obstacle has been overcome.<br><br>I level up but, the game becomes more complicated and risky.<br><br>Wish me luck! ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2012, 09:04:03 PM</strong>
</dt>
<dd class="postbody">
My next steps are:<br><br>1) find the addresses of the functions Open, Write and Close;<br><br>2) create BL &amp; ROM dumps.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>August 13, 2012, 04:50:10 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7275#msg7275">Quote from: jplxpto on August 12, 2012, 09:04:03 PM</a></div></div><blockquote class="bbc_standard_quote">My next steps are:<br><br>1) find the addresses of the functions Open, Write and Close;<br><br>2) create BL &amp; ROM dumps.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>you must boot the firmware first. you cannot call file i/o until it has been initialized by VxWorks. now that you can run autoexec.bin, you can boot the firmware :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 13, 2012, 07:16:22 AM</strong>
</dt>
<dd class="postbody">
I've been reading the forums and ML CHDK and found some examples to dump the ROM and BL.<br><br>http://chdk.setepontos.com/index.php?topic=1651.45 (http://chdk.setepontos.com/index.php?topic=1651.45)<br><br>I found one that allowed you to dump the 40D FW 1.0.8.<br>They called on four functions in the code of the flasher.<br>The 'ASalina' made ??the dump from earlier versions.<br>I now want to do with version 1.1.1.<br><br>They found these features in version 1.0.8:<br><br>/ / 40d - flasher v1.0.8<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;open = (ft_open) 0x00989a34;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create = (ft_creat) 0x00989a44;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;write = (ft_write) 0x00989534;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;close = (ft_close) 0x009896a0;<br><br>I've been researching the same functions in version 1.1.1:<br><br>/ / 40d - flasher v1.1.1<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;open = (ft_open) 0x00989a3c;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;create = (ft_creat) 0x00989a4c<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;write = (ft_write) 0x0098953c;<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;close = (ft_close) 0x009896a8;<br><br>I've thought maybe it was not possible to call these functions before starting VxWorks. <br>I got confused with anything ...<br><br>The flasher code calls functions of the ROM?! ...<br><br>I still can not understand well the memory map and this is making me lose some time and let me crazy :)<br><br>Someone can give me some tips? Maybe you Coutts ... ;) Again ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 13, 2012, 07:33:16 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7311#msg7311">Quote from: coutts on August 13, 2012, 04:50:10 AM</a></div></div><blockquote class="bbc_standard_quote">you must boot the firmware first. you cannot call file i/o until it has been initialized by VxWorks. now that you can run autoexec.bin, you can boot the firmware :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Coutts I understand but how do I boot VxWorks?! ...<br>My apologies if the question is basic! ;)<br><br>I've been to see the entry.S 5DC but still seems to me very complicated.<br>How do you know the sequence of function calls to boot.<br>I studied multitasking, but on the VxWorks I only know the name: (<br><br>How do I use AUTOEXEC.BIN to start the VxWorks?! ...<br><br>Can I use the functions DEBUGMSG and dump before starting VxWorks?<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>August 13, 2012, 05:25:21 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg7321#msg7321">Quote from: jplxpto on August 13, 2012, 07:33:16 AM</a></div></div><blockquote class="bbc_standard_quote"><br>Coutts I understand but how do I boot VxWorks?! ...<br>My apologies if the question is basic! ;)<br><br>I've been to see the entry.S 5DC but still seems to me very complicated.<br>How do you know the sequence of function calls to boot.<br>I studied multitasking, but on the VxWorks I only know the name: (<br><br>How do I use AUTOEXEC.BIN to start the VxWorks?! ...<br><br>Can I use the functions DEBUGMSG and dump before starting VxWorks?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Those functions you listed earlier sound like they are bootloader functions but they are being called from RAM, so I wouldn't call those (not sure if the functions are copied there or not). I've been looking for file i/o in the bootloader for a while but haven't found it, if you have found these functions in the BL, then that is huge progress! It will help new ports a lot.<br><br>Now for booting VxWorks, what I mean is you must copy/paste the boot code starting at 0xFF810000 far enough to where you can spawn your own task. We need to hook ourselves into VxWorks. Once we have started our one task, we can hand execution back to canon and boot the camera like normal.<br><br>So, I used some bootcode from chuchin but it is literally copy/pasted line for line from the ROM (at FF810000). As a test, see if you can make your entry.S jump execution to FF810000 and see if the camera boots like normal.<br><br>Then begin tracing the boot process to know how much code needs to be re-written. You only need to write until the part where it calls CreateTask on the startup task. We can hook our task in here.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 14, 2012, 08:59:59 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote">As a test, see if you can make your entry.S jump execution to FF810000 and see if the camera boots like normal.</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'll test it ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 17, 2012, 09:44:46 PM</strong>
</dt>
<dd class="postbody">
I'm working on it ...<br><br>I already have the dump of the ROM. I've also got the boot flag active.<br><br><strong>The Coutts and Cucho have given me a great help ..<br>They have been fantastic.</strong><br><br>The Nano has sent me a file entry.S.<br><br>I'll be a little busy, but soon I hope to present you some results.<br><br><br><strong>Does anyone else want to help me?! ... Any help is welcome.</strong>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 18, 2012, 09:11:57 PM</strong>
</dt>
<dd class="postbody">
<br><strong>I have good news ...</strong><br><br>I already have a tread running ... flashing blue LED!<br><br>The LED turns off when the TFT is turned off but with the MENU button it lights up again.<br><br>I already found the address of some functions but there is still much work ahead to be able to integrate my code with ML.<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 26, 2012, 11:45:30 PM</strong>
</dt>
<dd class="postbody">
Hi guys,<br><br>I keep working on this project and I having some successes<br><br>Now I can write logs on the card.<br><br>I've been analyzing the logs and found some messages that can help me identify the VRAM.<br><br>Then I present some:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; &nbsp;304:&nbsp; &nbsp;591.053 &lt; GUI Lock &gt; InitializeGUILock (PUB)<br>&nbsp; &nbsp;305:&nbsp; &nbsp;592.017 [GUI] MasterResultCBR<br>&nbsp; &nbsp;306:&nbsp; &nbsp;592.224 [GUI] GUI_Initialize ClassID[21]GUI[23]Ctrl[24]<br>&nbsp; &nbsp;307:&nbsp; &nbsp;593.033 [GUI] -&gt; handleGuiInit<br>&nbsp; &nbsp;308:&nbsp; &nbsp;598.963 [DispCon] InitializeDisplayDeviceController (PUB)<br>&nbsp; &nbsp;309:&nbsp; &nbsp;600.121 [IMP] (PUB) InitializeImagePlayer 1113<br>&nbsp; &nbsp;310:&nbsp; &nbsp;601.818 [CERES] RegisterAdapterStatusCallback<br>&nbsp; &nbsp;311:&nbsp; &nbsp;607.638 [Graphics] GuiStartGraphics (PUB)<br>&nbsp; &nbsp;312:&nbsp; &nbsp;608.057 [IMP] (PUB) StartImagePlayer(mode=0) 1189<br>&nbsp; &nbsp;313:&nbsp; &nbsp;608.094 [IMP] CreateVram 665<br>&nbsp; &nbsp;330:&nbsp; &nbsp;684.874 [Graphics] GuiClearImage<br>&nbsp; &nbsp;331:&nbsp; &nbsp;684.933 [IMP] (PUB) SetVramInformation(w:720 h:240) 1291<br>&nbsp; &nbsp;332:&nbsp; &nbsp;684.997 SetImageVramParameter x:0 y:0 w:720 h:240/* Aspect:0*/<br>&nbsp; &nbsp;333:&nbsp; &nbsp;685.032 [IMP] (PUB) SyncroAllClearImagePlayWorkVramWithoutEngine 2644<br>&nbsp; &nbsp;334:&nbsp; &nbsp;685.052 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;335:&nbsp; &nbsp;685.072 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;336:&nbsp; &nbsp;716.486 [IMP] (PUB) RefreshImageVram 1597<br>&nbsp; &nbsp;337:&nbsp; &nbsp;716.519 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;338:&nbsp; &nbsp;716.765 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;339:&nbsp; &nbsp;716.791 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;340:&nbsp; &nbsp;716.823 [GUI] StopDateTimer<br>&nbsp; &nbsp;341:&nbsp; &nbsp;716.852 [GUI] ClearColorPalette (0)<br>&nbsp; &nbsp;342:&nbsp; &nbsp;716.924 [GUI] GUI_RegisterPropertySlave<br>&nbsp; &nbsp;343:&nbsp; &nbsp;724.367 [GUI] MasterResultCBR_AvailableMyMenuList(0x79594c)<br>&nbsp; &nbsp;344:&nbsp; &nbsp;724.618 [GUI] MasterResultCBR_ErrBattery(0x79599c)<br>&nbsp; &nbsp;345:&nbsp; &nbsp;725.033 [DP]Dp_GetGlbRegisterCbrTAdr()<br>&nbsp; &nbsp;346:&nbsp; &nbsp;725.182 [DP]Dp_GetGlbRegisterCbrTAdr()<br>&nbsp; &nbsp;347:&nbsp; &nbsp;725.645 [GUI] GUI_SetLanguage (15)</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>August 26, 2012, 11:54:20 PM</strong>
</dt>
<dd class="postbody">
Sounds good.<br><br>Point the camera to something recognizable and dump roughly 1MB from the VRAM address to confirm it.<br><br>Another way to find VRAM buffers: look for EDMAC registers. In digic 4, these are c0f04008, c0f04108 ... c0f04f08, then c0f26008, c0f26108 etc. One of those registers should point to the LiveView buffer.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 27, 2012, 02:37:40 AM</strong>
</dt>
<dd class="postbody">
Now I'm trying to change the logging level. <br>I hope to see something else, but I'm not having great success.<br><br>I have to confirm my stubs ... I must be doing something wrong.<br><br>I changed the amount of logging that is written but there is something wrong. <br>I have to understand what is happening.<br><br>I wanted to make sure that those are the addresses of VRAM.<br><br>I'm going to dump the VRAM (1M) but I still do not know what to do with it... :(<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 27, 2012, 02:40:41 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg9207#msg9207">Quote from: a1ex on August 26, 2012, 11:54:20 PM</a></div></div><blockquote class="bbc_standard_quote">Sounds good.<br><br>Point the camera to something recognizable and dump roughly 1MB from the VRAM address to confirm it.<br><br>Another way to find VRAM buffers: look for EDMAC registers. In digic 4, these are c0f04008, c0f04108 ... c0f04f08, then c0f26008, c0f26108 etc. One of those registers should point to the LiveView buffer.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>These&nbsp; EDMAC registers are also valid in the DIGIC III?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>August 27, 2012, 07:34:33 AM</strong>
</dt>
<dd class="postbody">
You can post them here.<br><br>I have no idea what's inside DIGIC III.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 28, 2012, 12:36:22 AM</strong>
</dt>
<dd class="postbody">
Thanks Alex, I'll analyze the problem better
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>September 05, 2012, 08:24:52 PM</strong>
</dt>
<dd class="postbody">
One way to find vram:<br><br>All vram buffers are like structures, with off_0x00 pointing to a string in the ROM that says "Vram Instance". There's a few of these so you'll have to check for all of them. But, you can dump say the first 0x10000 bytes of ram and look for these pointers. Tip for dumping: you might need to do what I have to do with the 5dc (which I learned from 0xAF with the 400d) and dump using a buffer.<br><br>For whatever reason, I can't seem to dump very much without using a buffer. simple code:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">//~ dump memory 64kb at a time using a buffer.<br>void dump_with_buffer(int addr, int len, char* filename)<br>{<br>&nbsp; &nbsp; FIO_RemoveFile(filename);<br>&nbsp; &nbsp; FILE* f = FIO_CreateFile(filename);<br>&nbsp; &nbsp; if (f!=-1)<br>&nbsp; &nbsp; { <br>&nbsp; &nbsp; &nbsp; &nbsp; int address = addr;<br>&nbsp; &nbsp; &nbsp; &nbsp; while (address&lt;addr+len)<br>&nbsp; &nbsp; &nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; char buf[0x10000];<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; memcpy(buf, (void*)address, 0x10000);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; FIO_WriteFile(f, buf, 0x10000);<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; address += 0x10000;<br>&nbsp; &nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; &nbsp; &nbsp; FIO_CloseFile(f);<br>&nbsp; &nbsp; }<br>}</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>September 05, 2012, 08:32:41 PM</strong>
</dt>
<dd class="postbody">
when I found the 5dc vram, I did it a bit oddly. I used img.py (http://magiclantern.wikia.com/wiki/VRAM/550D#How_to_find_segments[/url]). You should look into this. You already know the dimensions of the buffer (same as 5dc): 720x240 with a pitch of 360 I believe. so, dump an area of memory and run it all through img.py to see if you can see the menu or whatever screen you dumped the ram at.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 06, 2012, 12:38:07 AM</strong>
</dt>
<dd class="postbody">
Coutts, once again thank you for your help. <br><br>I already knew that page. I've also ran this section of your code. <br>I've done dump part of RAM, but I have not had time to test this python script. Once I have the opportunity I will do this test.<br><br>However, I've spent a few hours looking at the 40D firmware. I identified many functions on my camera. <br>I think there are too many in your 5DC. If you want I send you my stubs for 40D v1.1.1. <br><br>I try to read all your posts. You have written some things that I have been very useful for my port. <br><br>Soon I will try to present some results. I've been working on it a little every day.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 09, 2012, 02:20:15 AM</strong>
</dt>
<dd class="postbody">
I have found many functions in 40D firmware. <br>These are the ones that create the state objects (I still do not know if missing some function)<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFD4F17C, CreateTaskClass);<br><br>NSTUB(0xFFD4EE48, CreateStateObject);<br><br>NSTUB(0xFFB04634, DpImgEditState_CreateStateObject);<br>NSTUB(0xFFB06DC4, DpState_CreateStateObject);<br>NSTUB(0xFFBB0A2C, TOMState_CreateStateObject);<br>NSTUB(0xFFC7F9E0, USBC20State_CreateStateObject);<br><br>NSTUB(0xFFBB7DFC, CeresState_CreateStateObject);<br>NSTUB(0xFFB72BEC, PtpDpsState_CreateStateObject);<br>NSTUB(0xFF84BD74, RMTState_CreateStateObject);<br>NSTUB(0xFFB57FC4, FSSState_CreateStateObject);<br>NSTUB(0xFFC86AFC, PropState_CreateStateObject);<br>NSTUB(0xFFB618B8, RDState_CreateStateObject);<br>NSTUB(0xFFB3D088, LVCDEVState_CreateStateObject);<br>NSTUB(0xFFB3BC98, LVCAFState_CreateStateObject);<br>NSTUB(0xFFB3A554, LVCAEState_CreateStateObject);<br>NSTUB(0xFFB32CB8, LVState_CreateStateObject);<br>NSTUB(0xFFBFDB18, FWState_CreateStateObject);<br>NSTUB(0xFFBFB9A8, FRState_CreateStateObject);<br>NSTUB(0xFFBF0B6C, MrkState_CreateStateObject);<br>NSTUB(0xFFB56580, FCSState_CreateStateObject);<br>NSTUB(0xFFBAE9D8, SdioTskState_CreateStateObject);<br>NSTUB(0xFFBD5564, FMNormalState_CreateStateObject);<br>NSTUB(0xFFD5CEA4, DMState_CreateStateObject);<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 09, 2012, 11:30:54 AM</strong>
</dt>
<dd class="postbody">
Yay!<br><br>http://a1ex.bitbucket.org/ML/states/40D-alt/index.html<br><br>Some functions named automatically with my scripts: http://dl.dropbox.com/u/4124919/bleeding-edge/40D.111.idc<br><br>Try to dump from MEM(0x7768), size MEM(0x7764), while you are in LiveView. If successful, we can record MJPEG video :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 10, 2012, 03:43:54 PM</strong>
</dt>
<dd class="postbody">
Alex,<br><br>Thanks for your help.<br><br>I'll do this test ..
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 13, 2012, 02:14:55 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg10770#msg10770">Quote from: a1ex on September 09, 2012, 11:30:54 AM</a></div></div><blockquote class="bbc_standard_quote">Yay!<br><br>http://a1ex.bitbucket.org/ML/states/40D-alt/index.html<br><br>Some functions named automatically with my scripts: http://dl.dropbox.com/u/4124919/bleeding-edge/40D.111.idc<br><br>Try to dump from MEM(0x7768), size MEM(0x7764), while you are in LiveView. If successful, we can record MJPEG video :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>----------------------------------------<br><br>Alex, <br><br>I want to know which of your script made ​​this excellent work. I have little experience in the use of your tools. I saw nothing that did that.<br><br>I found hundreds of methods in firmware but it took me many hours looking at the assembly.<br><br>And how did you get those addresses? ...<br><br>Thanks in advance ...<br><br><br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>September 13, 2012, 02:34:03 AM</strong>
</dt>
<dd class="postbody">
How is this going on? :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 13, 2012, 08:55:43 AM</strong>
</dt>
<dd class="postbody">
This one:<br><br>1) guessfunc.run(dump) in arm console<br>2) run -i namefuncx.py<br><br>http://dl.dropbox.com/u/4124919/name_funcx.py
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 14, 2012, 01:05:06 AM</strong>
</dt>
<dd class="postbody">
IT'S WORKING !!! IT'S WORKING !!! IT'S WORKING !!!<br><br>Alex, thanks for the tip<br><br>Finally, I got a little time I did the test and it worked!!<br><br>I got the JPEG successfully.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 14, 2012, 01:36:48 AM</strong>
</dt>
<dd class="postbody">
<br>LV - JPEG<br><br>1024 x 680<br><br>-----<br><br>LCD<br><br>mode :&nbsp; w x h<br><br>0 : 720 x 240<br>1 : 704 x 480<br>2 : 720 x 576
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 14, 2012, 02:00:45 AM</strong>
</dt>
<dd class="postbody">
<div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"> 51722: 13249.867 [DispCon] TurnOnDisplay (PUB)<br>&nbsp;51723: 13266.642 [LV] lvSetPsave 0x0<br>&nbsp;51724: 13267.371 [LV] LV_GetPtpZoomWindowArea IX=1560(16384), IY=1038(0)<br>&nbsp;51725: 13267.404 [LV] LV_GetPtpZoomWindowArea CX=0, CY=0<br>&nbsp;51726: 13268.004 [LV] lvSetWbIntegRegisterForAe 1<br>&nbsp;51727: 13268.045 [LV] StartLiveViewWbPass<br>&nbsp;51728: 13268.920 [LVCDEV]-&gt;lvcdevStartDev<br>&nbsp;51729: 13270.190 [LV] lvResetPsave<br>&nbsp;51730: 13270.396 [LV] WB 1974 1151 1151 2533(1377)<br>&nbsp;51731: 13270.503 [LV] lvResetPsave(1) 0x5A 0x454 0x49E<br>&nbsp;51732: 13270.528 [LV] lvResetPsave(2) 0x0 0x0 0x0<br>&nbsp;51733: 13271.801 [LVCDEV]-&gt;lvcdevResourceGet(0,1)<br>&nbsp;[b]51734: 13272.366 [DPATH] LV_JPG START Y:0x1de43c64 J:0x1ca700c8 Y411:0x10798ea0[/b]<br>&nbsp;51735: 13275.198 [LV] lvVDInterrupt<br>&nbsp;51736: 13275.363 [LV] WB 1974 1151 1151 2533(1158)<br>&nbsp;51737: 13279.334 [DEV] LV_JPG YuvWriteCompleteCBR<br>&nbsp;51738: 13279.373 [DEV] LV_JPG YUVReadCompleteCBR<br>&nbsp;51739: 13279.499 [DEV] LV_JPG JpCoreCompleteCBR( 0x2e1c6 )<br>&nbsp;51740: 13279.553 [DEV] LV_JPG JpegPopCompleteCBR<br>[b] 51741: 13279.672 [DPATH] LV_JPG STOP Y:0x1df97c64 J:0x1ca9e28e Y411:0x107a0e20[/b]<br>&nbsp;51742: 13280.277 [LVCDEV]-&gt;PD(VF:0x107927ec,MS:0x485540)<br>[b] 51743: 13282.818 [LV] lvReturnVram[/b]<br>&nbsp;51744: 13282.851 &lt; GUI Lock &gt; GUILock_PermitPowerLock (PUB)<br>&nbsp;51745: 13283.134 &lt; GUI Lock &gt; GUILockTask 1<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Chucho</strong> on <strong>September 14, 2012, 02:46:30 AM</strong>
</dt>
<dd class="postbody">
In 2008 dataghost teased the world be getting video from his 40d. Now it looks like it might just happen for other 40d users. Congratulation on your hard work!!!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 14, 2012, 07:35:59 AM</strong>
</dt>
<dd class="postbody">
Yay!<br><br>I think this is a lot better than Dataghost obtained (I've followed the thread back then). If all goes well, we will have MJPEG 422 at 1024x680.<br><br>Sure, we need to have a working port first. If you share the current status and code, I can help with this.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>September 14, 2012, 08:07:28 AM</strong>
</dt>
<dd class="postbody">
Congrats you have done marvelous job...........eagerly waiting to use it on my 40d :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 14, 2012, 11:54:06 AM</strong>
</dt>
<dd class="postbody">
Thank you all, but this would not have been possible without your help.<br><br>The Coutts, Chucho and the A1ex helped me a lot.<br><br>I have to thank also to the guys of CHDK. In the past they did an excellent job. <br>Without this work and without tools Alex would be very complicated.<br><br>I have spent many hours on it. I'm a little tired. Once you have a little time, I'll share with you my code.<br><br>My next steps will be to change the boot process. <br>I want to do something similar to what exists for other cameras.<br><br>I've read some things and did not seem very complex. With time and with your help will be easy.<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 14, 2012, 12:04:25 PM</strong>
</dt>
<dd class="postbody">
Take it easy. This low-level stuff can take a lot of time, even for experienced people.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 02:55:22 AM</strong>
</dt>
<dd class="postbody">
<del>'Vram Instance' : 0xFF9B943C</del>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>September 15, 2012, 12:50:19 PM</strong>
</dt>
<dd class="postbody">
That's the same LV resolution as the 50D, what about frame rates though?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 03:45:14 PM</strong>
</dt>
<dd class="postbody">
Some strings from 40dv111 ...<br><br><br><strong>s vram</strong><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">[b]ffca0178: '[IMP] CreateVram %d' [/b]<br>ffca0930: '[IMP] CompleteVramSyncroClearCBR err:%d'<br>ffca0d48: '[IMP] (PUB) SetVramInformation(w:%ld h:%ld) %d'<br>[b]ffca7528: '[IMPV] MakeHDVram %d' [/b]<br>ffca0e9c: '[IMP] DrawImageToVram GetJpegInfo():%d'<br>ffca1298: '[IMP] (PUB) RefreshImageVram %d'<br>ffca12b8: '[IMP] RefreshImageVram : VramNo not found'<br>ffca15a8: '[IMP] (PUB) AbortDrawImageToVram %d'<br>[b]ffca648c: '[IMPV] SetVramImageInfo %d' [/b]<br>ffca2c04: '[IMP] (PUB) SyncroClearImagePlayVram %d'<br>ffca089c: '[IMP] ImageVramCompleteCBR err:%d'<br>ffca349c: '[IMP] (PUB) SetVisibleImageVramOffset %d'<br>ffca3518: '[IMP]&nbsp; pVramImagePositionY %d'<br>ffcaff38: 'Not Exist Bitmap Vram!!'<br>[b]ffca32fc: '[IMP] (PUB) GetVramImageInfo %d' [/b]<br>[b]ffca0ec4: '[IMP] ERROR DrawImageToVram %s, %d' [/b]<br>ffca644c: '[IMPV] Complete MakeHDVram Error(%d)\n'<br>[b] ffca64a8: '[IMPV] SetVramImageInfo x:%ld y:%ld w:%ld h:%ld' [/b]<br>ff906cd4: '[GUI] uiImageWidth(%d) uiImageHeight(%d) uiVramWidth(%d)'<br>ff906d88: '[GUI] uiImageWidth(%d) uiImageHeight(%d) uiVramHeight(%d)'<br>ffca087c: '[IMP] ImageVramCompleteCBR %d'<br>[b]ffca12e4: '[IMP] RefreshImageVram VramAdd:0x%lX' [/b]<br>[b]ffca7b8c: '[IMPV] MakeHDVramFromJpeg Rot:%d Mag:%d Aspect:%d' [/b]<br>[b]ffca7cc4: '[IMPV] MakeHDVramFromYuv Rot:%d Mag:%d Aspect:%d' [/b]<br>[b]ffca7f74: '[IMPV] (PUB) MakeHDVramCheck %d' [/b]<br>[b]ffca8254: '[IMPV] GetVramImagePosAndSize s:%ld y:%ld w:%ld h:%ld' [/b]<br>[b]ffca01b4: '[IMP] Vram%d:0x%lX' [/b]<br>ffca34f8: '[IMP]&nbsp; pVramImagePositionX %d'<br>[b]ffcb16fc: '[BmpDDev] RefreshPhysicalVram (PUB)' [/b]<br>ffca7c84: '[IMPV] MakeHDVram Error!'<br>ffca02a8: '[IMP] DeleteVram %d'<br>ffca02bc: '[IMP] CopyCurrentDisplayVramToIdleVram %d'<br>ffca08c0: '[IMP] CompleteVramSyncroCopyCBR %d'<br>[b]ffcb0290: '[BmpDDev] CreatePhysicalVram (PUB)' [/b]<br>[b]ffb2d1d0: 'lv_vram_dump' [/b]<br>ffca7bd8: '[IMPV] WorkAdd:0x%lX VramAdd:0x%lX RotWork:0x%lX'<br>[b]ffca7b68: '[IMPV] (PUB) MakeHDVramFromJpeg %d' [/b]<br>ffca7c50: '[IMPV] VramWork basew:%ld x:%ld y:%ld w:%ld h:%ld'<br>[b]ffca7ca0: '[IMPV] (PUB) MakeHDVramFromYuv %d' [/b]<br>ffca2984: '[IMP] ERR: Not Found Display Vram'<br>ffcb03b4: '[BmpDDev] DeletePhysicalVram (PUB)'<br>ffca822c: '[IMPV] (PUB) GetVramImagePosAndSize %d'<br>ffcb1ba8: '[ImgDDev] WARNING Divide Zero Vram Width (%d)'<br>ffca2ff8: '[IMP] (PUB) SyncroAllClearImagePlayWorkVramWithoutEngine %d'<br>ff9122a4: '[GUI] CalcLvVramSize VramSize X(%d) Y(%d) W(%d) H(%d)'<br>[b]ffb32b30: '[LV] lvReturnVram' [/b]<br>ffcb3204: 'Already Vram For Adjust!!'<br>ff8b30ac: '[GUI] PlayModel.c DrawAspectFrame VramSize X(%d) Y(%d) W(%d) H(%d)'<br>ffca331c: '[IMP] GetVramImageInfo x:%ld y:%ld w:%ld h:%ld'<br>ffca334c: '[IMP] (STUB) SetImageVramColorMode(color:%ld) %d'<br>ffcb3530: 'Not Exist Vram For Adjust!!'<br>ffb34d94: '[LV] WriteEDmacVramCompleteCBR_x5'<br>[b]ffca3810: '[IMP] (PUB) GetVramInformation %d' [/b]<br>ffca08e4: '[IMP] CompleteVramSyncroCopyCBR err:%d'<br>ffca090c: '[IMP] CompleteVramSyncroClearCBR %d'<br>ffb361c4: '[LV] WriteEDmacVramCompleteCBR_x10'<br>ff883b18: '[TestEndDrawToVram] dwErrCode = %d'<br>ffcb8b6c: '[DispCon] GetVramSize (PUB)'<br>ffb39140: '[LV] WriteEDmacVramCompleteCBR_x1'<br>[b]ff9b943c: 'Vram Instance' [/b]<br>ff9b9558: 'pVram-&gt;Image.pPaletteIndex != NULL'<br>ff9b9594: '!IS_ERROR(pVram-&gt;hSemaphore)'<br>ff9b96b0: 'pVram-&gt;Mode == LOGICAL_VRAM'<br>ffca2e4c: '[IMP] (PUB) SyncroAllClearImagePlayIdleVramWithoutEngine %d'<br>ffca2e88: '[IMP] ERROR : Vram State'<br>ffca0e6c: '[IMP] (PUB) DrawImageToVram(rot:%d cb:0x%lX) %d'<br>ffca0d88: '[IMP] (PUB) SetCopyVramMode(mode=%d) %d'<br>ff87ece8: '&nbsp; [Graphics] EndDrawToVram (PRI), err %d'<br>ffcaa8bc: '[IMP][PBFEN] Fencing_StartVRAMMode'<br>ffca0e0c: 'SetImageVramParameter x:%ld y:%ld w:%ld h:%ld/* Aspect:%d*/'<br>ffc9ff6c: '[IMP] GetVramNumber %d'<br>ffc9ffa0: '[IMP] SetVramImageParameter %d'<br>ffc9ffc0: '[IMP] SetVramImageParameter add:0x%lX BaseW:%ld'<br></code><br><strong>s 411</strong><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffcaa86c: '[IMP][PBFEN] Fencing_SetDataYUV411VType'<br>ffc492c0: '[DPATH] LV_YPACK START Y411:%#lx YPACK:%#lx'<br>ffc492ec: '[DPATH] LV_YPACK STOP Y411:%#lx YPACK:%#lx'<br>ffc9af8c: '[IMPD] rot:%d cnv411:%d cnv422:%d cnv411_444:%d cnv422_444:%d'<br>ffc46e00: '[DPATH] LV_JPG START Y:%#lx J:%#lx Y411:%#lx'<br>ffc9a10c: '[IMPD] rot:%d block:%d cnv411:%d cnv422:%d'<br>ffc46fbc: '[DPATH] LV_JPG STOP Y:%#lx J:%#lx Y411:%#lx'<br>ffc96db0: '[IMP][PBRSZ] GetCnv411Mode %d'<br></code><br><strong>s 422</strong><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffc96d90: '[IMP][PBRSZ] GetCnv422Mode %d'<br>ffc9af8c: '[IMPD] rot:%d cnv411:%d cnv422:%d cnv411_444:%d cnv422_444:%d'<br>ffc9a10c: '[IMPD] rot:%d block:%d cnv411:%d cnv422:%d'<br>ffcaa894: '[IMP][PBFEN] Fencing_SetDataYUV422Type'<br></code><br><strong>s YUV</strong><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffc95578: '&lt;RESIZE&gt; SetParameterResizeYuv Abort End Before Lock'<br>ffc955fc: '[IMP][PBRSZ] RequestResizeYuv RdAdr:%#lx, WrAdr:%#lx'<br>ffcb56b8: 'gyuv'<br>ffb301f8: '[LV] YuvAddress = 0x%08lX'<br>ffb00db8: 'Dp_ReduceImageData_Yuv()'<br>ffc498dc: 'PonyYuvPath'<br>ffc95810: '[IMP][PBRSZ] RegisterCBROfCompleteResizeYuv %d'<br>ffb01094: 'Dp_AdobeRgbToSRgb_Yuv()'<br>ffcaa86c: '[IMP][PBFEN] Fencing_SetDataYUV411VType'<br>ffb013c0: 'Dp_ClearWidth_Yuv()'<br>ffc959b8: '[IMP][PBRSZ] Zoom:%d InYuv:%d OutYuv:%d'<br>ffafaf14: 'Dp_ExecuteYuvRotatingCBR() ErrorCode [0x%08x]'<br>ffc49f7c: '[DEV] Pony YuvWriteCompleteCBR'<br>ffca6754: '[IMPV] Yuv:%d Add:0x%lX BaseW:%ld'<br>ffb02720: 'Dp_CopyImageData_Yuv()'<br>ffb02738: 'pDstYuvDataAddress [%d]'<br>ffb02750: 'pSrcYuvDataAddress [%d]'<br>ffc45c34: 'FactoryYuvPath'<br>ffc444b8: '[DEV] JPG_EN YuvWriteCompleteCBR'<br>ffaf9fa8: 'Dp_YuvToYuv()'<br>ffca47a8: '[IMPL] Yuv:%d Add:0x%lX BaseW:%ld'<br>ffca4c1c: '[IMPL] (PUB) CalculateYuvResizeParameter %d'<br>ffb36258: '[LV] WriteEDmacYuvCompleteCBR_x10'<br>ffc988b0: '&lt;ROTATE&gt; RequestRotationYuv Before Lock'<br>ffca5294: '[IMPL]_CalcResizeSizeForRotZoom InYuv:%d OutYuv:%d Aspect:%d'<br>ff84534c: '[FA] FA_YuvDevelopTestImage'<br>ffca580c: '[IMPL] _CalcResizeSize InYuv:%d OutYuv:%d Aspect:%d'<br>ffc4604c: '[DEV] FactoryYuvPath_ChangeCBR(ID=%#lx)'<br>ffca630c: '[IMPV] GetAjustUnitYUV %d'<br>ffb018bc: 'Dp_CutImageWidth_Yuv()'<br>ffca6dec: '[IMPV] YuvMode:%d'<br>ffc47068: '[DEV] LV_JPG YuvWriteCompleteCBR'<br>ffca72e0: '[IMPV] YuvMode:%d BaseAdd:0x%lX BaseW:%ld'<br>ffca730c: '[IMPV] YuvMode:%d&nbsp; BaseAdd:0x%lX BaseW:%ld'<br>ffcadf00: '[IMP][DECWIN] SetNQDecParam adr:0x%08lX yuv:%d'<br>ffb01438: 'Dp_ExpandImageWidth_Yuv()'<br>ffb01490: 'Dp_ShiftYuvRotationData_Yuv()'<br>[b]ffca7cc4: '[IMPV] MakeHDVramFromYuv Rot:%d Mag:%d Aspect:%d' [/b]<br>ffc49c90: '[DPATH] Pony2 START YUV1:%#lx YUV2:%#lx'<br>ffc9c32c: '[IMPD] (PUB) ExecuteYuvRotating %d'<br>ffcb6ddc: '[DispCon] Err Factory Adjust For DisplayYUVGain'<br>ffc49ae4: '[DPATH] Pony1 START C:%#lx YUV:%#lx'<br>ffc49c2c: '[DPATH] Pony1 STOP C:%#lx YUV:%#lx'<br>ffc458c0: '[DEV] YuvWriteCompleteCBR'<br>ffc47048: '[DEV] LV_JPG YUVReadCompleteCBR'<br>ffb01b2c: 'Dp_AdjustCroppingSize_Yuv()'<br>ffc49e94: '[DPATH] Pony2 ReStartPonyYuvPath2'<br>ffb0134c: 'Dp_ClearHeight_Yuv()'<br>ffc49eb8: '[DPATH] Pony2 STOP YUV1:%#lx YUV2:%#lx'<br>ffc99db0: '[IMPD] YuvMode:%d'<br>ffc99de4: '[IMPD] StartYuvResizing Comp'<br>[b]ffb2d1e0: 'lv_yuv_dump' [/b]<br>ffcad330: '[IMP][DECWIN] SetResizeParam OutYuv:%d InputSel:%d'<br>ffcada9c: '[IMP][DECWIN] SetWinResDecParam adr:0x%08lX yuv:%d base:%ld'<br>ffcb15fc: '[BmpDDev] GetYUVPaletteFromDisplayDevice (PUB)'<br>ffb02798: 'Dp_ShiftImageHeight_Yuv()'<br>ffca7ca0: '[IMPV] (PUB) MakeHDVramFromYuv %d'<br>ffc8f344: '&lt;ROTATE&gt; RequestRotationYuv Abort End Before Lock'<br>ffc8f3a0: '[IMP][PBLOT]&nbsp; RequestRotationYuv Before Lock'<br>ffcb0608: '[BmpDDev] SetYUVPaletteToDisplayDeviceh (PUB)'<br>ffad0f50: 'YuvMode[%d]'<br>ffad0fd0: 'YuvMode[%d] BaseAddress[%d]'<br>ffafa738: 'ResizeYuvT Input nYuvMode [%d]'<br>ffb391d4: '[LV] WriteEDmacYuvCompleteCBR_x1'<br>ffc98708: '[IMP][PBROT]&nbsp; OUTPUT --- Yuv:%d Add:0x%lX Base:%ld'<br>ffca6d94: '[IMPV] ZoomMode:%d YuvMode:%d'<br>ffb0ff6c: 'Dp_YuvToJpeg [0x%08x]'<br>ffcadfa0: '[IMP][DECWIN] pYuvAddress:%#lx'<br>ffb02004: 'Dp_AdjustFrameWithWhite_Yuv()'<br>ffb34e28: '[LV] WriteEDmacYuvCompleteCBR_x5'<br>ffca5dd0: '[IMPL] rot:%d zoom:%d inYUV:%d outYUV:%d'<br>ffcb8d9c: '[DispCon] GetYUVGain'<br>ffc95520: '[IMP][PBRSZ] SetParameterResizeYuvForMovie %d'<br>ffc95634: '&lt;RESIZE&gt; RequestResizeYuv Abort End Before Lock'<br>ffc95664: '[IMP][PBRSZ] ERROR pResizeYuvCompleteCBR is NULL'<br>ffc95698: '[IMP][PBRSZ] CancelResizeYuv %d'<br>ffc95840: '[IMP][PBRSZ] UnregisterCBROfCompleteResizeYuv %d'<br>ffc95874: '[IMP][PBRSZ] AbortResizeYuv %d'<br>ffc96334: '[IMP][PBRSZ] Input:%ld Output:%ld InYuv_f:%ld OutYuv_f:%ld'<br>ffc46030: '[DEV] YuvWriteCompleteCBR'<br>ffc4937c: '[DEV] LV_YPACK YuvReadCompleteCBR'<br>ffb0ff5c: 'Dp_YuvToJpeg()'<br>ffcb7564: "[DispCon] Warning: YUV Gain Don't Adjust"<br>ffb17f6c: '[GYO]Dp_YUVDustReduction'<br>ffc98684: '[IMP][PBROT] SetParameterRotationYuv %d'<br>ffc986ac: '[IMP][PBROT]&nbsp; INPUT&nbsp; --- Yuv:%d Add:0x%lX Base:%ld'<br>ffc98838: '[IMP][PBROT] RequestRotationYuv %d'<br>ffc9885c: '&lt;ROTATE&gt; RequestRotationYuv Abort End Before Lock'<br>ffc98cc0: '[IMP][PBROT] CancelRotationYuv %d'<br>ffc98ce4: '[IMP][PBROT] RegisterCBROfCompleteRotationYuv %d'<br>ffc98d18: '[IMP][PBROT] UnregisterCBROfCompleteRotationYuv %d'<br>ffaf9720: 'Dp_JpegToYuvNew() Layout[0x%08x]'<br>ffaf97a4: 'Dp_JpegToYuvNew [0x%08x]'<br>ffcad788: '[IMP][DECWIN] SetResWinParam yuv:%d InputSel:%d'<br>ffb01160: 'YuvBaseAddress [0x%08x]'<br>ffc99dc4: '[IMPD] StartYuvResizing TIMEOUT'<br>ffc9a150: '[IMPD] StartYuvRotating Comp'<br>ffafa4cc: 'Not Executed Dp_YuvToYuvHalf()'<br>ffafa6a8: 'Dp_YuvToYuvCopy()'<br>ffafa6d8: 'Dp_YuvToYuvReduce()'<br>ffafa720: 'Dp_ExecuteYuvResizing()'<br>ffafa758: 'ResizeYuvT Output nYuvMode [%d]'<br>ffafa998: 'Dp_ExecuteYuvResizingCBR() ErrorCode [0x%08x]'<br>ffafa9dc: 'Dp_YuvRotation() Rotate:%d'<br>ffc8f1c8: 'EvenSize &gt;= YuvUnit'<br>ffc9f1e0: '&nbsp; &lt; IMD &gt; ERR: YUV mode'<br>ffafaf44: 'ExecuteYuvRotation'<br>ffc99d44: '[IMPD] StartYuvResizing %d'<br>ffc955d0: '&lt;RESIZE&gt; SetParameterResizeYuv Before Lock'<br>ffc99d78: '[IMPD] ZoomMode:%d YuvMode:%d'<br>ffc99e04: '[IMPD] ResizeYuv:%d'<br>ffc9b9d8: '[IMPD] ERROR Dpx_ExecuteYuvAngleAdjust %d'<br>ffc49f9c: '[DEV] PonyYuvPath_ChangeCBR(ID=%#lx)'<br>ffc9c308: '[IMPD] (PUB) ExecuteYuvResizing %d'<br>ffc9a0f0: '[IMPD] StartYuvRotating %d'<br>ffcaf664: '&nbsp; [BmpDDev] ConvertYUVPaletteToPBPalette (PRI)'<br>ffc44d70: '[DPATH] DCF_EN START DCF:%#lx YUV:%#lx'<br>ffc44f24: '[DPATH] DCF_EN STOP DCF:%#lx YUV:%#lx'<br>ffafa4b8: 'Dp_YuvToYuvHalf()'<br>ffc9c350: '[IMPD] (PUB) ExecuteYuvRotatingFor2Buffer %d'<br>ffafa68c: 'Dp_YuvToYuv64up() W:%d H:%d'<br>ff83e778: 'FA_YuvDevelopTestImage'<br>ff83e844: 'FA_GetYuvImage'<br>ffb151a8: 'YUV-Control Done'<br>ffca62f4: '[IMPV] SetUnitYUV %d'<br>ffcaa894: '[IMP][PBFEN] Fencing_SetDataYUV422Type'<br>ffafa9c8: 'ExecuteYuvResize'<br>ff845488: '[FA] FA_GetYuvImage'<br>ffca0e48: '[IMP] (PUB) SetYuvColorParameter %d'<br>ffc95550: '[IMP][PBRSZ] SetParameterResizeYuv %d'<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 05:05:51 PM</strong>
</dt>
<dd class="postbody">
<br>something interesting... mbm29lv2mx16<br><br>ROM:FFD5D808 aAssertionFai_0 DCB "Assertion failed: (char*)WriteDataInFastModeOnRam &gt; (char*)Erasi"<br>ROM:FFD5D808&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; DATA XREF: sub_FFD5DE00+28o<br>ROM:FFD5D808&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;; ROM:off_FFD5DE80o<br>ROM:FFD5D808&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;DCB "ngMethodOnRam, file ../<strong>MTD/mbm29lv2mx16</strong>/mbm29lv2mx16.c, line 86",0xA
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 06:02:20 PM</strong>
</dt>
<dd class="postbody">
some more addresses : <strong>0xC0F1407C , 0xC0F14074</strong><br>&nbsp; &nbsp;<br><strong>In [12]: r 0xC0F1407C</strong><br><br>str:[DispCon]_TurnOnDisplay_PUB+172:<br>str:[DispCon]_ShowBitmap_PUB+60:<br>str:[DispCon]_HideBitmap_PUB+60:<br>str:[DispCon]_SetDisplayType_PUB+372:<br><br><strong>In [13]: r 0xC0F14074</strong><br><br>str:[DispCon]_ShowImage_PUB+60:<br>str:[DispCon]_HideImage_PUB+60:<br>str:[DispCon]_SetDisplayType_PUB+356:<br>str:[DispCon]_TurnOnDisplay_PUB+156:<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 06:59:58 PM</strong>
</dt>
<dd class="postbody">
GetDisplayType_FFCB8668<br><br>return *0xBEA0<br><br>--------------------------------------------------------------------------------<br><br>GetDisplayWidth_FFCB6CAC<br><br>if *0xBEA4 == 0 /*EQ*/:<br>&nbsp; &nbsp; return 720<br>return 704<br><br>--------------------------------------------------------------------------------<br><br>GetDisplayHeight_FFCB8B04<br><br>if *0xBEA4 == 0 /*EQ*/:<br>&nbsp; &nbsp; return 240<br>if *0xBEA4 == 1 /*EQ*/:<br>&nbsp; &nbsp; return 480<br>return 576<br><br>--------------------------------------------------------------------------------<br><br><strong><br>Display Resolution/Mode (maybe):<br><br>0 : w = 720, h = 240<br>1 : w = 704, h = 480<br>2 : w = 704, h = 576<br></strong><br><br>--------------------------------------------------------------------------------<br><br>0x5B74 : unknown<br>0x5B78 : unknown<br>0x5BB8 : unknown<br>0x5BF8 : Vram Instance (maybe)<br>0x5BFC : unknown<br>0x5C00 : unknown<br>0x5C04 : unknown<br>0x5C08 : unknown<br>0x5C0C : unknown<br><br>0xB854 : unknown<br><br>0xBEA0 : DISPLAY TYPE<br>0xBEA4 : DISPLAY MODE (maybe)<br><br><br>0x1E004 : VRAM SEMAPHORE (maybe)<br>0x1E010 : VRAM INFORMATION<br>0x1E0A8 : unknown<br>0x1E100 : VRAM PARAMETERS&nbsp; // 0x1E0A8 + 0x58 = 0x1E100
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 09:36:16 PM</strong>
</dt>
<dd class="postbody">
&nbsp; &nbsp;302:&nbsp; &nbsp;589.004 [GUI] MasterResultCBR<br>&nbsp; &nbsp;303:&nbsp; &nbsp;589.210 [GUI] GUI_Initialize ClassID[21]GUI[23]Ctrl[24]<br>&nbsp; &nbsp;304:&nbsp; &nbsp;589.992 [GUI] -&gt; handleGuiInit<br>&nbsp; &nbsp;305:&nbsp; &nbsp;595.929 [DispCon] InitializeDisplayDeviceController (PUB)<br>&nbsp; &nbsp;306:&nbsp; &nbsp;597.086 [IMP] (PUB) InitializeImagePlayer 1113<br>&nbsp; &nbsp;307:&nbsp; &nbsp;598.805 [CERES] RegisterAdapterStatusCallback<br>&nbsp; &nbsp;308:&nbsp; &nbsp;604.642 [Graphics] GuiStartGraphics (PUB)<br>&nbsp; &nbsp;309:&nbsp; &nbsp;605.045 [IMP] (PUB) StartImagePlayer(mode=0) 1189<br>&nbsp; &nbsp;310:&nbsp; &nbsp;605.096 [IMP] CreateVram 665<br>&nbsp; &nbsp;311:&nbsp; &nbsp;605.252 [IMP] <strong>Vram0:0x1065BE00</strong><br>&nbsp; &nbsp;312:&nbsp; &nbsp;605.354 [IMP] <strong>Vram1:0x106F3C8C</strong><br>&nbsp; &nbsp;...<br>&nbsp; &nbsp;858: 10003.647 myTaskDumpf:80: [MY_TEST] VRAM INFO:<br>&nbsp; &nbsp;859: 10003.702 myTaskDumpf:84: [MY_TEST] Show ImageVramParameter : x:0 y:24 w:720 h:216<br>&nbsp; &nbsp;861: 10118.505 [IMP] (PUB) GetVramInformation 3766<br>&nbsp; &nbsp;862: 10118.608 myTaskDumpf:101: [MY_TEST] GetVramInformation : <strong>arg0=1065BE00 ; Vram0</strong><br>&nbsp; &nbsp;863: 10118.642 myTaskDumpf:102: [MY_TEST] GetVramInformation : arg1=00000000<br>&nbsp; &nbsp;864: 10118.683 myTaskDumpf:103: [MY_TEST] GetVramInformation : <strong>arg2=106F3C8C ; Vram1</strong><br>&nbsp; &nbsp;865: 10118.708 myTaskDumpf:104: [MY_TEST] GetVramInformation : arg3=00000002<br>&nbsp; &nbsp;866: 10118.739 myTaskDumpf:105: [MY_TEST] GetVramInformation : arg4=000002D0 ; 720<br>&nbsp; &nbsp;867: 10118.768 myTaskDumpf:106: [MY_TEST] GetVramInformation : arg5=000002D0 ; 720<br>&nbsp; &nbsp;868: 10118.798 myTaskDumpf:107: [MY_TEST] GetVramInformation : arg6=000000F0 ; 240<br><br><br>0x1E010+0x00 -&gt; arg0<br>0x1E010+0x04 -&gt; arg4<br>0x1E010+0x08 -&gt; arg5<br>0x1E010+0x0C -&gt; arg6<br>0x1E010+0x10 -&gt; arg1<br>0x1E010+0x14 -&gt; arg2<br>0x1E010+0x24 -&gt; arg3<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 15, 2012, 11:00:24 PM</strong>
</dt>
<dd class="postbody">
Some more stubs :<br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFCB02B4, CreatePhysicalVram)<br>NSTUB(0xFFCA01C8, CreateVram)<br>NSTUB(0xFFCA75C4, MakeHDVram)<br>NSTUB(0xFFB32EA0, LV_lvReturnVram)<br>NSTUB(0xFFCA130C, RefreshImageVram)<br>NSTUB(0xFFCA38DC, SetVramInformation)<br>NSTUB(0xFFCA432C, GetVramInformation)<br>NSTUB(0xFFCA3AA0, SetImageVramParameter)<br>NSTUB(0xFFCA6520, SetVramImageInfo)<br>NSTUB(0xFFCA3EC4, GetVramImageInfo)<br>NSTUB(0xFFCA8498, GetVramImagePosAndSize)<br>NSTUB(0xFFCA35D0, GetWorkImageLengthAndPosition)</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 16, 2012, 02:12:02 AM</strong>
</dt>
<dd class="postbody">
I did dump some state-objects and found that the structure appears to be the same as 5DC.<br><br><br>NSTUB(0xFFB3D088, LVCDEVState_CreateStateObject);&nbsp; &nbsp;// Mem 0x7770 / state matrix : 0xFFB3C9D4<br>NSTUB(0xFFB3BC98, LVCAFState_CreateStateObject);&nbsp; &nbsp; // Mem 0x7748 / state matrix : 0xFFB3B540<br>NSTUB(0xFFB3A554, LVCAEState_CreateStateObject);&nbsp; &nbsp; // Mem 0x7738 / state matrix : 0xFFB39F5C<br>NSTUB(0xFFB32CB8, LVState_CreateStateObject);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Mem 0x7628 / state matrix : 0xFFB2EDC4<br>NSTUB(0xFFD5CEA4, DMState_CreateStateObject);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Mem 0xEFDC / state matrix : 0xFFD5CD84<br><br>&nbsp; &nbsp;973: 11003.762 logMemory:24: DUMP DMState:<br>&nbsp; &nbsp;974: 11003.815 logMemory:30: MEM(0x00201AD8) = 0xFFD4EE3C : type - "StateObject"<br>&nbsp; &nbsp;975: 11003.861 logMemory:30: MEM(0x00201ADC) = 0xFFD5CD7C : name - "DMState"<br>&nbsp; &nbsp;976: 11003.890 logMemory:30: MEM(0x00201AE0) = 0x00000000 : auto_sequence<br>&nbsp; &nbsp;977: 11003.935 logMemory:30: MEM(0x00201AE4) = 0xFFD4F018 : StateTransition_maybe<br>&nbsp; &nbsp;978: 11003.980 logMemory:30: MEM(0x00201AE8) = 0xFFD5CD84 : state_matrix<br>&nbsp; &nbsp;979: 11004.009 logMemory:30: MEM(0x00201AEC) = 0x0000000E : max_inputs<br>&nbsp; &nbsp;980: 11004.039 logMemory:30: MEM(0x00201AF0) = 0x00000002 : max_states<br>&nbsp; &nbsp;981: 11004.069 logMemory:30: MEM(0x00201AF4) = 0x00000000 : current_state<br>&nbsp; &nbsp;<br>&nbsp; &nbsp;983: 11004.124 logMemory:24: DUMP LVState:<br>&nbsp; &nbsp;984: 11004.169 logMemory:30: MEM(0x00797940) = 0xFFD4EE3C<br>&nbsp; &nbsp;985: 11004.214 logMemory:30: MEM(0x00797944) = 0xFFB2F454<br>&nbsp; &nbsp;986: 11004.244 logMemory:30: MEM(0x00797948) = 0x00000000<br>&nbsp; &nbsp;987: 11004.289 logMemory:30: MEM(0x0079794C) = 0xFFD4F018<br>&nbsp; &nbsp;988: 11004.335 logMemory:30: MEM(0x00797950) = 0xFFB2EDC4<br>&nbsp; &nbsp;989: 11004.366 logMemory:30: MEM(0x00797954) = 0x0000000F<br>&nbsp; &nbsp;990: 11004.396 logMemory:30: MEM(0x00797958) = 0x0000000E<br>&nbsp; &nbsp;991: 11004.426 logMemory:30: MEM(0x0079795C) = 0x00000000<br><br>&nbsp; &nbsp;993: 11004.483 logMemory:24: DUMP LVCAEState:<br>&nbsp; &nbsp;994: 11004.528 logMemory:30: MEM(0x00796FB4) = 0xFFD4EE3C<br>&nbsp; &nbsp;995: 11004.573 logMemory:30: MEM(0x00796FB8) = 0xFFB39F50<br>&nbsp; &nbsp;996: 11004.603 logMemory:30: MEM(0x00796FBC) = 0x00000000<br>&nbsp; &nbsp;997: 11004.648 logMemory:30: MEM(0x00796FC0) = 0xFFD4F018<br>&nbsp; &nbsp;998: 11004.693 logMemory:30: MEM(0x00796FC4) = 0xFFB39F5C<br>&nbsp; &nbsp;999: 11004.724 logMemory:30: MEM(0x00796FC8) = 0x0000000A<br>&nbsp; 1000: 11004.754 logMemory:30: MEM(0x00796FCC) = 0x00000006<br>&nbsp; 1001: 11004.784 logMemory:30: MEM(0x00796FD0) = 0x00000002<br><br>&nbsp; 1003: 11004.841 logMemory:24: DUMP LVCAFState:<br>&nbsp; 1004: 11004.887 logMemory:30: MEM(0x0079742C) = 0xFFD4EE3C<br>&nbsp; 1005: 11004.932 logMemory:30: MEM(0x00797430) = 0xFFB3B534<br>&nbsp; 1006: 11004.962 logMemory:30: MEM(0x00797434) = 0x00000000<br>&nbsp; 1007: 11005.007 logMemory:30: MEM(0x00797438) = 0xFFD4F018<br>&nbsp; 1008: 11005.052 logMemory:30: MEM(0x0079743C) = 0xFFB3B540<br>&nbsp; 1009: 11005.082 logMemory:30: MEM(0x00797440) = 0x0000000C<br>&nbsp; 1010: 11005.112 logMemory:30: MEM(0x00797444) = 0x00000009<br>&nbsp; 1011: 11005.143 logMemory:30: MEM(0x00797448) = 0x00000001<br><br>&nbsp; 1013: 11005.199 logMemory:24: DUMP LVCDEVState:<br>&nbsp; 1014: 11005.245 logMemory:30: MEM(0x0079754C) = 0xFFD4EE3C<br>&nbsp; 1015: 11005.290 logMemory:30: MEM(0x00797550) = 0xFFB3C9C8<br>&nbsp; 1016: 11005.320 logMemory:30: MEM(0x00797554) = 0x00000000<br>&nbsp; 1017: 11005.365 logMemory:30: MEM(0x00797558) = 0xFFD4F018<br>&nbsp; 1018: 11005.410 logMemory:30: MEM(0x0079755C) = 0xFFB3C9D4<br>&nbsp; 1019: 11005.440 logMemory:30: MEM(0x00797560) = 0x00000008<br>&nbsp; 1020: 11005.471 logMemory:30: MEM(0x00797564) = 0x00000003<br>&nbsp; 1021: 11005.501 logMemory:30: MEM(0x00797568) = 0x00000001<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 16, 2012, 04:37:19 AM</strong>
</dt>
<dd class="postbody">
DUMP FROM MEMORY ADDRESS 0x0001E000:<br>&nbsp; &nbsp;<br>MEM(0x0001E000) = 0x00000000 (0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// unknown parameter<br>MEM(0x0001E004) = 0x0011C1B0 (1163696)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// VRAM SEMAPHORE (maybe)<br>MEM(0x0001E008) = 0x0011C18C (1163660)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// maybe another semaphore<br>MEM(0x0001E00C) = 0x00000000 (0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// unknown parameter<br>&nbsp; &nbsp;<br><strong>MEM(0x0001E010) = 0x1065BE00 (275103232)</strong>&nbsp;&nbsp;&nbsp;// Vram0 address - (GetVramInformation - arg 0)<br>MEM(0x0001E014) = 0x000002D0 (720)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram0 width (maybe) - (GetVramInformation - arg 4)<br>MEM(0x0001E018) = 0x000002D0 (720)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram0 pitch (maybe) - (GetVramInformation - arg 5)<br>MEM(0x0001E01C) = 0x000000F0 (240)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram0 height (maybe) - (GetVramInformation - arg 6)<br>MEM(0x0001E020) = 0x00000000 (0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// unknown parameter - (GetVramInformation - arg 1)<br>&nbsp; &nbsp;<br><strong>MEM(0x0001E024) = 0x106F3C8C (275725452)</strong>&nbsp;&nbsp;&nbsp;// Vram1 address - (GetVramInformation - arg 2)<br>MEM(0x0001E028) = 0x000002D0 (720)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram1 width (maybe)<br>MEM(0x0001E02C) = 0x000002D0 (720)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram1 pitch (maybe)<br>MEM(0x0001E030) = 0x000000F0 (240)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Vram1 height (maybe)<br>MEM(0x0001E034) = 0x00000002 (2)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// unknown parameter - (GetVramInformation - arg 3)<br>&nbsp; &nbsp;<br><strong>MEM(0x0001E038) = 0x1DBC0064 (498860132)</strong> // Some Video memory<br>MEM(0x0001E03C) = 0x00000798 (1944)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// RAW (w / 2) - SRAW ???<br>MEM(0x0001E040) = 0x00000798 (1944)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// RAW (w / 2) - SRAW ???<br>MEM(0x0001E044) = 0x00000510 (1296)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// RAW (h / 2) - SRAW ???<br>MEM(0x0001E048) = 0x00000798 (1944)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// WorkImageSize - w<br>MEM(0x0001E04C) = 0x00000510 (1296)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// WorkImageSize - h<br>&nbsp; &nbsp;<br>MEM(0x0001E050) = 0x00000000 (0)<br>MEM(0x0001E054) = 0x00000000 (0)<br>MEM(0x0001E058) = 0x00000000 (0)<br>MEM(0x0001E05C) = 0x00000000 (0)<br>MEM(0x0001E060) = 0x00000000 (0)<br>MEM(0x0001E064) = 0x00000000 (0)<br>MEM(0x0001E068) = 0x00000000 (0)<br>MEM(0x0001E06C) = 0x00000000 (0)<br>MEM(0x0001E070) = 0x00000000 (0)<br>MEM(0x0001E074) = 0x00000000 (0)<br>MEM(0x0001E078) = 0x00000000 (0)<br>MEM(0x0001E07C) = 0x00000000 (0)<br>MEM(0x0001E080) = 0x00000000 (0)<br>MEM(0x0001E084) = 0x00000000 (0)<br>&nbsp; &nbsp;<br>MEM(0x0001E088) = 0x00484E5C (4738652)<br>MEM(0x0001E08C) = 0x00400000 (4194304)<br>MEM(0x0001E090) = 0x00000001 (1)<br><br>MEM(0x0001E094) = 0x00000F30 (3888)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// JpegSize - w<br>MEM(0x0001E098) = 0x00000A20 (2592)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// JpegSize - h<br><br>MEM(0x0001E09C) = 0x00001D40 (7488)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// EffectiveSizeOfJpeg - w<br>MEM(0x0001E0A0) = 0x00001380 (4992)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// EffectiveSizeOfJpeg - h<br><br>MEM(0x0001E0A4) = 0x00000000 (0)<br><br><br><strong>MEM(0x0001E0A8) = 0x00000001 (1)</strong>&nbsp;&nbsp;&nbsp;// star of some structure - unknown parameter ???<br>MEM(0x0001E0AC) = 0x00000000 (0)<br>MEM(0x0001E0B0) = 0x00000000 (0)<br><strong><br>MEM(0x0001E0B4) = 0x1DBC0064 (498860132)&nbsp; &nbsp; &nbsp; &nbsp; // SetImageWorkMemory - 1<br>MEM(0x0001E0B8) = 0x1E26F264 (505868900)&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// SetImageWorkMemory - 2<br>MEM(0x0001E0BC) = 0x106F3C8C (275725452) &nbsp;&nbsp;&nbsp;// Vram1 address<br></strong><br>MEM(0x0001E0C0) = 0x00000000 (0)<br>&nbsp; &nbsp;<br>MEM(0x0001E0C4) = 0x00484E5C (4738652)<br>MEM(0x0001E0C8) = 0x00400000 (4194304)<br>MEM(0x0001E0CC) = 0x00000000 (0)<br>MEM(0x0001E0D0) = 0x00000000 (0)<br><br>MEM(0x0001E0D4) = 0x00000F30 (3888)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// RAW w<br>MEM(0x0001E0D8) = 0x00000A20 (2592)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// RAW h<br><br>MEM(0x0001E0DC) = 0x000009C0 (2496)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// SetImageWorkMaxPixel - w<br>MEM(0x0001E0E0) = 0x00000750 (1872)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// SetImageWorkMaxPixel - h<br><br>MEM(0x0001E0E4) = 0x00000000 (0)<br>MEM(0x0001E0E8) = 0x00000000 (0)<br>MEM(0x0001E0EC) = 0x00000000 (0)<br>MEM(0x0001E0F0) = 0x00000000 (0)<br>MEM(0x0001E0F4) = 0x000002D0 (720)<br>MEM(0x0001E0F8) = 0x000001E0 (480)<br>MEM(0x0001E0FC) = 0x000002D0 (720)<br>&nbsp; &nbsp;<br>================================================================<br>&nbsp; &nbsp;<br>DUMP FROM MEMORY ADDRESS 0x0001E100:<br>&nbsp; &nbsp;<br>MEM(0x0001E100) = 0x00000000 (0)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// pVramImagePositionX - ImageVramParameter<br>MEM(0x0001E104) = 0x00000018 (24)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// pVramImagePositionY - ImageVramParameter<br>MEM(0x0001E108) = 0x000002D0 (720)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// WholeWidth - ImageVramParameter<br>MEM(0x0001E10C) = 0x000000D8 (216)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// WholeHeigh - ImageVramParameter<br>MEM(0x0001E110) = 0x0001DC00 (121856)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Aspect - ImageVramParameter ???<br>MEM(0x0001E114) = 0x00000000 (0)<br>MEM(0x0001E118) = 0x00000000 (0)<br>MEM(0x0001E11C) = 0x00000000 (0)<br>MEM(0x0001E120) = 0x00000000 (0)<br>MEM(0x0001E124) = 0x00000000 (0)<br>MEM(0x0001E128) = 0x00000000 (0)<br>MEM(0x0001E12C) = 0x00000000 (0)<br>MEM(0x0001E130) = 0x00000000 (0)<br>MEM(0x0001E134) = 0x00000000 (0)<br>MEM(0x0001E138) = 0x00000000 (0)<br>MEM(0x0001E13C) = 0x00000000 (0)<br>MEM(0x0001E140) = 0x005E5558 (6182232)<br>MEM(0x0001E144) = 0x00000000 (0)<br>MEM(0x0001E148) = 0x0001DB90 (121744)<br>MEM(0x0001E14C) = 0x00000000 (0)<br>MEM(0x0001E150) = 0xFF8851E4 (-7843356)<br>MEM(0x0001E154) = 0x00012D6C (77164)<br>MEM(0x0001E158) = 0x00000000 (0)<br>MEM(0x0001E15C) = 0x00000000 (0)<br>MEM(0x0001E160) = 0xFFCA415C (-3522212)<br>MEM(0x0001E164) = 0x00000000 (0)<br>MEM(0x0001E168) = 0x00000000 (0)<br>MEM(0x0001E16C) = 0x00000000 (0)<br>MEM(0x0001E170) = 0x00000000 (0)<br><br>MEM(0x0001E174) = 0x00000000 (0) // SetVramImageInfo - x<br>MEM(0x0001E178) = 0x00000018 (24) // SetVramImageInfo - y<br>MEM(0x0001E17C) = 0x000002D0 (720) // SetVramImageInfo - w<br>MEM(0x0001E180) = 0x000000D8 (216) // SetVramImageInfo - h<br><br>MEM(0x0001E184) = 0x00000000 (0)<br>MEM(0x0001E188) = 0x00000000 (0)<br>&nbsp; &nbsp;<br>MEM(0x0001E18C) = 0x106F3C8C (275725452)&nbsp;&nbsp;&nbsp;// Vram1 address<br>MEM(0x0001E190) = 0x000002D0 (720)<br>MEM(0x0001E194) = 0x000000F0 (240)<br>MEM(0x0001E198) = 0x00000000 (0)<br>MEM(0x0001E19C) = 0x00000018 (24)<br>MEM(0x0001E1A0) = 0x000002D0 (720)<br>MEM(0x0001E1A4) = 0x000000D8 (216)<br>&nbsp; &nbsp;<br>MEM(0x0001E1A8) = 0x00000000 (0)<br>MEM(0x0001E1AC) = 0x00000000 (0)<br>MEM(0x0001E1B0) = 0x00000000 (0)<br>MEM(0x0001E1B4) = 0x00000000 (0)<br>MEM(0x0001E1B8) = 0x00000000 (0)<br>MEM(0x0001E1BC) = 0x00000000 (0)<br>MEM(0x0001E1C0) = 0x00000000 (0)<br>MEM(0x0001E1C4) = 0x00000000 (0)<br>MEM(0x0001E1C8) = 0x00000000 (0)<br>MEM(0x0001E1CC) = 0x00000000 (0)<br>MEM(0x0001E1D0) = 0x00000000 (0)<br>MEM(0x0001E1D4) = 0x00000000 (0)<br>MEM(0x0001E1D8) = 0x00000000 (0)<br>MEM(0x0001E1DC) = 0x00000000 (0)<br>MEM(0x0001E1E0) = 0x00000000 (0)<br>MEM(0x0001E1E4) = 0x00000000 (0)<br>MEM(0x0001E1E8) = 0x00000000 (0)<br>MEM(0x0001E1EC) = 0x00000000 (0)<br>MEM(0x0001E1F0) = 0x00000000 (0)<br>MEM(0x0001E1F4) = 0x00000000 (0)<br>MEM(0x0001E1F8) = 0x00000000 (0)<br>MEM(0x0001E1FC) = 0x00000000 (0)<br>&nbsp; &nbsp;<br><strong><br>Vram0:0x1065BE00<br>Vram1:0x106F3C8C<br></strong>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 17, 2012, 01:36:51 AM</strong>
</dt>
<dd class="postbody">
&nbsp; &nbsp;698:&nbsp; 3711.532 [GUI] StartPlayMain<br>&nbsp; &nbsp;699:&nbsp; 3718.551 [Graphics] CreateSharedBuffer !!!<br><strong>&nbsp; &nbsp;700:&nbsp; 3719.198 [IMP] (PUB) SetImageWorkMemory 1:0x1dbc0064, 2:0x1e26f264<br>&nbsp; &nbsp;701:&nbsp; 3719.274 [IMP] (PUB) SetImageWorkMaxPixel W:2496,H:1872,0x6af200</strong><br>&nbsp; &nbsp;702:&nbsp; 3719.292 [Graphics] GuiGraphicsNormalMode (PUB)<br><br><strong> <br>ImageWorkMemory 1: 0x1dbc0064 <br>ImageWorkMemory 2: 0x1e26f264<br></strong><br><br><strong>0x1dbc0064 + 0x6af200 = 0x1e26f264</strong><br><br>0x6af200 size (maybe)<br><br><br>Maybe YUV422 VRAM - Playback Image
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 19, 2012, 01:37:33 AM</strong>
</dt>
<dd class="postbody">
I found four 'Vram Instance' strings in memory. <br>I believe that is the beginning of the structure vram_object. <br>I think two of them should be cacheable version and the other two uncacheable version.<br><br><del>0x00400B84&nbsp;&nbsp;&nbsp;<br>0x00800B84<br>&nbsp;&nbsp;&nbsp;<br>0x10400B84<br>0x10800B84</del>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 19, 2012, 03:41:21 AM</strong>
</dt>
<dd class="postbody">
&nbsp; &nbsp; I found a service menu on the 40D. <br>&nbsp; &nbsp; I ran the function at 0xFF8170D4 and appeared to me an error in the CMOS camera's LCD.<br><br>&nbsp; &nbsp;<strong>NSTUB(test_servicemenu_maybe, 0xFF8170D4)</strong>&nbsp; at v1.1.1<br><br>&nbsp; &nbsp;757: 59388.950 [GUI] DlgMnMainTabHeader.c PRESS_MLT_LEFT_BUTTON<br>&nbsp; &nbsp;758: 59403.149 [GUI] DlgMnMainPlay1 GOT_TOP_OF_CONTROL<br>&nbsp; &nbsp;760: 60043.684 [GUI_E] GUI_Control:60 0x0<br><strong>&nbsp; &nbsp;761: 60044.247 [GUI] IDLEHandler SERVICE_MENU</strong><br>&nbsp; &nbsp;762: 60044.300 [GUI] SetGUIRequestMode(25)<br>&nbsp; &nbsp;763: 60044.324 [GUI] NotifyGUIEvent(1)<br><br>---------------------------------------------<br><strong><br>ERR&nbsp; &nbsp; 123 123 123 025 032<br><br>REL&nbsp; &nbsp; &nbsp;11709<br><br>CMOS&nbsp; J0369547<br></strong><br>---------------------------------------------
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 19, 2012, 07:38:48 AM</strong>
</dt>
<dd class="postbody">
Be careful what you call, some things can do permanent damage.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 19, 2012, 11:33:29 AM</strong>
</dt>
<dd class="postbody">
Thank you Alex. I'll be careful. I am aware that there is dangerous.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>September 19, 2012, 12:39:53 PM</strong>
</dt>
<dd class="postbody">
no guts no glory they say<br>As a suggestion stay away from factory mode and prop changes unless you absolutely need them
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 19, 2012, 01:00:23 PM</strong>
</dt>
<dd class="postbody">
For a first port, take a look at 7D changeset, once you find the stubs it's probably a good starting point.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 19, 2012, 01:07:30 PM</strong>
</dt>
<dd class="postbody">
Ok, i'll do that...<br><br>Thank you
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 19, 2012, 11:05:19 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12025#msg12025">Quote from: nanomad on September 19, 2012, 12:39:53 PM</a></div></div><blockquote class="bbc_standard_quote">no guts no glory they say<br>As a suggestion stay away from factory mode and prop changes unless you absolutely need them<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I appreciate your advice. I've been through some of these stubs and thought the same.<br><br>I hope not to make any serious mistake ... I really want to have the ML in my precious camera.<br><br>Thank you
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 20, 2012, 01:18:51 AM</strong>
</dt>
<dd class="postbody">
40D v 1.1.1 - StateObjects List<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0x62B4, DpImgEditState);<br>NSTUB(0x5D88, DpState);<br>NSTUB(0x7E38, TOMState);<br><br>//NSTUB(, USBC20State_1);<br>//NSTUB(, USBC20State_2);<br>//NSTUB(, USBC20State_3);<br>//NSTUB(, USBC20State_4);<br><br>NSTUB(0x7E60, CeresStateState);<br>NSTUB(0x1AF60, PtpDpsStateState);<br>NSTUB(0x1AF64, PtpEvtListAccsSem);<br>NSTUB(0x1D34, RMTState);<br><br>NSTUB(0x7824, FSSState);<br>//NSTUB(0xB710, PropState);&nbsp; // maybe<br>NSTUB(0x7840, RDState);<br>NSTUB(0x7770, LVCDEVState);<br>NSTUB(0x7748, LVCAFState);<br>NSTUB(0x7738, LVCAEState);<br>NSTUB(0x7628, LVState);<br>//NSTUB(???, FWState);<br>//NSTUB(???, FRState);<br>NSTUB(0x834C, MrkState);<br>NSTUB(0x781C, FCSState);<br>NSTUB(0x7E10, SdioTskState);<br>NSTUB(0x82CC, FMNormalState);<br>NSTUB(0xEFDC, DMState);</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 20, 2012, 02:28:17 AM</strong>
</dt>
<dd class="postbody">
Dump from 0x00007600 to 0x00008000, when camera menu is showed and mode equal to M :<br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x00007600) = 0xFFB2BDA4 (-5063260)<br>MEM(0x00007604) = 0xFFB2C4A0 (-5061472)<br>MEM(0x00007608) = 0x00000000 (0)<br>MEM(0x0000760C) = 0x00000000 (0)<br>MEM(0x00007610) = 0x1024F09C (270856348)<br>MEM(0x00007614) = 0x00000001 (1)<br>MEM(0x00007618) = 0x10206DC0 (270560704)<br>MEM(0x0000761C) = 0x10252520 (270869792)<br>MEM(0x00007620) = 0x10223820 (270678048)<br>MEM(0x00007624) = 0x007975F4 (7960052)<br>MEM(0x00007628) = 0x00797940 (7960896)<br>MEM(0x0000762C) = 0x00000000 (0)<br>MEM(0x00007630) = 0xC0F03030 (-1058000848)<br>MEM(0x00007634) = 0x80010000 (-2147418112)<br>MEM(0x00007638) = 0xC0F03068 (-1058000792)<br>MEM(0x0000763C) = 0x80010004 (-2147418108)<br>MEM(0x00007640) = 0xC0F03070 (-1058000784)<br>MEM(0x00007644) = 0x80010007 (-2147418105)<br>MEM(0x00007648) = 0xC0F0B008 (-1057968120)<br>MEM(0x0000764C) = 0x00000000 (0)<br>MEM(0x00007650) = 0xFFFFFFFF (-1)<br>MEM(0x00007654) = 0xFFFFFFFF (-1)<br>MEM(0x00007658) = 0xC0F03044 (-1058000828)<br>MEM(0x0000765C) = 0x00000002 (2)<br>MEM(0x00007660) = 0xC0F03044 (-1058000828)<br>MEM(0x00007664) = 0x00000000 (0)<br>MEM(0x00007668) = 0xC0F0B000 (-1057968128)<br>MEM(0x0000766C) = 0x00000000 (0)<br>MEM(0x00007670) = 0xC0F0B004 (-1057968124)<br>MEM(0x00007674) = 0x00000001 (1)<br>MEM(0x00007678) = 0xC0F09000 (-1057976320)<br>MEM(0x0000767C) = 0x00000001 (1)<br>MEM(0x00007680) = 0xFFFFFFFF (-1)<br>MEM(0x00007684) = 0xFFFFFFFF (-1)<br>MEM(0x00007688) = 0xC0F09000 (-1057976320)<br>MEM(0x0000768C) = 0x80000000 (-<br>MEM(0x00007690) = 0xC0F0B000 (-1057968128)<br>MEM(0x00007694) = 0x00000001 (1)<br>MEM(0x00007698) = 0xC0F0B004 (-1057968124)<br>MEM(0x0000769C) = 0x00000000 (0)<br>MEM(0x000076A0) = 0xFFFFFFFF (-1)<br>MEM(0x000076A4) = 0xFFFFFFFF (-1)<br>MEM(0x000076A8) = 0xC0F03030 (-1058000848)<br>MEM(0x000076AC) = 0x00000000 (0)<br>MEM(0x000076B0) = 0xC0F03068 (-1058000792)<br>MEM(0x000076B4) = 0x00000000 (0)<br>MEM(0x000076B8) = 0xC0F03070 (-1058000784)<br>MEM(0x000076BC) = 0x00000000 (0)<br>MEM(0x000076C0) = 0xFFFFFFFF (-1)<br>MEM(0x000076C4) = 0xFFFFFFFF (-1)<br>MEM(0x000076C8) = 0xC0F0851C (-1057979108)<br>MEM(0x000076CC) = 0x00060258 (393816)<br>MEM(0x000076D0) = 0xC0F08520 (-1057979104)<br>MEM(0x000076D4) = 0x032C0568 (53216616)<br>MEM(0x000076D8) = 0xC0F11250 (-1057942960)<br>MEM(0x000076DC) = 0x00900000 (9437184)<br>MEM(0x000076E0) = 0xC0F11254 (-1057942956)<br>MEM(0x000076E4) = 0x028F02FF (42926847)<br>MEM(0x000076E8) = 0xFFFFFFFF (-1)<br>MEM(0x000076EC) = 0xFFFFFFFF (-1)<br>MEM(0x000076F0) = 0xC0F0851C (-1057979108)<br>MEM(0x000076F4) = 0x00060258 (393816)<br>MEM(0x000076F8) = 0xC0F08520 (-1057979104)<br>MEM(0x000076FC) = 0x032C0568 (53216616)<br>MEM(0x00007700) = 0xC0F11250 (-1057942960)<br>MEM(0x00007704) = 0x011000C0 (17825984)<br>MEM(0x00007708) = 0xC0F11254 (-1057942956)<br>MEM(0x0000770C) = 0x020F0241 (34538049)<br>MEM(0x00007710) = 0xFFFFFFFF (-1)<br>MEM(0x00007714) = 0xFFFFFFFF (-1)<br>MEM(0x00007718) = 0x00000000 (0)<br>MEM(0x0000771C) = 0x00000006 (6)<br>MEM(0x00007720) = 0xFFB38304 (-5012732)<br>MEM(0x00007724) = 0x00000000 (0)<br>MEM(0x00007728) = 0x00796F74 (7958388)<br>MEM(0x0000772C) = 0x00000000 (0)<br>MEM(0x00007730) = 0x00000000 (0)<br>MEM(0x00007734) = 0x00000000 (0)<br>MEM(0x00007738) = 0x00796FB4 (7958452)<br>MEM(0x0000773C) = 0x00000000 (0)<br>MEM(0x00007740) = 0x007973EC (7959532)<br>MEM(0x00007744) = 0x10202438 (270541880)<br>MEM(0x00007748) = 0x0079742C (7959596)<br>MEM(0x0000774C) = 0x00000000 (0)<br>MEM(0x00007750) = 0x00000000 (0)<br>MEM(0x00007754) = 0x0079750C (7959820)<br>MEM(0x00007758) = 0x00000000 (0)<br>MEM(0x0000775C) = 0x00000005 (5)<br>MEM(0x00007760) = 0x00000000 (0)<br>MEM(0x00007764) = 0x00000000 (0)<br>MEM(0x00007768) = 0x00000000 (0)<br>MEM(0x0000776C) = 0x00000000 (0)<br>MEM(0x00007770) = 0x0079754C (7959884)<br>MEM(0x00007774) = 0x00000000 (0)<br>MEM(0x00007778) = 0x00010339 (66361)<br>MEM(0x0000777C) = 0xFFFF0000 (-65536)<br>MEM(0x00007780) = 0x00040002 (262146)<br>MEM(0x00007784) = 0x00080004 (524292)<br>MEM(0x00007788) = 0x009000A4 (9437348)<br>MEM(0x0000778C) = 0x00200010 (2097168)<br>MEM(0x00007790) = 0x00FA0020 (16384032)<br>MEM(0x00007794) = 0x0015FF06 (1441542)<br>MEM(0x00007798) = 0xFFE80000 (-1572864)<br>MEM(0x0000779C) = 0x00100040 (1048640)<br>MEM(0x000077A0) = 0x0018000E (1572878)<br>MEM(0x000077A4) = 0x00480078 (4718712)<br>MEM(0x000077A8) = 0x00000010 (16)<br>MEM(0x000077AC) = 0x00000098 (152)<br>MEM(0x000077B0) = 0x00000060 (96)<br>MEM(0x000077B4) = 0x00000088 (136)<br>MEM(0x000077B8) = 0x0000006F (111)<br>MEM(0x000077BC) = 0x00000048 (72)<br>MEM(0x000077C0) = 0x00000058 (88)<br>MEM(0x000077C4) = 0x00000056 (86)<br>MEM(0x000077C8) = 0x00000100 (256)<br>MEM(0x000077CC) = 0x00000080 (128)<br>MEM(0x000077D0) = 0x00000000 (0)<br>MEM(0x000077D4) = 0x00000000 (0)<br>MEM(0x000077D8) = 0x00000000 (0)<br>MEM(0x000077DC) = 0x00000000 (0)<br>MEM(0x000077E0) = 0x00000000 (0)<br>MEM(0x000077E4) = 0x00000000 (0)<br>MEM(0x000077E8) = 0x00000000 (0)<br>MEM(0x000077EC) = 0x00000001 (1)<br>MEM(0x000077F0) = 0x00000000 (0)<br>MEM(0x000077F4) = 0x00000000 (0)<br>MEM(0x000077F8) = 0x00000004 (4)<br>MEM(0x000077FC) = 0x00000000 (0)</code><br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x00007648) = 0xC0F0B008 (-1057968120)</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 20, 2012, 04:15:34 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg9207#msg9207">Quote from: a1ex on August 26, 2012, 11:54:20 PM</a></div></div><blockquote class="bbc_standard_quote">Sounds good.<br><br>Point the camera to something recognizable and dump roughly 1MB from the VRAM address to confirm it.<br><br>Another way to find VRAM buffers: look for EDMAC registers. In digic 4, these are c0f04008, c0f04108 ... c0f04f08, then c0f26008, c0f26108 etc. One of those registers should point to the LiveView buffer.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>&nbsp; &nbsp; &nbsp; &nbsp; These are the values ​​I got ...<br><br>&nbsp;&nbsp;&nbsp;EDMAC Registers (maybe)<br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"><span style="white-space: pre;"> </span>MEM(0xC0F04008) = 0x3FBFFFF6<br><span style="white-space: pre;"> </span>MEM(0xC0F04108) = 0x3695B69E<br><span style="white-space: pre;"> </span>MEM(0xC0F04208) = 0x3F802DFC<br><span style="white-space: pre;"> </span>MEM(0xC0F04308) = 0x1BB044CA<br><span style="white-space: pre;"> </span>MEM(0xC0F04408) = 0x3E04583E<br><span style="white-space: pre;"> </span>MEM(0xC0F04508) = 0x3A91B07C<br><span style="white-space: pre;"> </span>MEM(0xC0F04608) = 0x1EA3FFCC<br><span style="white-space: pre;"> </span>MEM(0xC0F04708) = 0x00000000<br><span style="white-space: pre;"> </span>MEM(0xC0F04808) = 0x3A6F3EDE<br><span style="white-space: pre;"> </span>MEM(0xC0F04908) = 0x3F20DE9E<br><span style="white-space: pre;"> </span>MEM(0xC0F04A08) = 0x3D701EFE<br><span style="white-space: pre;"> </span>MEM(0xC0F04B08) = 0x194F3D52<br><span style="white-space: pre;"> </span>MEM(0xC0F04C08) = 0x34794AD6<br><span style="white-space: pre;"> </span>MEM(0xC0F04D08) = 0x2A674EDE<br><span style="white-space: pre;"> </span>MEM(0xC0F04E08) = 0x00000000<br><span style="white-space: pre;"> </span>MEM(0xC0F04F08) = 0x00000000<br></code><br><br>at 0xFFCF8184 : MOV&nbsp; &nbsp; &nbsp;R3, 0xC0F04008<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFCF8184, GetEDmacAddress)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 20, 2012, 08:35:01 AM</strong>
</dt>
<dd class="postbody">
Doesn't look like anything known, so it's probably not edmac.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 20, 2012, 12:27:58 PM</strong>
</dt>
<dd class="postbody">
I also did not like the results.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 21, 2012, 02:25:14 AM</strong>
</dt>
<dd class="postbody">
I found several LV functions that are registered, so they can be invoked by name.<br><br>FW v 1.1.1<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFB2E208, lv_start)<br>NSTUB(0xFFB2E244, lv_stop)<br><br>NSTUB(0xFFB2E280, lv_vram_dump)<br>NSTUB(0xFFB2E308, lv_yuv_dump)<br>NSTUB(0xFFB2E38C, lv_fps)<br><br>NSTUB(0xFFB2E3FC, lv_psave_on)<br>NSTUB(0xFFB2E46C, lv_psave_off)<br><br>NSTUB(0xFFB2DB54, lv_debug_ae)<br>NSTUB(0xFFB2DCF4, lv_debug_wb)<br>NSTUB(0xFFB2E4DC, lv_debug_af)<br><br>NSTUB(0xFFB2E5F8, lv_ae)<br>NSTUB(0xFFB2E668, lv_wb)<br>NSTUB(0xFFB2E6D8, lv_af_raw)<br><br>NSTUB(0xFFB2E748, lv_debug_flag)<br><br>NSTUB(0xFFB2E588, lv_data_count)<br><br>NSTUB(0xFFB2E82C, lv_eshutter)<br>NSTUB(0xFFB2E97C, lv_tvaf_start)<br>NSTUB(0xFFB2E89C, lv_magnify)<br><br>NSTUB(0xFFB2E90C, lv_save_raw)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>LensPainter</strong> on <strong>September 21, 2012, 10:01:58 AM</strong>
</dt>
<dd class="postbody">
Hi,<br>I'm new here and anxious to see the 40D to be used with ML:)<br>This is very very techy-stuff and hard for me to understand - so I'd just like to know, if there is a lantern at the end of the tunnel;)<br><br>Is there any way to support you?<br><br>Kind regards<br><br>Uwe<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 21, 2012, 11:33:17 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12331#msg12331">Quote from: LensPainter on September 21, 2012, 10:01:58 AM</a></div></div><blockquote class="bbc_standard_quote">Hi,<br>I'm new here and anxious to see the 40D to be used with ML:)<br>This is very very techy-stuff and hard for me to understand - so I'd just like to know, <br>if there is a lantern at the end of the tunnel;)<br><br>Is there any way to support you?<br><br>Kind regards<br><br>Uwe<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>I'm also very anxious to see the ML working for the first time ... and on my camera :)<br><br>I am new at this but I'm motivated ... soon I hope to ignite that light ... <br>for now i just lit the blue and red LED :)<br><br>I never received anything for my work, but donations are welcome. <br>They are the fuel needed to be able to see the light ... My God! :)<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 21, 2012, 11:37:48 AM</strong>
</dt>
<dd class="postbody">
I found the location of the structure 'vram_info'.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">/** VRAM info in the BSS.<br>&nbsp;*<br>&nbsp;* Pixels are in an YUV 422 format.<br>&nbsp;* This points to the image VRAM, not the bitmap vram<br>&nbsp;*/<br>struct vram_info<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; uint8_t *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vram;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// off 0x00<br>&nbsp; &nbsp; &nbsp; &nbsp; uint32_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; width;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // maybe off 0x04<br>&nbsp; &nbsp; &nbsp; &nbsp; uint32_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pitch;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; // maybe off 0x08<br>&nbsp; &nbsp; &nbsp; &nbsp; uint32_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; height;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;// off 0x0c<br>&nbsp; &nbsp; &nbsp; &nbsp; uint32_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; vram_number;&nbsp; &nbsp; // off 0x10<br>};<br>SIZE_CHECK_STRUCT( vram_info, 0x14 );<br><br>extern struct vram_info vram_info[2];</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"> NSTUB(0x0001E010, vram_info)<br><br>&nbsp;MEM(0x0001E010) = 0x1065BE00 (275103232)<br>&nbsp;MEM(0x0001E014) = 0x000002D0 (720)<br>&nbsp;MEM(0x0001E018) = 0x000002D0 (720)<br>&nbsp;MEM(0x0001E01C) = 0x000000F0 (240)<br>&nbsp;MEM(0x0001E020) = 0x00000002 (2)<br>&nbsp;<br>&nbsp;MEM(0x0001E024) = 0x106F3C8C (275725452)<br>&nbsp;MEM(0x0001E028) = 0x000002D0 (720)<br>&nbsp;MEM(0x0001E02C) = 0x000002D0 (720)<br>&nbsp;MEM(0x0001E030) = 0x000000F0 (240)<br>&nbsp;MEM(0x0001E034) = 0x00000000 (0)</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>mediabaron</strong> on <strong>September 23, 2012, 04:36:05 AM</strong>
</dt>
<dd class="postbody">
Having the 40D record video would be excellent. The resolution of 1024 x 680 is plenty for web video.<br><br>People do have to realize that the 40D was never intended to shoot video so it doesn't have a microphone or audio circuitry built into it. You will have to capture audio separately or lay down a background track of something like music.<br><br>But having the other ML still image features would greatly increase the use of the 40D for things like time-lapse photography and other applications.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 05:31:55 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12478#msg12478">Quote from: mediabaron on September 23, 2012, 04:36:05 AM</a></div></div><blockquote class="bbc_standard_quote">Having the 40D record video would be excellent. The resolution of 1024 x 680 is plenty for web video.<br><br>People do have to realize that the 40D was never intended to shoot video so it doesn't have a microphone or audio circuitry built into it. You will have to capture audio separately or lay down a background track of something like music.<br><br>But having the other ML still image features would greatly increase the use of the 40D for things like time-lapse photography and other applications.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>I have spent many hours with my camera, but I've done a few shots. I can not say when will release the first version for testing. I believe there are many users around the world who have this camera. I started this project because I feel a little revolted. The canon has never released a version with AF microadjustment. Many of us bought high quality lenses that would greatly benefit from this functionality. We gave billions of profit to Canon. I think they should respect us more and remember living of our money. I know the camera was discontinued but I did not let being a customer paying for a quality service. I may be a drop in the ocean with sharks but many, donald duck got rich collecting small coins. This is my response to the canon. If things go the way I want in a few months you can all enjoy my work without being forced to pay a penny.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 06:41:38 PM</strong>
</dt>
<dd class="postbody">
I found some more interesting things:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">strings -t x 40d.111.ROMF1.0xFF800000.bin | perl renumber.pl 0xFF800000 &gt; 40d.111.ROMF1.0xFF800000.string<br><br>grep 40d.111.ROMF1.0xFF800000.strings -e "Mgr$"</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffacff30 DpMgr<br>ffb04078 DpImgEditMgr<br>ffb2d10c LiveViewMgr<br>ffbaee34 TOMgr<br>ffbc55a0 FileMgr<br>ffc49060 DDDMgr<br>ffc877fc PropMgr<br>ffd17614 CardServiceMgr<br>ffd4c084 DbgMgr<br>ffd5a30c PowerMgr</code><br><br>With this simple command is simple filter many of the file names of the source code.<br>Sometimes it may be useful to help find some things in the dump.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">grep 40d.111.ROMF1.0xFF800000.strings -e ".*\.c" &gt; 40d.111.ROMF1.0xFF800000.files<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 07:13:01 PM</strong>
</dt>
<dd class="postbody">
Some memory address at firmware:<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffff1c6c Write Address : 0x00000000<br>ffff1c8c Write Address : 0x04000000<br>ffff2714 4.Erase TORNADO and Command area (0x%x -&gt; 0x%x)<br>ffff2748 5.Erase Program area (0xF8010000 -&gt; 0xF862FFFF)<br>ffff3578 Is flg written(Y=ON(0xFFFFFFFF)/N=OFF(0x00000000))? :<br>ffff3608 Is flg written(Y=ON(0x00000000)/N=OFF(0xFFFFFFFF))? :<br>ffff3774 ERASE [ROM1][0x00000000]<br>ffff39e4 Input start_address (ram 0x00000000 -&gt; 0x40000000) :<br>ffff3a1c Input end_address&nbsp; &nbsp;(ram 0x00000000 -&gt; 0x40000000) :<br>ffff3a54 Input address&nbsp; &nbsp; &nbsp; &nbsp;(rom 0xf8000000 -&gt; 0xf87FE000) :<br>ffff5914 FROM Check Sum is 0x%08x<br>ffff5930 ( 0xF8010000 - 0xF85FFFFF )<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 07:27:06 PM</strong>
</dt>
<dd class="postbody">
<br><br>grep 40d.111.ROMF1.0xFF800000.strings -e ".*[GUI].*StartMn" | awk -F' ' '{ print $3 }' | sort | uniq -u<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">StartMnActiveSweepApp<br>StartMnActiveSweepAutoApp<br>StartMnBrightnessApp<br>StartMnBusyApp<br>StartMnBusyKeepEventBtnApp()<br>StartMnCameraClearApp<br>StartMnCameraRegApp<br>StartMnCameraRegConfirmApp<br>StartMnCameraUnRegApp<br>StartMnCameraUnRegConfirmApp<br>StartMnCameraUnRegSelectApp<br>StartMnCardExtensionApp<br>StartMnCardFormatBeginAp<br>StartMnCardFormatexcuteApp<br>StartMnCopyBusyApp()<br>StartMnCopyConfirmApp<br>StartMnCopyMsgApp(<br>StartMnCopyResultApp(<br>StartMnCustomFnApp(%d)(%d)<br>StartMnCustomFnClearApp<br>StartMnDustOffDataApp<br>StartMnDustOffDataCompleteApp<br>StartMnDustOffDataExcuteApp<br>StartMnEraseImageApp<br>StartMnEraseImageBusyApp<br>StartMnEraseImageConfirmApp<br>StartMnEraseImageDummyApp<br>StartMnHandWorkSweepApp<br>StartMnImageZoneQualityApp<br>StartMnLanguageApp<br>StartMnLiveViewApp<br>StartMnMainCustomFuncApp()<br>StartMnMainMyMenuApp()<br>StartMnMainPlay1App()<br>StartMnMainPlay2App()<br>StartMnMainRec1App()<br>StartMnMainRec2App()<br>StartMnMainSetup1App()<br>StartMnMainSetup2App()<br>StartMnMainSetup3App()<br>StartMnMainStudioApp()<br>StartMnMmMessageApp(<br>StartMnMwbImageConfirmApp<br>StartMnMWBWarningApp<br>StartMnMyMenuDeleteApp()<br>StartMnMyMenuPreRearrange(<br>StartMnMyMenuRearrange(<br>StartMnMyMenuSelect()<br>StartMnMyMenuSetting()<br>StartMnPictureStyleDetailApp<br>StartMnPictureStyleMain<br>StartMnPictureUserDetail<br>StartMnQualityApp<br>StartMnQualityDivideApp<br>StartMnQualityDivideSelectApp<br>StartMnSensorCleanApp<br>StartMnStroboBuiltInSettingApp<br>StartMnStroboControlApp<br>StartMnStroboCustomFnApp<br>StartMnStroboCustomFnClearApp<br>StartMnStroboErrorApp<br>StartMnStroboFnSettingApp<br>StartMnStroboFnSettingClearApp<br>StartMnStroboFnSettingHeaderApp()<br>StartMnStroboOldOutSettingApp<br>StartMnStroboWirelessApp<br>StartMnStudioModeChangeConfirmApp<br>StartMnWBApp<br>StartMnWbBktApp<br></code><br>With this command we can get the list of menus available in firmware. This command can be useful for finding the code some functionality that is available in the original firmware.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 07:59:18 PM</strong>
</dt>
<dd class="postbody">
Some more strings...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">grep -e "libc" 40d.111.ROMF1.0xFF800000.strings</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ffcb9150 ../libcsvg/svg_canvas.c<br>ffcbd930 gfff../libcsvg/svg_paint.c<br>ffcbe118 ../libcsvg/svg_render.c<br>ffcbeb48 ../libcsvg/dom/dom.c<br>ffcbfc5c ../libcsvg/dom/dom_common.c<br>ffcc22e4 ../libcsvg/dom/dom_trait.c<br>ffcc629c ../libcsvg/core/attrib_core.c<br>ffcc6a88 ../libcsvg/core/attrib_graphics.c<br>ffcc733c ../libcsvg/core/attrib_paint.c<br>ffcca84c ../libcsvg/core/elem_anim.c<br>ffcd3138 ../libcsvg/core/elem_path.c<br>ffcd5b54 ../libcsvg/core/elem_shape.c<br>ffcd8354 ../libcsvg/core/elem_struct.c<br>ffcda5fc ../libcsvg/core/render_path.c<br>ffcdb054 ../libcsvg/core/render_shape.c<br>ffcdda64 ../libcsvg/core/stack_canvas.c<br>ffcddba4 ../libcsvg/core/stack_common.c<br>ffcddd38 ../libcsvg/core/stack_coordinate.c<br>ffcddedc ../libcsvg/core/stack_core.c<br>ffcde000 ../libcsvg/core/stack_element.c<br>ffcdebf8 ../libcsvg/core/stack_transform.c<br>ffce0f44 ../libcsvg/common/hash.c<br>ffce1274 ../libcsvg/common/id_table.c<br>ffce15b0 ../libcsvg/common/queue.c<br>ffce3a1c ../libcsvg/common/utils.c<br>ffce5bd8 ../libcucs/ucs.c<br>ffce9b34 ../libcsvg/common/uriref.c<br>ffcea324 ../libcsvg/svg_path.c<br>ffcef4e0 ../libcsvg/core/attrib_animtiming.c<br>ffcf09f4 ../libcsvg/core/datatype_preserveaspectratio.c<br>ffcf1568 ../libcsvg/core/render_anim.c<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 23, 2012, 08:05:33 PM</strong>
</dt>
<dd class="postbody">
Those Start***App sometimes can be started, but it's not a clean method for using them IMO. These calls may bring the correct dialog, but they do not setup the keys (guimode) and probably other things.<br><br>There is a SVG library inside, but nobody figured out how to use it.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 23, 2012, 10:08:54 PM</strong>
</dt>
<dd class="postbody">
I keep looking for the addresses of VRAM ... My next goal is to write on the LCD.<br><br>Unfortunately I have not got great results ... soon, I hope to get this my goal.<br><br>I know there are many similarities between the 5DC and 40D cameras. <br>So I decided to look some things coutts already found in your 5DC.<br><br><br><br>from magic lantern source code...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">/** Canon data structure containing BMP VRAM address.<br>&nbsp;* <br>&nbsp;* LCD: it points to a 720x480 cropped area, but the image buffer is actually 960x540.<br>&nbsp;* HDMI: it points to the full image buffer.<br>&nbsp;* <br>&nbsp;* ML alters this pointer to always indicate the 720x480 cropped area <br>&nbsp;* (to avoid the possibility of buffer overflow due to race conditions when changing display modes).<br>&nbsp;*/<br>struct bmp_vram_info<br>{<br>&nbsp; &nbsp; &nbsp; &nbsp; uint8_t *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vram0;<br>&nbsp; &nbsp; &nbsp; &nbsp; uint32_t&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; off_0x04;<br>&nbsp; &nbsp; &nbsp; &nbsp; uint8_t *&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;vram2;<br>};<br><br>extern struct bmp_vram_info bmp_vram_info[];<br></code><br>from 5DC.111 firmware...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"><br>NSTUB(0x29448, bmp_vram_info) <br><br>MakeName(0xFFB0A95C, "str:[BmpDDev]_SelectParameter");<br>MakeName(0xFFB0B174, "str:[BmpDDev]_DisplayPhysicalScreen");<br><br>REAL BMP VRAM&nbsp; : 0x29320+8 =0x29328<br><span style="white-space: pre;"> </span><br>REAL BMP VRAM&nbsp; : 0x29330+8 =0x29338<br>REAL BMP VRAM&nbsp; : 0x29350+8 =0x29358<br></code><br>from 40D.111 firmware...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0x1E450, bmp_vram_info) <br><br>MakeName(0xFFCAFAE0, "str:[BmpDDev]_SelectParameter");<br>MakeName(0xFFCB0468, "str:[BmpDDev]_DisplayPhysicalScreen");<br><br>REAL BMP VRAM&nbsp; : 0x1E328+8 = 1E330<br><span style="white-space: pre;"> </span><br>REAL BMP VRAM&nbsp; : 0x1E338+8 = 1E340<br>REAL BMP VRAM&nbsp; : 0x1E358+8 = 1E360<br><span style="white-space: pre;"> </span><br></code><br><br><br>Here are some of the logs generated by my tests ...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; &nbsp;667: 10003.609 myTaskDumpf:204: [JP] VRAM INFO:<br>&nbsp; &nbsp;668: 10003.670 printVramInfo:25: [JP] VRAM_INFO: vram address = 0x1065BE00<br>&nbsp; &nbsp;669: 10003.698 printVramInfo:26: [JP] VRAM_INFO: width = 720<br>&nbsp; &nbsp;670: 10003.722 printVramInfo:27: [JP] VRAM_INFO: pitch = 720<br>&nbsp; &nbsp;671: 10003.746 printVramInfo:28: [JP] VRAM_INFO: height = 240<br>&nbsp; &nbsp;672: 10003.767 printVramInfo:29: [JP] VRAM_INFO: vram_number = 0<br>&nbsp; &nbsp;673: 10003.806 printVramInfo:25: [JP] VRAM_INFO: vram address = 0x106F3C8C<br>&nbsp; &nbsp;674: 10003.830 printVramInfo:26: [JP] VRAM_INFO: width = 720<br>&nbsp; &nbsp;675: 10003.853 printVramInfo:27: [JP] VRAM_INFO: pitch = 720<br>&nbsp; &nbsp;676: 10003.876 printVramInfo:28: [JP] VRAM_INFO: height = 240<br>&nbsp; &nbsp;677: 10003.897 printVramInfo:29: [JP] VRAM_INFO: vram_number = 2<br>&nbsp; &nbsp;678: 10003.921 printBmpVramInfo:45: [JP] BMP_VRAM_INFO: i = 0x00<br>&nbsp; &nbsp;679: 10003.961 printBmpVramInfo:46: [JP] BMP_VRAM_INFO: vram0 address = 0x10631714<br>&nbsp; &nbsp;680: 10003.988 printBmpVramInfo:47: [JP] BMP_VRAM_INFO: off_0x04 address = 0x00000000<br>&nbsp; &nbsp;681: 10004.027 printBmpVramInfo:48: [JP] BMP_VRAM_INFO: vram2 address = 0x48544F00<br><br>&nbsp; &nbsp;687: 11143.643 myTaskDumpf:230: [JP] MEM(0x0001E330) = 0x10631714&nbsp; // vram0 address<br>&nbsp; &nbsp;688: 11143.707 myTaskDumpf:231: [JP] MEM(0x0001E340) = 0x10631714&nbsp; // vram0 address<br>&nbsp; &nbsp;689: 11143.741 myTaskDumpf:232: [JP] MEM(0x0001E360) = 0x00000000<br>&nbsp; &nbsp;690: 11143.773 myTaskDumpf:234: [JP] MEM(0x0000BEA0) = 0x00000000 // DisplayType<br>&nbsp; &nbsp;691: 11143.802 myTaskDumpf:235: [JP] MEM(0x0000BEA4) = 0x00000000 // W x H = 720x240<br>&nbsp; &nbsp;692: 11143.832 myTaskDumpf:236: [JP] MEM(0x0000B854) = 0x00000002<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 24, 2012, 01:42:59 AM</strong>
</dt>
<dd class="postbody">
These stubs are very important for our work so I decided to put them here ... require confirmation ... <br>I have not tested them all. I have used them to make some memory dumps.<br><br>40d v 1.1.1<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFC39AE4, FIO_RemoveFile)<br>NSTUB(0xFFD1682C, FIO_OpenFile)<br>NSTUB(0xFFD168F8, FIO_CreateFile)<br>NSTUB(0xFFD16A80, FIO_ReadFile)<br>NSTUB(0xFFD16BF0, FIO_WriteFile)<br>NSTUB(0xFFD16CA8, FIO_CloseFile)<br>NSTUB(0xFFD16D5C, FIO_GetFileSize)<br>NSTUB(0xFFD17244, FIO_GetDeviceName)<br>NSTUB(0xFFD7A968, FIO_FindNextEx)</code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>September 24, 2012, 08:40:42 AM</strong>
</dt>
<dd class="postbody">
Can you dump around 200K from each VRAM address?<br><br>Use the cacheable addresses if you can't (remove the first 1).
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 24, 2012, 12:01:31 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12592#msg12592">Quote from: a1ex on September 24, 2012, 08:40:42 AM</a></div></div><blockquote class="bbc_standard_quote">Can you dump around 200K from each VRAM address?<br><br>Use the cacheable addresses if you can't (remove the first 1).<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Yes, I will do that ..
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>September 26, 2012, 08:12:32 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12610#msg12610">Quote from: jplxpto on September 24, 2012, 12:01:31 PM</a></div></div><blockquote class="bbc_standard_quote">Yes, I will do that ..<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>A simple test to see if you found the vram is to try and paint on the screen, write something like 64kb of 1s to the buffer and you should see a colored square on the screen.<br><br>great to see your progress!!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 27, 2012, 12:39:35 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12887#msg12887">Quote from: coutts on September 26, 2012, 08:12:32 PM</a></div></div><blockquote class="bbc_standard_quote">A simple test to see if you found the vram is to try and paint on the screen, write something like 64kb of 1s to the buffer and you should see a colored square on the screen.<br><br>great to see your progress!!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Cloutts, thank you for this suggestion ... more I had thought about doing something similar but I am afraid to write to memory before I was sure it matches the VRAM.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 27, 2012, 02:05:52 AM</strong>
</dt>
<dd class="postbody">
Hi guys<br><br>I did some more tests today ... <br>I finally got the memory address of LV_VRAM. <br>I made a small application that writes into log file the addresses of LV_VRAM. <br>I put the camera in LV mode, and every 40ms, I wrote in the log file, the address and size of the LV_VRAM.<br><br>I repeated the process twice, and got the following data:<br><br>Address : <strong>0x1CA700C8</strong> / Average Size : ??????????<br><br>Address : 0x1CEAE304 / Average Size : 0x0003D068<br><br><br>I've also downloaded the JPEG. I had done before but did not know the memory address.<br><br>The JPEG has 1024x680 pixels and has a size of 213446 bytes<br><br><br>Some logs...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"> 45578: 63053.752 [LVCDEV]-&gt;lvcdevResourceGet(0,1)<br>&nbsp;45579: 63054.313 [DPATH] LV_JPG START Y:0x1de43c64 J:0x1ca700c8 Y411:0x10798ea0<br>&nbsp;45580: 63057.331 [LV] lvVDInterrupt<br>&nbsp;45581: 63057.493 [LV] WB 1926 1135 1135 2454(1158)<br>&nbsp;45582: 63059.349 [LV] lvReturnVram<br>&nbsp;45583: 63059.379 &lt; GUI Lock &gt; GUILock_PermitPowerLock (PUB)<br>&nbsp;45584: 63059.666 &lt; GUI Lock &gt; GUILockTask 1<br>&nbsp;45585: 63059.735 [DispCon] TurnOnDisplay (PUB)<br>&nbsp;45586: 63061.319 [DEV] LV_JPG YuvWriteCompleteCBR<br>&nbsp;45587: 63061.365 [DEV] LV_JPG YUVReadCompleteCBR<br>&nbsp;45588: 63061.498 [DEV] LV_JPG JpCoreCompleteCBR( 0x4af66 )<br>&nbsp;45589: 63061.558 [DEV] LV_JPG JpegPopCompleteCBR<br>&nbsp;45590: 63061.701 [DPATH] LV_JPG STOP Y:0x1df97c64 J:0x1cabb02e Y411:0x107a0e20<br>&nbsp;45591: 63062.313 [LVCDEV]-&gt;PD(VF:0x1078d7e8,MS:0x485540)<br>&nbsp;45592: 63081.284 [LV] WriteEDmacWbIntegCompleteCBR<br></code><br><br>&nbsp;45579: 63054.313 [DPATH] LV_JPG START Y:0x1de43c64 <strong>J:0x1ca700c8</strong> Y411:0x10798ea0<br>&nbsp;45590: 63061.701 [DPATH] LV_JPG STOP&nbsp; &nbsp;Y:0x1df97c64 J:0x1cabb02e&nbsp; Y411:0x107a0e20
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 27, 2012, 06:26:54 AM</strong>
</dt>
<dd class="postbody">
<br>I managed to blur the image of the LCD. I now have to know the coordinates valid in order to draw a rectangle.<br><br>I used this STUB, and wrote somewhere in vram0.<br><br>NSTUB(0x1E450, bmp_vram_info) <br><br>In the coming days, I'll want to have a bmp_printf(...) function to write text on the display.<br><br>Once you get it, I want to improve the boot process. <br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 28, 2012, 01:07:44 AM</strong>
</dt>
<dd class="postbody">
Some additional information:<br><br>http://en.wikipedia.org/wiki/Canon_EOS_40D (http://en.wikipedia.org/wiki/Canon_EOS_40D)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>September 28, 2012, 08:49:36 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg12949#msg12949">Quote from: jplxpto on September 27, 2012, 06:26:54 AM</a></div></div><blockquote class="bbc_standard_quote">I managed to blur the image of the LCD. I now have to know the coordinates valid in order to draw a rectangle.<br><br>I used this STUB, and wrote somewhere in vram0.<br><br>NSTUB(0x1E450, bmp_vram_info) <br><br>In the coming days, I'll want to have a bmp_printf(...) function to write text on the display.<br><br>Once you get it, I want to improve the boot process.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>you should start porting ML to the 40d, clone the latest repo and look for CONFIG_5DC, maybe add #define CONFIG_5DC CONFIG_40D and copy the same diretory structure / entry.S of the 5dc. All of the changes for the 5dc in menu.c should be valid for the 40d too.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 28, 2012, 12:16:12 PM</strong>
</dt>
<dd class="postbody">
Thanks Coutts ... I'm working on it :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>September 30, 2012, 02:15:07 AM</strong>
</dt>
<dd class="postbody">
Good news ...<br><br>In recent days, me and Alex, we can give a good progress in 40D port.<br><br>Finally, we have a "Hello World" working ...<br><br>soon I'll post a picture here ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dichterDichter</strong> on <strong>October 01, 2012, 04:22:18 PM</strong>
</dt>
<dd class="postbody">
Awsome. My Camera is still broken and im trying to repair it.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>October 03, 2012, 07:21:48 AM</strong>
</dt>
<dd class="postbody">
Me and many others are silently waiting for Good news
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 03, 2012, 11:45:50 AM</strong>
</dt>
<dd class="postbody">
With a little time and patience, one day will come true ... <br><br>The Coutts and Alex have done an excellent job with 5DC. <br>I think that much of this work can be useful for the 40D.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 04, 2012, 01:08:11 AM</strong>
</dt>
<dd class="postbody">
Some more stubs<br><br>40D v1.1.1<br><br><div class="quoteheader"><div class="topslice_quote">Quote</div></div><blockquote class="bbc_standard_quote"><br>NSTUB(0x1E458, LCD_Palette)<br>NSTUB(0x1E498, RGB_Palette)<br>NSTUB(0x1E388, PB_Palette)<br><br>NSTUB(0xFFCB0B6C, SetRGBPaletteToDisplayDevice)<br>NSTUB(0xFF867AA8, ChangeColorPalette)<br>NSTUB(0xFFCAFA0C, SetParameterToBitmapDisplayDevice)<br><br>NSTUB(0xFFCB7EBC, EnableBitmapVBufferForPlayBackAndWaiting)<br><br>NSTUB(0xFFCB9078, BmpDDev_give_semaphore);<br>NSTUB(0xFFCB9028, BmpDDev_take_semaphore);<br><br>NSTUB(0xFF8156F8, bindGUISwitchCBR)<br><br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Alex... I'm working on it :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 04, 2012, 03:35:29 AM</strong>
</dt>
<dd class="postbody">
<div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"><br>&nbsp; 3878: 23394.264 [MC] M:1,ID:B(29)<br>&nbsp; 3879: 23394.303 [BIND] Switch (11, 5)<br>&nbsp; 3880: 23394.345 [GUI_E] GUI_Control:25 0x0<br>&nbsp; 3881: 23394.537 [JP] (50/3) my_gui_main_task:85: EVT 246[0]: p=19 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3884: 23426.474 [JP] (50/3) my_gui_main_task:85: EVT 247[4]: p=0 *o=0x80030014/0x96/0x0 a=0<br>&nbsp; 3887: 23445.017 [MC] M:1,ID:B(30)<br>&nbsp; 3888: 23445.059 [BIND] Switch (11, 3)<br>&nbsp; 3889: 23445.092 [GUI_E] GUI_Control:23 0x0<br>&nbsp; 3890: 23458.398 [JP] (50/3) my_gui_main_task:85: EVT 248[0]: p=17 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3893: 23489.950 [GUI] DlgPlayMain.c PRESS_MLT_RIGHT_BUTTON<br>&nbsp; 3894: 23490.172 [DispCon] SetTempForBackLight Temp 150<br>&nbsp; 3895: 23490.318 [GUI] DlgPlayMain.c PRESS_MLT_RIGHTUP_BUTTON<br>&nbsp; 3896: 23495.865 [MC] M:1,ID:B(31)<br>&nbsp; 3897: 23495.904 [BIND] Switch (11, 2)<br>&nbsp; 3898: 23495.941 [GUI_E] GUI_Control:22 0x0<br>&nbsp; 3899: 23496.137 [JP] (50/3) my_gui_main_task:85: EVT 249[0]: p=16 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3902: 23527.803 [GUI] DlgPlayMain.c PRESS_MLT_UP_BUTTON<br>&nbsp; 3903: 23546.781 [MC] M:1,ID:B(32)<br>&nbsp; 3904: 23546.821 [BIND] Switch (11, 4)<br>&nbsp; 3905: 23546.853 [GUI_E] GUI_Control:24 0x0<br>&nbsp; 3906: 23547.040 [JP] (50/3) my_gui_main_task:85: EVT 250[0]: p=18 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3909: 23578.686 [GUI] DlgPlayMain.c PRESS_MLT_LEFTUP_BUTTON<br>&nbsp; 3910: 23589.717 [MC] M:1,ID:B(0)<br>&nbsp; 3911: 23589.753 [BIND] Switch (11, 6)<br>&nbsp; 3912: 23589.790 [GUI_E] GUI_Control:26 0x0<br>&nbsp; 3913: 23589.970 [JP] (50/3) my_gui_main_task:85: EVT 251[0]: p=1a *o=0x0/0x0/0x0 a=0<br>&nbsp; 3916: 23621.610 [GUI] DlgPlayMain.c PRESS_MLT_LEFT_BUTTON<br>&nbsp; 3917: 23640.641 [MC] M:1,ID:B(1)<br>&nbsp; 3918: 23640.683 [BIND] Switch (11, 8)<br>&nbsp; 3919: 23640.721 [GUI_E] GUI_Control:28 0x0<br>&nbsp; 3920: 23640.907 [JP] (50/3) my_gui_main_task:85: EVT 252[0]: p=1c *o=0x0/0x0/0x0 a=0<br>&nbsp; 3923: 23672.516 [GUI] DlgPlayMain.c PRESS_MLT_LEFTDOWN_BUTTON<br>&nbsp; 3924: 23691.575 [MC] M:1,ID:B(2)<br>&nbsp; 3925: 23691.617 [BIND] Switch (11, 9)<br>&nbsp; 3926: 23691.655 [GUI_E] GUI_Control:29 0x0<br>&nbsp; 3927: 23691.839 [JP] (50/3) my_gui_main_task:85: EVT 253[0]: p=1d *o=0x0/0x0/0x0 a=0<br>&nbsp; 3930: 23723.499 [GUI] DlgPlayMain.c PRESS_MLT_DOWN_BUTTON<br>&nbsp; 3931: 23793.658 [MC] M:1,ID:B(3)<br>&nbsp; 3932: 23793.698 [BIND] Switch (11, 5)<br>&nbsp; 3933: 23793.737 [GUI_E] GUI_Control:25 0x0<br>&nbsp; 3934: 23793.937 [JP] (50/3) my_gui_main_task:85: EVT 254[0]: p=19 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3937: 23825.534 [GUI] DlgPlayMain.c PRESS_MLT_RIGHT_BUTTON<br>&nbsp; 3938: 23844.343 [MC] M:1,ID:B(4)<br>&nbsp; 3939: 23844.384 [BIND] Switch (11, 3)<br>&nbsp; 3940: 23844.420 [GUI_E] GUI_Control:23 0x0<br>&nbsp; 3941: 23844.610 [JP] (50/3) my_gui_main_task:85: EVT 255[0]: p=17 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3944: 23876.253 [GUI] DlgPlayMain.c PRESS_MLT_RIGHTUP_BUTTON<br>&nbsp; 3945: 23895.276 [MC] M:1,ID:B(5)<br>&nbsp; 3946: 23895.315 [BIND] Switch (11, 0)<br>&nbsp; 3947: 23895.350 [GUI_E] GUI_Control:21 0x0<br>&nbsp; 3948: 23895.543 [JP] (50/3) my_gui_main_task:85: EVT 256[0]: p=15 *o=0x0/0x0/0x0 a=0<br>&nbsp; 3951: 23945.275 [MC] M:1,ID:B(6)<br>&nbsp; 3952: 23945.317 [BIND] Switch (11, 6)<br>&nbsp; 3953: 23945.354 [GUI_E] GUI_Control:26 0x0<br>&nbsp; 3954: 23945.559 [JP] (50/3) my_gui_main_task:85: EVT 257[0]: p=1a *o=0x0/0x0/0x0 EVT 257 a=0<br>&nbsp; 3957: 23977.234 [GUI] DlgPlayMain.c PRESS_MLT_LEFT_BUTTON<br><br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>October 04, 2012, 09:22:14 PM</strong>
</dt>
<dd class="postbody">
Do you have a fork with your 40D work on bitbucket? I'd like to "follow" it
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 04, 2012, 11:53:12 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg13734#msg13734">Quote from: nanomad on October 04, 2012, 09:22:14 PM</a></div></div><blockquote class="bbc_standard_quote">Do you have a fork with your 40D work on bitbucket? I'd like to "follow" it<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Nanomad.&nbsp; I haven't shared my code in this repository. <br>I sent my initial developments to Alex's email.<br>After that, he then began to integrate it into the ML. <br>We've been working together a few hours. <br>I loved working with him on this project, but we had little time.<br><br>Right now, I have a problem displaying the menus on the LCD. <br>I suspect there is a problem of any competition in memory access, calculations wrong, wrong resolutions or access buffers that were allocated dynamically and are already invalid.<br><br>Yes, I am thinking to create a repository on bitbucket<br><br>I also hope to have their precious help ;)<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 05, 2012, 02:05:30 AM</strong>
</dt>
<dd class="postbody">
Hi guys<br><br>My 40D camera now say : <br><br><strong>"Magic Lantern is up and running...3 tasks started."</strong><br><br><br>... but has serious problems on the LCD. I still can not see the menu of ML :(<br>I can only see messages like "Hello World!" and sometimes appears at the top of the image a green rectangle, <br>a little blurred with pixels of other colors. I think is the menu! And sometimes the entire screen flashes.<br>It seems that, we switch the color palette. This is something very strange happens.<br><br>I'll have to ask someone for help ... I still can not fully understand the code of VRAM. <br>We should be using buffers invalid or the wrong dimensions. If I can I do some tests for next week<br><br>Guys? Someone can help me on this? ... Maybe you Alex ... ;)<br>Thank you in advance!<br><br>I'll keep you updated with the latest news ...<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 05, 2012, 02:10:25 AM</strong>
</dt>
<dd class="postbody">
I identified some errors ...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code"> <br>&nbsp; &nbsp;618:&nbsp; 1078.659 [JP] (50/3) read_entire_file:889: File 'A:/ML/DATA/FONTS.DAT' size 32744 by<br>&nbsp; &nbsp;619:&nbsp; 1091.459 [FR] readsize = 0x20000<br>&nbsp; &nbsp;620:&nbsp; 1110.717 [FR] readsize = 0x20000<br>&nbsp; &nbsp;621:&nbsp; 1124.497 [FR] readsize = 0x20000<br>&nbsp; &nbsp;622:&nbsp; 1141.060 [FR] readsize = 0x20000<br>&nbsp; &nbsp;623:&nbsp; 1155.195 [FR] readsize = 0x20000<br>&nbsp; &nbsp;624:&nbsp; 1172.910 [FR] readsize = 0x1f000<br>&nbsp; &nbsp;625:&nbsp; 1187.773 [FR] A:/DCIM/100CANON/IMG_1685.JPG read done (8288KB/S)<br>&nbsp; &nbsp;626:&nbsp; 1187.961 [GUI] SetPlInfoPLAYMode(100_1685)<br>&nbsp; &nbsp;627:&nbsp; 1188.080 [IMP] (PUB) SetDpRotationAngle 2845(0)<br>&nbsp; &nbsp;628:&nbsp; 1188.119 [IMP] (PUB) SetColorConvertTable 2832( 0x0 )<br>&nbsp; &nbsp;629:&nbsp; 1188.137 [Graphics] GuiDrawOneImage (PUB)<br>&nbsp; &nbsp;630:&nbsp; 1188.180 SetImageVramParameter x:0 y:0 w:720 h:240/* Aspect:0*/<br>&nbsp; &nbsp;631:&nbsp; 1188.208 [IMP] (PUB) SyncroClearImagePlayVram 2569<br>&nbsp; &nbsp;632:&nbsp; 1188.226 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;633:&nbsp; 1188.246 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;634:&nbsp; 1189.050 &lt;RECTCOLOR&gt; RequestRectangleColor Before Lock<br>&nbsp; &nbsp;635:&nbsp; 1189.432 [FW] fwSetUnitSize (0x200000)<br>&nbsp; &nbsp;636:&nbsp; 1191.298 [IMP] (PUB) SetVramInformation(w:720 h:240) 1291<br>&nbsp; &nbsp;637:&nbsp; 1191.367 [IMP] (PUB) SetImageAspect 3683<br>&nbsp; &nbsp;638:&nbsp; 1191.451 SetImageVramParameter x:48 y:24 w:340 h:102/* Aspect:976264*/<br>&nbsp; &nbsp;639:&nbsp; 1191.489 [IMP] (PUB) SetImageFileParameter 1348<br>&nbsp; &nbsp;640:&nbsp; 1191.567 [IMP] (PUB) DrawImageToVram(rot:0 cb:0xFF8851E4) 1393<br>&nbsp; &nbsp;641:&nbsp; 1191.593 [IMP] GetJpegInfo 750<br>&nbsp; &nbsp;642:&nbsp; 1192.330 &lt;DJP&gt; RequestDecodeJpeg Before Lock<br>&nbsp; &nbsp;643:&nbsp; 1214.231 [IMP] SetRotationAngle 616<br>&nbsp; &nbsp;644:&nbsp; 1214.264 [IMP] SetVramImageParameter 640<br>&nbsp; &nbsp;645:&nbsp; 1214.294 [IMP] GetVramNumber 580<br>&nbsp; &nbsp;646:&nbsp; 1215.508 &lt;DJP&gt; RequestDecodeJpeg Before Lock<br>&nbsp; &nbsp;647:&nbsp; 1242.982 [JP] (50/3) Calling init_func ../../src/bmp.c (b807f4)<br>&nbsp; &nbsp;648:&nbsp; 1247.041 [JP] (50/3) Calling init_func ../../src/font-dyn.c (b82aa8)<br>&nbsp; &nbsp;649:&nbsp; 1247.089 [JP] (50/3) Calling init_func debug (b87f68)<br>&nbsp; &nbsp;650:&nbsp; 1247.193 [JP] (50/3) Calling init_func ../../src/property.c (b8b020)<br><br><br>&nbsp; &nbsp;651:&nbsp; 1248.238 [PROPAD] ERROR GetPropertyData ID = 0x0205000E<br>&nbsp; &nbsp;652:&nbsp; 1248.373 [PROP] ERROR NOT FOUND PROPERTY ID = 0x0205000E L:874<br>&nbsp; &nbsp;653:&nbsp; 1248.839 [JP] (50/3) _prop_handler_PROP_LAST_JOB_STATE:1781: job state: 0<br>&nbsp; &nbsp;654:&nbsp; 1249.631 [PROPAD] ERROR GetPropertyData ID = 0x0206001E<br>&nbsp; &nbsp;655:&nbsp; 1249.745 [PROP] ERROR NOT FOUND PROPERTY ID = 0x0206001E L:874<br>&nbsp; &nbsp;656:&nbsp; 1249.901 [PROPAD] ERROR GetPropertyData ID = 0x0204000D<br>&nbsp; &nbsp;657:&nbsp; 1249.983 [PROP] ERROR NOT FOUND PROPERTY ID = 0x0204000D L:874<br><br>&nbsp; &nbsp;658:&nbsp; 1250.579 [JP] (50/3) Calling init_func ../../src/tweaks.c (b8bf38)<br>&nbsp; &nbsp;659:&nbsp; 1251.006 [JP] (50/3) Calling init_func lens (b8f1f8)<br>&nbsp; &nbsp;660:&nbsp; 1251.151 [JP] (50/3) Calling init_func ../../src/zebra.c (b93e00)<br>&nbsp; &nbsp;661:&nbsp; 1251.681 [JP] (50/3) Calling init_func shoot (b9f87c)<br>&nbsp; &nbsp;662:&nbsp; 1252.387 [JP] (50/3) Calling init_func ../../src/movtweaks.c (ba7b30)<br>&nbsp; &nbsp;663:&nbsp; 1252.554 [JP] (50/3) Calling init_func help_menu (ba8fbc)<br>&nbsp; &nbsp;664:&nbsp; 1252.724 [JP] (50/3) Calling init_func ../../src/focus.c (ba97c0)<br>&nbsp; &nbsp;665:&nbsp; 1253.079 [JP] (50/3) Calling init_func ../../src/notify_box.c (bab220)<br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; 1381:&nbsp; 1791.326 &lt; GUI Lock &gt; GUILock_TurnOnDisplay (PUB)<br>&nbsp; 1382:&nbsp; 1791.488 &lt; GUI Lock &gt; GUILockTask 1<br>&nbsp; 1383:&nbsp; 1791.527 [DispCon] TurnOnDisplay (PUB)<br>&nbsp; 1384:&nbsp; 1791.555 [DispCon] TFT_POWDET Low Wait<br>&nbsp; 1385:&nbsp; 1792.743 [DispCon] TFT_POWDET Low Wait<br>&nbsp; 1386:&nbsp; 2262.465 [CFS] Mini Info. (0x1000000e)<br>&nbsp; 1387:&nbsp; 2262.552 [JP] (50/3) read_entire_file:910: failed<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 05, 2012, 02:23:00 AM</strong>
</dt>
<dd class="postbody">
The my_gui_main_task seems to be working... ;)<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; 5938: 15903.631 [MC] M:1,ID:E(1)<br>&nbsp; 5939: 15903.676 [BIND] Switch (14, 1)<br>&nbsp; 5940: 15903.714 [GUI_E] GUI_Control:1 0x0<br><br>&nbsp; 5941: 15903.898 [JP] (50/3) my_gui_main_task:85: EVT 372[0]: p=1<br>&nbsp; 5942: 15903.942 [JP] (50/3) my_gui_main_task:90: EVT 372 *o=0x0/0x0/0x0<br>&nbsp; 5943: 15903.973 [JP] (50/3) my_gui_main_task:93: EVT 372 a=0<br>&nbsp; 5944: 15935.627 [GUI] DlgPlayMain.c ROTATE_ELECTRONIC_SUB_DIAL_RIGHT<br><br>&nbsp; 5945: 15935.719 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5946: 15935.804 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5947: 15935.884 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5948: 15935.999 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5949: 15936.053 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5950: 15936.104 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5951: 15936.160 [GUI] ChangeMultiCurrentPositionForMove hOldFile(0x51906950)<br>&nbsp; 5952: 15936.213 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5953: 15936.253 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5954: 15936.297 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5955: 15936.334 [FC] _FC_GetFirstFileHandle<br>&nbsp; 5956: 15936.368 [FC] ctgFileGetFirstFileHandle (1, 0, 0, 0)<br><br>&nbsp; 5957: 15936.958 [JP] (50/3) my_gui_main_task:85: EVT 373[4]: p=0<br>&nbsp; 5958: 15937.035 [JP] (50/3) my_gui_main_task:90: EVT 373 *o=0x2050000/0x7f3c2c/0x6c<br>&nbsp; 5959: 15937.070 [JP] (50/3) my_gui_main_task:93: EVT 373 a=0<br>&nbsp; 5960: 15968.951 [JP] (50/3) my_gui_main_task:85: EVT 374[4]: p=0<br>&nbsp; 5961: 15969.028 [JP] (50/3) my_gui_main_task:90: EVT 374 *o=0x2050000/0x7f3d24/0x6c<br>&nbsp; 5962: 15969.061 [JP] (50/3) my_gui_main_task:93: EVT 374 a=0<br><br>&nbsp; 5963: 16000.466 [GUI] GUI_SetFileIndexInDrive(1)<br>&nbsp; 5964: 16000.993 [JP] (50/3) my_gui_main_task:85: EVT 375[4]: p=0<br>&nbsp; 5965: 16001.076 [JP] (50/3) my_gui_main_task:90: EVT 375 *o=0x2050000/0x7f3e1c/0x6c<br>&nbsp; 5966: 16001.115 [JP] (50/3) my_gui_main_task:93: EVT 375 a=0<br>&nbsp; 5967: 16032.895 [JP] (50/3) my_gui_main_task:85: EVT 376[4]: p=0<br>&nbsp; 5968: 16032.969 [JP] (50/3) my_gui_main_task:90: EVT 376 *o=0x2050000/0x7f3f14/0x6c<br>&nbsp; 5969: 16033.003 [JP] (50/3) my_gui_main_task:93: EVT 376 a=0<br>&nbsp; 5970: 16064.777 [JP] (50/3) my_gui_main_task:85: EVT 377[4]: p=0<br>&nbsp; 5971: 16064.855 [JP] (50/3) my_gui_main_task:90: EVT 377 *o=0x2050000/0x7f400c/0x6c<br>&nbsp; 5972: 16064.890 [JP] (50/3) my_gui_main_task:93: EVT 377 a=0<br>&nbsp; 5973: 16096.291 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br></code><br><br>I think that once the problem of LCD is resolved, we can say that we have the ML running on 40D :)<br><br><br>Be patience, ... we still have much work ahead!<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>October 05, 2012, 09:29:09 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg13766#msg13766">Quote from: jplxpto on October 05, 2012, 02:23:00 AM</a></div></div><blockquote class="bbc_standard_quote">The my_gui_main_task seems to be working... ;)<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; 5938: 15903.631 [MC] M:1,ID:E(1)<br>&nbsp; 5939: 15903.676 [BIND] Switch (14, 1)<br>&nbsp; 5940: 15903.714 [GUI_E] GUI_Control:1 0x0<br><br>&nbsp; 5941: 15903.898 [JP] (50/3) my_gui_main_task:85: EVT 372[0]: p=1<br>&nbsp; 5942: 15903.942 [JP] (50/3) my_gui_main_task:90: EVT 372 *o=0x0/0x0/0x0<br>&nbsp; 5943: 15903.973 [JP] (50/3) my_gui_main_task:93: EVT 372 a=0<br>&nbsp; 5944: 15935.627 [GUI] DlgPlayMain.c ROTATE_ELECTRONIC_SUB_DIAL_RIGHT<br><br>&nbsp; 5945: 15935.719 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5946: 15935.804 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5947: 15935.884 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5948: 15935.999 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5949: 15936.053 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5950: 15936.104 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5951: 15936.160 [GUI] ChangeMultiCurrentPositionForMove hOldFile(0x51906950)<br>&nbsp; 5952: 15936.213 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br>&nbsp; 5953: 15936.253 [FC] _FC_GetDriveObject (1,1)<br>&nbsp; 5954: 15936.297 [GUI] GUI_GetTotalFileInDrive FM_GetDriveObject Num(5)<br>&nbsp; 5955: 15936.334 [FC] _FC_GetFirstFileHandle<br>&nbsp; 5956: 15936.368 [FC] ctgFileGetFirstFileHandle (1, 0, 0, 0)<br><br>&nbsp; 5957: 15936.958 [JP] (50/3) my_gui_main_task:85: EVT 373[4]: p=0<br>&nbsp; 5958: 15937.035 [JP] (50/3) my_gui_main_task:90: EVT 373 *o=0x2050000/0x7f3c2c/0x6c<br>&nbsp; 5959: 15937.070 [JP] (50/3) my_gui_main_task:93: EVT 373 a=0<br>&nbsp; 5960: 15968.951 [JP] (50/3) my_gui_main_task:85: EVT 374[4]: p=0<br>&nbsp; 5961: 15969.028 [JP] (50/3) my_gui_main_task:90: EVT 374 *o=0x2050000/0x7f3d24/0x6c<br>&nbsp; 5962: 15969.061 [JP] (50/3) my_gui_main_task:93: EVT 374 a=0<br><br>&nbsp; 5963: 16000.466 [GUI] GUI_SetFileIndexInDrive(1)<br>&nbsp; 5964: 16000.993 [JP] (50/3) my_gui_main_task:85: EVT 375[4]: p=0<br>&nbsp; 5965: 16001.076 [JP] (50/3) my_gui_main_task:90: EVT 375 *o=0x2050000/0x7f3e1c/0x6c<br>&nbsp; 5966: 16001.115 [JP] (50/3) my_gui_main_task:93: EVT 375 a=0<br>&nbsp; 5967: 16032.895 [JP] (50/3) my_gui_main_task:85: EVT 376[4]: p=0<br>&nbsp; 5968: 16032.969 [JP] (50/3) my_gui_main_task:90: EVT 376 *o=0x2050000/0x7f3f14/0x6c<br>&nbsp; 5969: 16033.003 [JP] (50/3) my_gui_main_task:93: EVT 376 a=0<br>&nbsp; 5970: 16064.777 [JP] (50/3) my_gui_main_task:85: EVT 377[4]: p=0<br>&nbsp; 5971: 16064.855 [JP] (50/3) my_gui_main_task:90: EVT 377 *o=0x2050000/0x7f400c/0x6c<br>&nbsp; 5972: 16064.890 [JP] (50/3) my_gui_main_task:93: EVT 377 a=0<br>&nbsp; 5973: 16096.291 [GUI] GUI_GetTotalFileInDrive hDriveHandle(0x50000000)<br></code><br><br>I think that once the problem of LCD is resolved, we can say that we have the ML running on 40D :)<br><br><br>Be patience, ... we still have much work ahead!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Good job. I am waiting.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Indy</strong> on <strong>October 06, 2012, 04:03:28 PM</strong>
</dt>
<dd class="postbody">
Jplxpto,<br><br>First: impressive progress for your first port!<br>if you could publish your code (bitbucket fork?) we can better help you...<br>for example see missing stubs/consts<br><br>Indy
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 07, 2012, 10:18:49 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg13926#msg13926">Quote from: Indy on October 06, 2012, 04:03:28 PM</a></div></div><blockquote class="bbc_standard_quote">Jplxpto,<br><br>First: impressive progress for your first port!<br>if you could publish your code (bitbucket fork?) we can better help you...<br>for example see missing stubs/consts<br><br>Indy<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Hi Indy<br><br>Will I have a great honor to also have your help.<br>You have given me a fantastic help. I am very grateful to you all.<br><br>My current code is all in hudson repository of ML.<br><br>For more details we can exchange some PM.<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 07, 2012, 11:44:33 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg9207#msg9207">Quote from: a1ex on August 26, 2012, 11:54:20 PM</a></div></div><blockquote class="bbc_standard_quote">Sounds good.<br><br>Point the camera to something recognizable and dump roughly 1MB from the VRAM address to confirm it.<br><br>Another way to find VRAM buffers: look for EDMAC registers. In digic 4, these are c0f04008, c0f04108 ... c0f04f08, then c0f26008, c0f26108 etc. One of those registers should point to the LiveView buffer.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>I found this :<br><br>MEM(0x00007648) = 0xC0F0B008<br><br>http://www.magiclantern.fm/forum/index.php?topic=1452.msg12152#msg12152
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 08, 2012, 02:04:15 AM</strong>
</dt>
<dd class="postbody">
I found three 40D v 1.1.1 fonts:<br><br>I used the script find_fnt.py but I changed it a bit.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">...<br><br>print 'Find bitmap fonts in Canon DSLR firmwares'<br>print 'Arm.Indy. based on work by Pel, Trammel Hudson and A1ex\n'<br><br>off = 0<br>while off &lt; len(m) and off &lt;&gt; -1:<br>&nbsp; off = m.find('FNT\0', off)<br>&nbsp; if off &lt;&gt; -1:<br>&nbsp; &nbsp; val = getShortLE(m, off+4)<br>&nbsp; &nbsp; if val==0xffd8 or val==0xffe2&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;or val==0xffec:<br>&nbsp; &nbsp; &nbsp; parseFont(m, off, base)<br>&nbsp; &nbsp; off = off + 4<br>...<br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">python ../../../../find_fnt.py 40d.111.ROMF1.0xFF800000.bin 0xFF800000</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">Find bitmap fonts in Canon DSLR firmwares<br>Arm.Indy. based on work by Pel, Trammel Hudson and A1ex<br><br>0xff9ed2e4: FNT<br>0xff9ed2e8: (+0x04) 0xffec<br>0xff9ed2ea: (+0x06) font_width = 20<br>0xff9ed2ec: (+0x08) charmap_offset = 0x24<br>0xff9ed2f0: (+0x0c) charmap_size = 0x21f0<br>0xff9ed2f4: (+0x10) bitmap_size = 0x36858<br>0xff9ed2f8: (+0x14) font name = 'HCanonGothic'<br>0xff9ed308: (+0x24) char_codes[]. 2172 chars<br>0xff9ef4f8: (+0x2214) offsets[]. Last offset value = 0x367ea<br>0xff9f16e8: (+0x4404) bitmaps[]<br>&nbsp; 0xffa27ed2: (+0x3abee) last bitmap<br>&nbsp; +0x00: bitmap width = 36<br>&nbsp; +0x02: bitmap height = 36<br>&nbsp; +0x04: char width = 36<br>&nbsp; +0x06: X offset = 0<br>&nbsp; +0x08: Y offset = 0<br>&nbsp; &nbsp; bitmap size = 0xb4<br><br>0xffa27f40: FNT<br>0xffa27f44: (+0x04) 0xffe2<br>0xffa27f46: (+0x06) font_width = 30<br>0xffa27f48: (+0x08) charmap_offset = 0x24<br>0xffa27f4c: (+0x0c) charmap_size = 0x170<br>0xffa27f50: (+0x10) bitmap_size = 0x2eb8<br>0xffa27f54: (+0x14) font name = 'HCanonGothic'<br>0xffa27f64: (+0x24) char_codes[]. 92 chars<br>0xffa280d4: (+0x194) offsets[]. Last offset value = 0x2e36<br>0xffa28244: (+0x304) bitmaps[]<br>&nbsp; 0xffa2b07a: (+0x313a) last bitmap<br>&nbsp; +0x00: bitmap width = 30<br>&nbsp; +0x02: bitmap height = 30<br>&nbsp; +0x04: char width = 30<br>&nbsp; +0x06: X offset = 0<br>&nbsp; +0x08: Y offset = 0<br>&nbsp; &nbsp; bitmap size = 0x78<br><br>0xffa2b0fc: FNT<br>0xffa2b100: (+0x04) 0xffe2<br>0xffa2b102: (+0x06) font_width = 36<br>0xffa2b104: (+0x08) charmap_offset = 0x24<br>0xffa2b108: (+0x0c) charmap_size = 0x170<br>0xffa2b10c: (+0x10) bitmap_size = 0x4448<br>0xffa2b110: (+0x14) font name = 'HCanonGothic'<br>0xffa2b120: (+0x24) char_codes[]. 92 chars<br>0xffa2b290: (+0x194) offsets[]. Last offset value = 0x438a<br>0xffa2b400: (+0x304) bitmaps[]<br>&nbsp; 0xffa2f78a: (+0x468e) last bitmap<br>&nbsp; +0x00: bitmap width = 36<br>&nbsp; +0x02: bitmap height = 36<br>&nbsp; +0x04: char width = 36<br>&nbsp; +0x06: X offset = 0<br>&nbsp; +0x08: Y offset = 0<br>&nbsp; &nbsp; bitmap size = 0xb4<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>October 08, 2012, 12:06:17 PM</strong>
</dt>
<dd class="postbody">
Sounds good.<br><br>On 5Dc, ML changes the palette, so it's probably normal. Can you post some screenshots?<br><br>You can map the button codes, and once this is done, menu should be usable.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Indy</strong> on <strong>October 09, 2012, 08:23:27 PM</strong>
</dt>
<dd class="postbody">
At least someone else is using this script ;-) maybe I should put them on bitbucket...<br><br>@jplxpto<br>your files on bitbucket are one week old and comments are "not tested"<br>- what is working/not working ?<br>- what are missing / working stubs and consts values ?<br><br>Indy
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 09, 2012, 11:06:57 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg14185#msg14185">Quote from: Indy on October 09, 2012, 08:23:27 PM</a></div></div><blockquote class="bbc_standard_quote">At least someone else is using this script ;-) maybe I should put them on bitbucket...<br><br>@jplxpto<br>your files on bitbucket are one week old and comments are "not tested"<br>- what is working/not working ?<br>- what are missing / working stubs and consts values ?<br><br>Indy<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br><br>Indy, you're right files have one week ... in the last days I had little time to work on it. <br>I was just looking for some stubs and clarify my doubts with other forum members.<br><br>Yes I used your script and it was useful to confirm the addresses of fonts.<br><br>I have enabled the bootflags and dump the ROM dump.<br><br>Last week, me and Alex located the HD &amp; BMP VRAM, but I still do not know the address of the LV VRAM.<br>I already have some ML threads running but, still could not see any menu. Is there any problem in presenting the image on the LCD.<br>I should have solved this, but my lack of time and knowledge has not allowed me to resolve this issue.<br>There is also a problem in the image display on the LCD. <br>The can.on menus are constantly changing color. The problem must be related to the color palette.<br>I already found the addresses of color palettes and some stubs used by Alex in 5DC. I did not upload but did post here.<br><br><br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 10, 2012, 02:58:07 AM</strong>
</dt>
<dd class="postbody">
Some more stubs<br><br>40D v1.1.1<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFD4F338, TryPostEvent)<br>NSTUB(0xFFD4F398, TryPostEvent_end)<br><br>NSTUB(0xFFD56470, TryPostStageEvent)<br>NSTUB(0xFFD564FC, TryPostStageEvent_end) // PendStageEvent<br><br>NSTUB(0xFFD6A1C8, get_current_task) // 0x22E00<br>NSTUB(0xFFD69F8C, get_task_info)<br>NSTUB(0xFFD6B8B0, get_active_task_list)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 10, 2012, 03:45:29 AM</strong>
</dt>
<dd class="postbody">
I commented out the calls to the set_ml_palette and set_ml_palette_if_dirty functions and, <br>now the colors are presented as they were before.<br><br>I have not created my repository to share my changes with you, but I hope to do that later this week.<br><br>After upgrading my project with the latest version of ML available, <br>I checked that the code does not compile. <br>&nbsp;Some more stubs are needed to 40D. I however able find what was missing.<br><br>I'm now using changeset a53eef8d1c7d.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFD6A1C8, get_current_task) // 0x22E00<br>NSTUB(0xFFD69F8C, get_task_info)<br>NSTUB(0xFFD6B8B0, get_active_task_list)<br></code><br><br>My next step is to draw a rectangle on the screen to see if I understand what is happening with the VRAM. Later, I'll validate events. The ML is already processing some events but I have to review all the constants.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>October 10, 2012, 07:59:28 AM</strong>
</dt>
<dd class="postbody">
For drawing, use bmp_fill and bmp_draw_rect (they both have the same syntax, so rectangles drawn with those two functions should overlap).
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Indy</strong> on <strong>October 10, 2012, 04:06:30 PM</strong>
</dt>
<dd class="postbody">
jplxpto,<br><br>As long as you're a way to progress, it sounds good. That's not easy after all...<br>How about audio threshold (there is a script for that :-) and stubs ?<br>maybe I could help here...<br><br>Indy
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 10, 2012, 11:05:03 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg14260#msg14260">Quote from: a1ex on October 10, 2012, 07:59:28 AM</a></div></div><blockquote class="bbc_standard_quote">For drawing, use bmp_fill and bmp_draw_rect (they both have the same syntax, so rectangles drawn with those two functions should overlap).<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thanks, I'll test it soon ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 11, 2012, 12:06:24 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg14322#msg14322">Quote from: Indy on October 10, 2012, 04:06:30 PM</a></div></div><blockquote class="bbc_standard_quote">jplxpto,<br><br>As long as you're a way to progress, it sounds good. That's not easy after all...<br>How about audio threshold (there is a script for that :-) and stubs ?<br>maybe I could help here...<br><br>Indy<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>"How about audio threshold (there is a script for that :-) " ... <br><br>I'm sorry but I did not understand what you mean. <br>Why tell me in audio?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Indy</strong> on <strong>October 11, 2012, 01:09:39 PM</strong>
</dt>
<dd class="postbody">
Dear Jplxpto,<br><br>sorry I was not clear.<br>do you have all audio stubs ? and the address of audio threshold ?<br><br>Indy
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 11, 2012, 01:14:39 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg14364#msg14364">Quote from: jplxpto on October 11, 2012, 12:06:24 AM</a></div></div><blockquote class="bbc_standard_quote">"How about audio threshold (there is a script for that :-) " ... <br><br>I'm sorry but I did not understand what you mean. <br>Why tell me in audio?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Sorry, I also do not explained well<br>I think the 40D has no audio.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>October 11, 2012, 01:22:31 PM</strong>
</dt>
<dd class="postbody">
Well.. the 40D doesn't record video normally, but will do so with Magic Lantern. We already have the ingredients :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 12, 2012, 05:37:52 AM</strong>
</dt>
<dd class="postbody">
Today I had a big scare. I was trying to get all the constants of the buttons and my camera blocked. Moments later I realized that it was not possible to navigate the menus of the canon. Only the icons appeared, but the items were not presented. After a few tries, remove card, remove battery, put battery, remove the lens, place the lens, changes ... so, disconnect, connect, etc, etc ... I was scared but I can resurrect my camera. After a few attempts, I managed to solve the problem because I was able to open the 'My Menu' ... (Mode C1 + Menu&nbsp; + SET) ... this sequence showed me the items of 'My Menu' and I registered the function that cleans the camera settigns, and I enabled this custom menu. After I accept the changes, the camera is working again normally. It seemed a miracle!!!! Huufff<br><br>I have not given up yet, I'll start having more careful ... I'll analyze the firmware to obtain the constants of a safer way. I think the code that writes the LCD acceded to an invalid memory area. I still have problems with the VRAM. Solving this problem is now a top priority.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>October 12, 2012, 07:18:01 AM</strong>
</dt>
<dd class="postbody">
There are a few other features that write to RAM (e.g. magic zoom writing on LV buffer, fast zoom in play mode altering the current zoom value, exposure override, SET+MainDial changing the image buffers). Look through consts.h to see how each thing is used - and if you are not sure about that constant, and it's used for writing, don't enable that feature.<br><br>For menu, you should start only the two menu-related tasks and some button/event handlers.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 12, 2012, 11:47:26 AM</strong>
</dt>
<dd class="postbody">
Hello Alex,<br><br>I think almost everything is disabled. How can I check the tasks/features are being launched?<br><br>I checked that some of the listed buttons are wrong. <br>I was trying to solve this problem. I just enabled the hijack of the events and removed the comment from end_gui_...<br>How can I force automatic presentation of the menu at system startup.<br><br>I've done some tests with bmp_fill, bmp_draw_rec, draw_palette.<br>Soon I will send you a picture with the palette drawn on the LCD.<br><br>Thank you
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>October 12, 2012, 11:53:18 AM</strong>
</dt>
<dd class="postbody">
The source from ML repo only starts 3 tasks (debug, menu, menu_redraw) =&gt; it's OK. There are a few features that run from button handlers too (e.g. histogram in playback mode, which you showed me).<br><br>To start the menu... give_semaphore(gui_sem).<br><br>Edit: if you use the 5DC method for task hijacking (which you probably should, I don't know a better one), leave the gui_init commented (Canon code already did it).
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 12, 2012, 12:22:50 PM</strong>
</dt>
<dd class="postbody">
Alex, thanks for your clarification.&nbsp; I'll see it better. <br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 13, 2012, 04:27:29 PM</strong>
</dt>
<dd class="postbody">
<br>Finally I had a little time to create my repository ...<br><br>https://bitbucket.org/jplxpto/magic-lantern
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 13, 2012, 10:13:28 PM</strong>
</dt>
<dd class="postbody">
Some more constants (gui.h)<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">#define BGMT_WHEEL_UP<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>&nbsp; 0x00<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>&nbsp; <br>#define BGMT_WHEEL_DOWN<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>0x01<br>#define BGMT_WHEEL_LEFT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x02<br>#define BGMT_WHEEL_RIGHT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x03<br>#define BGMT_PRESS_SET&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x04<br><br>#define BGMT_MENU&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x05<br>#define BGMT_INFO&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x06<br>#define BGMT_JUMP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x07<br>#define BGMT_PLAY&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x08<br>#define BGMT_TRASH&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x09<br><br>#define BGMT_PICSTYLE&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x13<br><br>#define BGMT_PRESS_ZOOMIN_MAYBE&nbsp; &nbsp; &nbsp; &nbsp;0x0a<br>#define BGMT_UNPRESS_ZOOMIN_MAYBE&nbsp; &nbsp; &nbsp;0x0b<br><br>#define BGMT_PRESS_ZOOMOUT_MAYBE&nbsp; &nbsp; &nbsp; 0x0c<br>#define BGMT_UNPRESS_ZOOMOUT_MAYBE&nbsp; &nbsp; 0x0d<br><br>#define BGMT_PRESS_DIRECT_PRINT&nbsp; &nbsp; &nbsp; &nbsp;0x0e<br>//#define BGMT_UNPRESS_DIRECT_PRINT_&nbsp; &nbsp; &nbsp;0x0f WRONG MAYBE<br><br>//~ happens anytime joy stick is unpressed from any position<br>#define BGMT_UNPRESS_UDLR&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x15<br>#define BGMT_PRESS_UP&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x16<br>#define BGMT_PRESS_UP_RIGHT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x17<br>#define BGMT_PRESS_UP_LEFT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x18<br>#define BGMT_PRESS_RIGHT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x19<br>#define BGMT_PRESS_LEFT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x1a<br>#define BGMT_PRESS_DOWN_RIGHT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x1b<br>#define BGMT_PRESS_DOWN_LEFT&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0x1c<br>#define BGMT_PRESS_DOWN&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x1d<br>#define BGMT_PRESS_CENTER&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;0x1e<br><br>// dummy<br>#define BGMT_PRESS_HALFSHUTTER <span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>&nbsp; 0x0b<br>//#define BGMT_UNPRESS_HALFSHUTTER <span style="white-space: pre;"> </span>&nbsp; -12345<br><br>#define BGMT_UNPRESS_SET<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>&nbsp; -123456789<br><br>#define GMT_GUICMD_OPEN_SLOT_COVER<span style="white-space: pre;"> </span>&nbsp; 0x28<br>#define GMT_GUICMD_START_AS_CHECK<span style="white-space: pre;"> </span>&nbsp; -12345678<br>#define GMT_GUICMD_LOCK_OFF<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>&nbsp; <span style="white-space: pre;"> </span>&nbsp; -12345678<br><br>#define BGMT_Q<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>BGMT_PRESS_DIRECT_PRINT<br>#define BGMT_LV<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>BGMT_JUMP<br><br>#define BTN_ZEBRAS_FOR_PLAYBACK<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>BGMT_JUMP<br><br>#define GMT_OLC_INFO_CHANGED<span style="white-space: pre;"> </span><span style="white-space: pre;"> </span>-12344<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>October 13, 2012, 10:16:18 PM</strong>
</dt>
<dd class="postbody">
Same button codes as the 50D.<br>What about unpress_set though? Does the camera correct the unpress correctly?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 13, 2012, 10:17:35 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg14852#msg14852">Quote from: ilguercio on October 13, 2012, 10:16:18 PM</a></div></div><blockquote class="bbc_standard_quote">Same button codes as the 50D.<br>What about unpress_set though? Does the camera correct the unpress correctly?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Sorry but I still do not know!<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 13, 2012, 10:22:56 PM</strong>
</dt>
<dd class="postbody">
Hello guys,<br><br>I keep working on this project and A1ex has helped me a lot.<br><br>Now I'm trying to open the ML menu.<br><br>Again ... thanks Alex
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 14, 2012, 01:39:21 AM</strong>
</dt>
<dd class="postbody">
Hi Guys,<br><br>I've got to see the menus of ML. But I still have some problems ... DOUBLE_BUFFERING with 1 not working. <br>The menus are constantly flashing. The keys work almost all.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 15, 2012, 01:30:21 AM</strong>
</dt>
<dd class="postbody">
Hi guys,<br><br>After a few hours of work and an excellent help from Alex, <br>I could finally see the menus of ML. This is a modest contribution but I'm happy. <br><br>The port of ML for 40D was not planned and I donated a few hours of my work and <br>dedication to one day also be a user of this wonderful sofware. <br><br>I'm still new to this project and I have a lot to learn but motivated to continue so that one day all <br>40D owners can also take advantage of ML.<br><br>Today, I made ​​my first Pull Requests into hudson repository.<br><br>If you are interested can follow my development at:<br><br>https://bitbucket.org/jplxpto/magic-lantern (https://bitbucket.org/jplxpto/magic-lantern)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>October 15, 2012, 01:53:48 AM</strong>
</dt>
<dd class="postbody">
Thumbs up and thanks for the effort.<br>The family is getting bigger as time passes.<br>:)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 15, 2012, 12:15:15 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15048#msg15048">Quote from: ilguercio on October 15, 2012, 01:53:48 AM</a></div></div><blockquote class="bbc_standard_quote">Thumbs up and thanks for the effort.<br>The family is getting bigger as time passes.<br>:)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 16, 2012, 12:23:00 AM</strong>
</dt>
<dd class="postbody">
<br>Don't click me! ;)<br><br>https://bitbucket.org/jplxpto/magic-lantern/changeset/6c64a92b94bbd81619a6b128c9e2d24d01660bd3 (https://bitbucket.org/jplxpto/magic-lantern/changeset/6c64a92b94bbd81619a6b128c9e2d24d01660bd3)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>October 19, 2012, 12:28:17 AM</strong>
</dt>
<dd class="postbody">
Your ptp_register_handler function is correct
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 01:37:18 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15656#msg15656">Quote from: nanomad on October 19, 2012, 12:28:17 AM</a></div></div><blockquote class="bbc_standard_quote">Your ptp_register_handler function is correct<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>For me this is a good and bad news ... : (<br><br>I can't connect to the camera with --chdk switch and i don´t know why... <br><br>I see the logs of the camera again ... perhaps there is some hint<br><br>Thank you!!!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Faxe</strong> on <strong>October 19, 2012, 01:30:25 PM</strong>
</dt>
<dd class="postbody">
Created account just to state that we are more people that eagerly and happily follow your progression.&nbsp; &nbsp;;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 02:56:19 PM</strong>
</dt>
<dd class="postbody">
<br>I'm happy to know there are more people interested in this project. <br><br>I and other developers have been working on this project almost every day. <br>The Coutts, the Chochin the A1ex, the Nanomad and G3gg0 and Indy have helped me.<br><br>Thanks to all of them ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 03:00:14 PM</strong>
</dt>
<dd class="postbody">
In recent days I and G3gg0 have invested some time trying to change the boot process. <br>The idea is to do something similar to what has already been done for other cameras.<br><br>The G3gg0 have helped me a lot ... it also has many technical skills and is an excellent 'colleague';) <br><br>Thank you G3gg0.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 03:03:59 PM</strong>
</dt>
<dd class="postbody">
I've done some testing in order to use PTP to transfer ML for my camera. <br><br>To perform the tests sometimes need to constantly insert and remove the card ... <br>I've done it dozens or hundreds of times. <br>I want to make this task easier and increase the life of the CF connector of my camera.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Faxe</strong> on <strong>October 19, 2012, 03:15:38 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15735#msg15735">Quote from: jplxpto on October 19, 2012, 03:03:59 PM</a></div></div><blockquote class="bbc_standard_quote">I want to make this task easier and increase the life of the CF connector of my camera.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>It isn't easier, but have you thought about an SD to CF converter? I know they exist, but not sure how they would work with ML. http://forums.dpreview.com/forums/post/29819778 (http://forums.dpreview.com/forums/post/29819778) looks a little suspicious in terms of 40D, but that was in 2008... If it worked it would at least remove the strain on your CF connector.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 07:59:21 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15737#msg15737">Quote from: Faxe on October 19, 2012, 03:15:38 PM</a></div></div><blockquote class="bbc_standard_quote">It isn't easier, but have you thought about an SD to CF converter? I know they exist, but not sure how they would work with ML. http://forums.dpreview.com/forums/post/29819778 (http://forums.dpreview.com/forums/post/29819778) looks a little suspicious in terms of 40D, but that was in 2008... If it worked it would at least remove the strain on your CF connector.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'll see that...<br><br>Thank you<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>g3gg0</strong> on <strong>October 19, 2012, 09:24:28 PM</strong>
</dt>
<dd class="postbody">
n/p, you are welcome ;)<br><br>check your mail, i sent you a new version.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 19, 2012, 10:56:33 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15780#msg15780">Quote from: g3gg0 on October 19, 2012, 09:24:28 PM</a></div></div><blockquote class="bbc_standard_quote">n/p, you are welcome ;)<br><br>check your mail, i sent you a new version.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you G3 ...
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 20, 2012, 09:59:27 PM</strong>
</dt>
<dd class="postbody">
More some stubs for 40d v1.1.1 :<br><br>NSTUB(0xFFD427B0, register_interrupt)<br>NSTUB(0xFFC8DF90, SIO3_ISR)<br>NSTUB(0xFFC8DEC8, MREQ_ISR)<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 21, 2012, 06:01:11 AM</strong>
</dt>
<dd class="postbody">
Hello everybody.<br><br>I come here today to inform you that I finally able change the boot process in 40D. <br>Now I use the cache_hacks.<br><br>I have to thank once again the A1ex and G3gg0.<br>They have many skills and have helped me a lot.<br><br>If you wish you can see my changes in:<br>https://bitbucket.org/jplxpto/magic-lantern/changeset/af731ecd17a42f0714f0f9f4d13383ba073a604f (https://bitbucket.org/jplxpto/magic-lantern/changeset/af731ecd17a42f0714f0f9f4d13383ba073a604f)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>g3gg0</strong> on <strong>October 21, 2012, 10:10:54 AM</strong>
</dt>
<dd class="postbody">
you got it working? nice, good job!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>silverfirebird</strong> on <strong>October 21, 2012, 12:13:00 PM</strong>
</dt>
<dd class="postbody">
I own a 40D, and I look forward to seeing this! I also own a Rebel T3i with Magic Lantern installed, and it works great. I'm eager to see what this port has to offer! ;D
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 21, 2012, 10:14:24 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg15939#msg15939">Quote from: g3gg0 on October 21, 2012, 10:10:54 AM</a></div></div><blockquote class="bbc_standard_quote">you got it working? nice, good job!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Without your valuable help I would never have succeeded.<br><br>Thank you.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Polanin</strong> on <strong>October 21, 2012, 11:39:27 PM</strong>
</dt>
<dd class="postbody">
Hi<br>I'm just another guy who is keeping fingers crossed for this port.<br>I have 40D with firmware 1.0.8. (not updated yet) so if any testing on this firmware is needed you can sign me in.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 22, 2012, 01:44:52 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg16001#msg16001">Quote from: Polanin on October 21, 2012, 11:39:27 PM</a></div></div><blockquote class="bbc_standard_quote">Hi<br>I'm just another guy who is keeping fingers crossed for this port.<br>I have 40D with firmware 1.0.8. (not updated yet) so if any testing on this firmware is needed you can sign me in.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'm working with the latest version available ... 1.1.1. I advise you to update the firmware of your camera. see page of the canon ... is simple and fast.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>October 22, 2012, 10:42:53 AM</strong>
</dt>
<dd class="postbody">
And, unless I'm mistaken, you can always roll-back to an older fw version
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 22, 2012, 12:10:25 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg16028#msg16028">Quote from: nanomad on October 22, 2012, 10:42:53 AM</a></div></div><blockquote class="bbc_standard_quote">And, unless I'm mistaken, you can always roll-back to an older fw version<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I already did rollback to version 1.0.8 just to create a dump :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 23, 2012, 04:18:23 AM</strong>
</dt>
<dd class="postbody">
Some more progress ... now with PTP ;)<br><br>http://www.magiclantern.fm/forum/index.php?topic=1512.msg16147#msg16147
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>dor1847</strong> on <strong>October 26, 2012, 09:44:53 PM</strong>
</dt>
<dd class="postbody">
hi, 40D owner here :)<br><br>i've been searching some information about a version of ML for the 40D for months and today i stumbled upon this thread..<br><br>i signed in just to say that you guys are doing an amazing job!<br>unfortunately, im not very familiar with all this programming stuff so the only thing i can do is waiting for you to finish working on it :D<br>if there is anything i can do to help you guys with the project that does not involve taking a risk of bricking my cam (its my only one) ill be glad to do it!<br><br>i hope to hear some good news soon!<br><br>Good Luck :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>October 27, 2012, 03:48:19 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg16669#msg16669">Quote from: dor1847 on October 26, 2012, 09:44:53 PM</a></div></div><blockquote class="bbc_standard_quote">hi, 40D owner here :)<br><br>i've been searching some information about a version of ML for the 40D for months and today i stumbled upon this thread..<br><br>i signed in just to say that you guys are doing an amazing job!<br>unfortunately, im not very familiar with all this programming stuff so the only thing i can do is waiting for you to finish working on it :D<br>if there is anything i can do to help you guys with the project that does not involve taking a risk of bricking my cam (its my only one) ill be glad to do it!<br><br>i hope to hear some good news soon!<br><br>Good Luck :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>A donation will be a good gesture of support.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 27, 2012, 08:18:53 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg16669#msg16669">Quote from: dor1847 on October 26, 2012, 09:44:53 PM</a></div></div><blockquote class="bbc_standard_quote">hi, 40D owner here :)<br><br>i've been searching some information about a version of ML for the 40D for months and today i stumbled upon this thread..<br><br>i signed in just to say that you guys are doing an amazing job!<br>unfortunately, im not very familiar with all this programming stuff so the only thing i can do is waiting for you to finish working on it :D<br>if there is anything i can do to help you guys with the project that does not involve taking a risk of bricking my cam (its my only one) ill be glad to do it!<br><br>i hope to hear some good news soon!<br><br>Good Luck :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Thanks for your eulogy.<br><br>My friend, everything in life has its risks. Currently, I just got this camera. If you ever want to try ML in your camera will have to take the risk. They may be very low, but there will always be a risk associated with it.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>October 27, 2012, 08:22:30 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg16723#msg16723">Quote from: samacochan on October 27, 2012, 03:48:19 PM</a></div></div><blockquote class="bbc_standard_quote">A donation will be a good gesture of support.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'm perfectly in accordance with your comment.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 02, 2012, 03:55:43 AM</strong>
</dt>
<dd class="postbody">
Hi,<br><br>My work on this project continues. I've made some progress.<br><br>I have been trying to use the PTP and GDB in 40D.<br><br>1) With the help of g3gg0 and their fantastic cache hacks I managed to change the boot of the 40D. This may solve some legal problems.<br><br>2) I've able register the operations of ML &amp; CHDK but this subject is not yet closed. I still have some unresolved issues.<br><br>I've done some tests but still can not debug with GDB. I'm trying the GDB Stubs created by g3gg0. This task is not a priority but soon I hope to get back to doing some tests and be successful.<br><br>3) In the last days, I spent some time with the overlays.<br>I'm trying to use the code developed for 5DC.<br>With Alex's help I managed to display some overlays in play mode.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>LensPainter</strong> on <strong>November 02, 2012, 03:45:06 PM</strong>
</dt>
<dd class="postbody">
Hi all,<br><br>have you considered to integrate the additional menus of the WFT-E3 and the GPS Menu? Maybe this is disturbing a little bit the ability to read out all the parameters and set the values. The screen flashing because of nulls/values missing?? <br>I think it's the most complicated part of the menu-structure! Lots of menus where you can really get lost...<br><br>I could shoot some pics with my iPhone and mail them, if you are interested.<br><br>Kind regards<br><br>Uwe<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 03, 2012, 03:51:29 PM</strong>
</dt>
<dd class="postbody">
<br>@LensPainter<br><br>Hi,<br><br>I just had a chance to answer it now.<br>I appreciate your suggestion, but I do not know if this is possible.<br><br>I do not own any of these devices, so I never saw these menus. <br>I know they exist because I've seen some strings in the firmware.<br>I would love to see these photos. I'm waiting ... Thank you.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>LensPainter</strong> on <strong>November 05, 2012, 12:11:42 PM</strong>
</dt>
<dd class="postbody">
@jplxpto<br>Hi,<br><br>I think I need your email-address - there are 98 pictures so far...<br><br>Kind regards<br><br>Uwe
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 06, 2012, 12:20:50 AM</strong>
</dt>
<dd class="postbody">
<br>Thank you!<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>LensPainter</strong> on <strong>November 06, 2012, 12:36:44 AM</strong>
</dt>
<dd class="postbody">
Hi Pedro -&nbsp; and your welcome - de nada (is that right?)<br><br>Hope it helps!<br><br>Kind regards<br><br>Uwe
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 11, 2012, 06:34:02 PM</strong>
</dt>
<dd class="postbody">
Some screenshots:<br><br>(http://i.imgur.com/fSV5U.jpg)<br><br>(http://i.imgur.com/cX2od.jpg)<br><br>(http://i.imgur.com/0T3EJ.jpg)<br><br>(http://i.imgur.com/Nq8le.jpg)<br><br>(http://i.imgur.com/M0NeM.jpg)<br><br>(http://i.imgur.com/2AIC3.jpg)<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 03:12:41 AM</strong>
</dt>
<dd class="postbody">
I think, finally found a buffer of LVRAM. <br>I had seen the address of a memory dumps I made with the help of ptpcam. <br>With the help of Alex and his img.py file. I can guess the width and height of the image as well as the pitch. <br>I intercepted the PRINT key event and did two dumps of RAM starting at address 0x10000000 and a size of 256M.<br><br>I followed the instructions described on the following page<br><br>http://magiclantern.wikia.com/wiki/VRAM/550D<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ipython<br><br>run -i img.py<br><br>a = readsampled("./VRAM_01.DAT")<br><br>b = readsampled("./VRAM_02.DAT")<br><br>d = array(a) - array(b)<br><br>d[d != 0] = 1<br><br>plot(d); show()<br></code><br>After reviewing the chart and repeat the test a few times, I identified the pitch.<br><br>guessed pitch = 2916<br>width = pitch / 2 = 1458<br>height = 1458 / (3/2) = 972<br><br>With the help of graphic and addresses that I found when I did a dump to address 0x1e000. <br>I suspected that the address 0x1dbc0064 is an address VRAM.<br><br>I subtract the address of the beginning of my dump and got the following value:<br><br>0x1dbc0064 - 0x10000000 = 0xdbc0064 = 230424676<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">x = 230424676<br><br>gw = 1458<br>gh = 972<br>gp = 2916<br><br>gx = x + gp * (0)<br><br>gs = gp * gh<br><br>s = readseg("./VRAM_02.DAT", gx, gs)<br><br>imgseq(s, gp)<br><br>hex(gx)<br></code><br>In the end I visualized the images generated and to my surprise <br>I finally had my picture in perfect condition (black and white). <br>The best picture was the 000-odd.png<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x1e020 + 0x18) = MEM(0x1E038) = 0x1dbc0064<br>MEM(0x1e0a0 + 0x14) = MEM(0x1E0B4) = 0x1dbc0064<br><br>&lt;conn&gt; w 0x1e000 512<br>0001e000 00000000 0013a2dc 0013a2b8 00000000 10687248 000002d0 000002d0 000000f0 <br>0001e020 00000000 1071f0d4 000002d0 000002d0 000000f0 00000002 1dbc0064 00000798 <br>0001e040 00000798 00000510 00000798 00000510 00000000 00000000 00000000 00000000 <br>0001e060 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 <br>0001e080 00000000 00000000 00484e5c 001ee400 00000001 00000f30 00000a20 00001d40 <br>0001e0a0 00001380 00000000 00000001 00000000 00000000 1dbc0064 1e26f264 1071f0d4 <br>0001e0c0 00000000 00484e5c 001ee400 00000000 00000000 00000f30 00000a20 000009c0 <br>0001e0e0 00000750 00000000 00000000 00000000 00000000 000002d0 000001e0 000002d0 <br>0001e100 00000000 00000018 000002d0 000000d8 0001dc00 00000000 00000000 00000000 <br>0001e120 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 <br>0001e140 0080478c 00000000 0001db90 00000000 ff8851e4 00012d6c 00000000 00000000 <br>0001e160 ffca415c 00000000 00000000 00000000 00000000 00000000 00000018 000002d0 <br>0001e180 000000d8 00000000 00000000 1071f0d4 000002d0 000000f0 00000000 00000018 <br>0001e1a0 000002d0 000000d8 00000000 00000000 00000000 00000000 00000000 00000000 <br>0001e1c0 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 <br>0001e1e0 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000 <br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 03:19:28 AM</strong>
</dt>
<dd class="postbody">
(http://i.imgur.com/csh1y.png)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nexiabass</strong> on <strong>November 12, 2012, 07:16:31 AM</strong>
</dt>
<dd class="postbody">
Wow, really great to see this progress!<br>Is it possible to extend highiso to 12.800?<br>What about AF-microadjust?<br><br>If this could be added, we could name this cam 45D ^^
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>November 12, 2012, 09:44:36 AM</strong>
</dt>
<dd class="postbody">
LV buffer is the one used for LiveView display, it's extremely unlikely to have higher resolution than 720x480.<br><br>If you alter the data in the LV buffer, the changes should be visible on the display (that's how magic zoom works).<br><br>What you found seems to be a buffer used to decode the images in playback (before downsampling it for display), and probably the zoom operations are based on that buffer. It's not used in LiveView (otherwise 40D would be the first Canon dslr that can record 2K). 5Dc has one too.<br><br>Check repo.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Indy</strong> on <strong>November 12, 2012, 12:04:25 PM</strong>
</dt>
<dd class="postbody">
Hi,<br><br>good progress Jplxpto !<br><br>maybe by enable debug on these functions we can find LVRAM addresses (offsets in firmware in the 1st column) :<br><tt class="bbc_tt">&nbsp; 4a0290 [BmpDDev] CreatePhysicalVram (PUB)<br>&nbsp;4a03b4 [BmpDDev] DeletePhysicalVram (PUB)</tt><br><br>in 40d 1.1.1 it seems there are function to monitor the MPU=TX19A<br><tt class="bbc_tt">&nbsp; 32fa8 MonOpen<br>&nbsp; 32fb0 MonClose<br>&nbsp; 32fbc MonRead<br>&nbsp; 32fc4 MonReadAndGetData<br>&nbsp; 32fd8 MonWrite<br>&nbsp; 32fe4 MonCall<br>&nbsp; 32fec FA_TestMonRead<br>&nbsp; 32ffc FA_TestMonCall<br>&nbsp; 3300c FA_TestMonReadAndWrite<br>&nbsp; 33130 m_hSemaphoreDataComp<br>&nbsp; 33148 ../MpuMonitor.c</tt><br><br>Indy<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 10:32:42 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18445#msg18445">Quote from: nexiabass on November 12, 2012, 07:16:31 AM</a></div></div><blockquote class="bbc_standard_quote">Wow, really great to see this progress!<br>Is it possible to extend highiso to 12.800?<br>What about AF-microadjust?<br><br>If this could be added, we could name this cam 45D ^^<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Welcome to our forum.<br><br>Thank you for your nice words.<br><br>Remember, we can add great features in ML but still can not transform an old black &amp; white TV to a color TV with a feature like HD and 3D.<br><br>For now, I just think support the features that already exist in other cameras, If I ever get that it will be a big win for me :)<br><br>When I reach that goal, I hope to have your help to test the result of my work.<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 10:53:49 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18452#msg18452">Quote from: Indy on November 12, 2012, 12:04:25 PM</a></div></div><blockquote class="bbc_standard_quote">Hi,<br><br>good progress Jplxpto !<br><br>maybe by enable debug on these functions we can find LVRAM addresses (offsets in firmware in the 1st column) :<br><tt class="bbc_tt">&nbsp; 4a0290 [BmpDDev] CreatePhysicalVram (PUB)<br>&nbsp;4a03b4 [BmpDDev] DeletePhysicalVram (PUB)</tt><br><br>in 40d 1.1.1 it seems there are function to monitor the MPU=TX19A<br><tt class="bbc_tt">&nbsp; 32fa8 MonOpen<br>&nbsp; 32fb0 MonClose<br>&nbsp; 32fbc MonRead<br>&nbsp; 32fc4 MonReadAndGetData<br>&nbsp; 32fd8 MonWrite<br>&nbsp; 32fe4 MonCall<br>&nbsp; 32fec FA_TestMonRead<br>&nbsp; 32ffc FA_TestMonCall<br>&nbsp; 3300c FA_TestMonReadAndWrite<br>&nbsp; 33130 m_hSemaphoreDataComp<br>&nbsp; 33148 ../MpuMonitor.c</tt><br><br>Indy<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Hi, Indy.<br><br>I hope you're well.<br><br>To be honest I had met some of these stubs 'Mon' but I did not know its purpose. <br>I still do not know what is in them. I no longer have to availability or knowledge to explore these stubs. <br>Maybe you are one of the people with the capacity to accomplish this task.<br><br>I had already looked at the [BmpDDev] CreatePhysicalVram and [BmpDDev] DeletePhysicalVram but<br>I did not know how to intercept the calls to these functions. <br>I think I saw something in your post about the 500D or 550D.<br><br>I'll follow your suggestion ...<br><br>Thank you.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFF8448B4, FA_TestMonCall)<br>NSTUB(0xFF8446EC, FA_TestMonReadAndWrite)<br>NSTUB(0xFF8445AC, FA_TestMonRead)<br>NSTUB(0xFF844528, MonCall)<br>NSTUB(0xFF844284, MonClose)<br>NSTUB(0xFF84425C, MonOpen)<br>NSTUB(0xFF844354, MonReadAndGetData)<br>NSTUB(0xFF8442AC, MonRead)<br>NSTUB(0xFF844480, MonWrite)<br>NSTUB(0xFFB27438, mon)<br>NSTUB(0xFF843024, mon_funcs_table)<br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">grep -i mon 40d.111.ROMF1.0xFF800000.strings<br><br>ffb44014&nbsp; (Called-&gt;MoveFocusLensForPcMon)<br>ffb44038 Err:MoveFocusLensForPcMon, Unexpected PC_MON_MF_MODE = %d<br>ffb44074&nbsp; MoveFocusLensForPcMon LatestStep=%d<br>ffb46c38 Err:HaveLensError, Mounting MonitorTool<br>ffb47a28 Err:CalcMovingStepForPcMon, Unexpected Coeff = %d<br>ffb47a5c Err:CalcMovingStepForPcMon, Result step is over 2bytes<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 11:48:26 PM</strong>
</dt>
<dd class="postbody">
Here is the result of my first analysis to function BmpDDev_CreatePhysicalVram.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFCB02B4, BmpDDev_CreatePhysicalVram);</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">extern int BmpDDev_CreatePhysicalVram(int *pWidth, int *pHeight, int *pPitch, int **pVRamAddress);<br><br>int width;<br>int height;<br>int pitch;<br>int *vRamAddress;<br><br>int result;<br><br>result = BmpDDev_CreatePhysicalVram(&amp;width, &amp;height, &amp;pitch, &amp;vRamAddres);</code><br>result is :<br>&nbsp;&nbsp;&nbsp;0 when : The parameters are all valid and was allocated a block of 0x15184 bytes<br>&nbsp;&nbsp;&nbsp;3 when :(pWidth == NULL || pHeight == NULL || pPitch == NULL || pVRamAddress == NULL)<br>&nbsp;&nbsp;&nbsp;5 when : Could not allocate memory (pVRamAddress != NULL &amp;&amp; *pVRamAddress == NULL)<br><br>width&nbsp; is 0x2D0 (720)<br>height is 0x0F0 (240)<br>pitch&nbsp; is 0x2D0 (720)<br>*pRamAddress is the vram address allocated by DMA a filled with zeros.<br><br>block size = 0x15180+4 = 86404 d = 360 * 240 bytes<br><br>I think, it takes 4 bits per pixel or 2 pixels per byte... <br>then the resolution should be: 720 * 240<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; &nbsp;313:&nbsp; &nbsp;608.094 [IMP] CreateVram 665<br>&nbsp; &nbsp;330:&nbsp; &nbsp;684.874 [Graphics] GuiClearImage<br>&nbsp; &nbsp;331:&nbsp; &nbsp;684.933 [IMP] (PUB) SetVramInformation(w:720 h:240) 1291<br>&nbsp; &nbsp;332:&nbsp; &nbsp;684.997 SetImageVramParameter x:0 y:0 w:720 h:240/* Aspect:0*/<br>&nbsp; &nbsp;333:&nbsp; &nbsp;685.032 [IMP] (PUB) SyncroAllClearImagePlayWorkVramWithoutEngine 2644<br></code><br>I will explore the mechanisms of debug, developed by g3gg0 and try to get the list of function parameters.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 12, 2012, 11:54:35 PM</strong>
</dt>
<dd class="postbody">
I think, there is another memory location (temporary?) in memory address 0x1e26f264.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">0001e0a0 00001380 00000000 00000001 00000000 00000000 1dbc0064 1e26f264 1071f0d4</code><br><br><div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg11677#msg11677">Quote from: jplxpto on September 17, 2012, 01:36:51 AM</a></div></div><blockquote class="bbc_standard_quote">&nbsp; &nbsp;698:&nbsp; 3711.532 [GUI] StartPlayMain<br>&nbsp; &nbsp;699:&nbsp; 3718.551 [Graphics] CreateSharedBuffer !!!<br><strong>&nbsp; &nbsp;700:&nbsp; 3719.198 [IMP] (PUB) SetImageWorkMemory 1:0x1dbc0064, 2:0x1e26f264<br>&nbsp; &nbsp;701:&nbsp; 3719.274 [IMP] (PUB) SetImageWorkMaxPixel W:2496,H:1872,0x6af200</strong><br>&nbsp; &nbsp;702:&nbsp; 3719.292 [Graphics] GuiGraphicsNormalMode (PUB)<br><br><strong> <br>ImageWorkMemory 1: 0x1dbc0064 <br>ImageWorkMemory 2: 0x1e26f264<br></strong><br><br><strong><br>0x1dbc0064 + 0x6af200 = 0x1e26f264<br></strong><br>0x6af200 size (maybe)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>Seems I actually found two memory locations that I had seen in the past. <br>ImageWorkMemory 1 &amp; 2. They are YUV 411. W:2496, H:1872 and size: 0x6af200 (&gt;6,68MB)<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 13, 2012, 12:27:10 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18446#msg18446">Quote from: a1ex on November 12, 2012, 09:44:36 AM</a></div></div><blockquote class="bbc_standard_quote">LV buffer is the one used for LiveView display, it's extremely unlikely to have higher resolution than 720x480.<br><br>If you alter the data in the LV buffer, the changes should be visible on the display (that's how magic zoom works).<br><br>What you found seems to be a buffer used to decode the images in playback (before downsampling it for display), and probably the zoom operations are based on that buffer. It's not used in LiveView (otherwise 40D would be the first Canon dslr that can record 2K). 5Dc has one too.<br><br>Check repo.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>"otherwise 40D would be the first Canon dslr that can record 2K" ... that would be fantastic, a miracle! :)<br>Thank you
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 13, 2012, 12:34:37 AM</strong>
</dt>
<dd class="postbody">
I found these stubs for testing :<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFF83EE50, FA_CaptureTestImage)<br>NSTUB(0xFF8473B4, FA_CreateTestImage)<br>NSTUB(0xFF83F1C4, FA_DefectsTestImag)<br>NSTUB(0xFF847538, FA_DeleteTestImage)<br>NSTUB(0xFF840880, FA_DetectDefTestImage)<br>NSTUB(0xFF83FF80, FA_FA_ProjectionTestImage)<br>NSTUB(0xFF840060, FA_FA_ShadingTestImage)<br>NSTUB(0xFF84037C, FA_ObIntegTestImage)<br>NSTUB(0xFF840C78, FA_ShadingTestImageForLV)<br>NSTUB(0xFF83F084, FA_SubtractTestImage)<br>NSTUB(0xFF8448B4, FA_TestMonCall)<br>NSTUB(0xFF8446EC, FA_TestMonReadAndWrite)<br>NSTUB(0xFF8445AC, FA_TestMonRead)<br>NSTUB(0xFF84144C, FA_VProjectionTestImage)<br>NSTUB(0xFF845380, FA_YuvDevelopTestImage)<br><br>NSTUB(0xFF8841E4, GuiTestOneImage)<br><br>NSTUB(0xFFB64954, LVTest)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 13, 2012, 01:34:23 AM</strong>
</dt>
<dd class="postbody">
<br>I checked that there are several functions that use the memory address registered in memory location <br>MEM(0x1e020 + 0x18) = MEM(0x1E038) = 0x1dbc0064. (SetImageWorkMemory 1)<br><br>For example, in the function IMP_PUB_DrawImageToVram the following happens:<br><br><br>FFCA110C : R0=0x1E038<br>...<br>FFCA1120 call IMPV_PUB_MakeHDVramFromYuv_FFCA7D48<br><br>I think that in this case the address 0x1E038 is the parameter of the function IMPV_PUB_MakeHDVramFromYuv<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFCA0EE8, IMP_PUB_DrawImageToVram)<br>NSTUB(0xFFCA7D48, IMPV_PUB_MakeHDVramFromYuv)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 13, 2012, 02:02:11 AM</strong>
</dt>
<dd class="postbody">
I think that the memory allocated by BmpDDev_CreatePhysicalVram is stored at (*0x5C00)-&gt;off_0x4.<br>You can see that at FF9B9510 (sub_FF9B944C).<br><br>Today, I no longer have time to test ... tests are for another day!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nexiabass</strong> on <strong>November 13, 2012, 06:36:05 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18477#msg18477">Quote from: jplxpto on November 12, 2012, 10:32:42 PM</a></div></div><blockquote class="bbc_standard_quote">When I reach that goal, I hope to have your help to test the result of my work.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>For sure :)<br><br>I can't wait to see this happen to the good old 40D!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 23, 2012, 02:55:50 AM</strong>
</dt>
<dd class="postbody">
Hello people...<br><br>I have good news...<br><br>As I told you before, I don't have much time to dedicate myself to this project but,&nbsp; <br>I have devoted some time to understand code and read some documentation.<br>I have talked to other ML developers and they have helped me a lot. <br>They have been fantastic ... I think we have a team motivated, united and well organized.<br><br>Yesterday I have dedicated some time to test autofocus patterns (AF POINTS)<br>I can now choose the focus points.<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>scaricame</strong> on <strong>November 23, 2012, 10:13:54 AM</strong>
</dt>
<dd class="postbody">
Thanks from an Italian fan for the job that is doing, also I possess a canon 40D is I wait for good news!&nbsp; ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 23, 2012, 12:17:05 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg19095#msg19095">Quote from: scaricame on November 23, 2012, 10:13:54 AM</a></div></div><blockquote class="bbc_standard_quote">Thanks from an Italian fan for the job that is doing, also I possess a canon 40D is I wait for good news!&nbsp; ;)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>You're welcome!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>tanninety</strong> on <strong>November 25, 2012, 12:05:58 AM</strong>
</dt>
<dd class="postbody">
40D owner here. Been eying the T4i for a while. If I could get video out of this 40D (atleast 480p) I'd be holding off getting the T4i for now.<br><br>Thanks for the time that's already been put towards this and the efort that's currently being invested.<br><br>And thanks jplxpto!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 25, 2012, 03:22:51 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg19174#msg19174">Quote from: tanninety on November 25, 2012, 12:05:58 AM</a></div></div><blockquote class="bbc_standard_quote">40D owner here. Been eying the T4i for a while. If I could get video out of this 40D (atleast 480p) I'd be holding off getting the T4i for now.<br><br>Thanks for the time that's already been put towards this and the efort that's currently being invested.<br><br>And thanks jplxpto!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>The work is advancing slowly ... in the last days were made many changes to the code of ML. <br>I'm now trying to recover what has been working. <br>The g3gg0 needed to make changes to the boot process and the camera stopped doing boot. <br>He is helping me solve this problem.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>November 29, 2012, 01:49:12 AM</strong>
</dt>
<dd class="postbody">
I have to find STUB PtpPropSetUILock. <br>The Coutts used to unlock the UI when the PTP is connected. I need to do the same.<br><br>40d 111<br><br>ffb66f7c %s PtpPropSetUILock [%x][%x]<br><br>STUB(0xFFB67014, PtpPropSetUILock__maybe);<br><br>https://bitbucket.org/hudson/magic-lantern/commits/f85b386a2d61c369050edf490fa324da17794e40
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 03, 2012, 02:52:09 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18482#msg18482">Quote from: jplxpto on November 12, 2012, 11:48:26 PM</a></div></div><blockquote class="bbc_standard_quote">Here is the result of my first analysis to function BmpDDev_CreatePhysicalVram.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFCB02B4, BmpDDev_CreatePhysicalVram);</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">extern int BmpDDev_CreatePhysicalVram(int *pWidth, int *pHeight, int *pPitch, int **pVRamAddress);<br><br>int width;<br>int height;<br>int pitch;<br>int *vRamAddress;<br><br>int result;<br><br>result = BmpDDev_CreatePhysicalVram(&amp;width, &amp;height, &amp;pitch, &amp;vRamAddres);</code><br>result is :<br>&nbsp;&nbsp;&nbsp;0 when : The parameters are all valid and was allocated a block of 0x15184 bytes<br>&nbsp;&nbsp;&nbsp;3 when :(pWidth == NULL || pHeight == NULL || pPitch == NULL || pVRamAddress == NULL)<br>&nbsp;&nbsp;&nbsp;5 when : Could not allocate memory (pVRamAddress != NULL &amp;&amp; *pVRamAddress == NULL)<br><br>width&nbsp; is 0x2D0 (720)<br>height is 0x0F0 (240)<br>pitch&nbsp; is 0x2D0 (720)<br>*pRamAddress is the vram address allocated by DMA a filled with zeros.<br><br>block size = 0x15180+4 = 86404 d = 360 * 240 bytes<br><br>I think, it takes 4 bits per pixel or 2 pixels per byte... <br>then the resolution should be: 720 * 240<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">&nbsp; &nbsp;313:&nbsp; &nbsp;608.094 [IMP] CreateVram 665<br>&nbsp; &nbsp;330:&nbsp; &nbsp;684.874 [Graphics] GuiClearImage<br>&nbsp; &nbsp;331:&nbsp; &nbsp;684.933 [IMP] (PUB) SetVramInformation(w:720 h:240) 1291<br>&nbsp; &nbsp;332:&nbsp; &nbsp;684.997 SetImageVramParameter x:0 y:0 w:720 h:240/* Aspect:0*/<br>&nbsp; &nbsp;333:&nbsp; &nbsp;685.032 [IMP] (PUB) SyncroAllClearImagePlayWorkVramWithoutEngine 2644<br></code><br>I will explore the mechanisms of debug, developed by g3gg0 and try to get the list of function parameters.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg18490#msg18490">Quote from: jplxpto on November 13, 2012, 02:02:11 AM</a></div></div><blockquote class="bbc_standard_quote">I think that the memory allocated by BmpDDev_CreatePhysicalVram is stored at (*0x5C00)-&gt;off_0x4.<br>You can see that at FF9B9510 (sub_FF9B944C).<br><br>Today, I no longer have time to test ... tests are for another day!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x5BF8) = 0xff9b943c<br>MEM(ff9b943c) = 'Vram Instance' (0x6D617256 0x736E4920 0x636E6174 0x00000065)<br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">00005be0 aaaaaa7f bbbbbb7f cccccc7f dddddd7f eeeeee7f ffffff7f ff9b91e4 ff9b943c <br>00005c00 0065cae4 000002d0 000000f0 00000001 00000001 00000000 006301dc 0062ffcc <br>00005c20 0065cae4 00671d2c 000002d0 000001e0 00000000 00000000 007c417c 00687104 <br>00005c40 ff9c1918 000ea508 00000007 00000001 00000000 00000000 00000000 00000000 <br>00005c60 ff9c3540 0065bbec 0065bcb0 0065c28c 0065c424 0065c1ec 0065bf0c ff9caf40 <br>00005c80 ff9caf50 ff9caf68 0062e8d8 00000000 ff9ed2bc ffa2f848 ffa913e4 ff9d1368 <br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">0065cae0 00000038 ff9b943c 000002d0 000002d0 000000f0 10671da4 000ea52c 00000000 <br>0065cb00 00000000 00000000 000002d0 000000f0 0065cad8 00671d20 00015210 22f586fa <br>0065cb20 50bf205e 0c2f13f7 407d0aff 12fa6ff5 05f758ff 08f70afa 00df0aed 81f92c25 <br>0065cb40 409fe0ff 00fe3dff 01bc04df 027f0d1f 84fe20fc 017db0e5 08fd08cf 22222222 <br></code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x5BFC) = 0xff9b943c&nbsp; ; pointer to 'Vram Instance'<br><br>MEM(0x5c00) = 0x0065cae4&nbsp; ; VRAM Address (maybe)<br>MEM(0x5c04) = 0x000002d0&nbsp; ; width (720)<br>MEM(0x5c08) = 0x000000f0&nbsp; ; height(240)<br>MEM(0x5c0C) = 0x00000001&nbsp; ; ???<br><br>MEM(0x5c24) = 0x00671d2c&nbsp; ; VRAM Address (maybe)<br>MEM(0x5c28) = 0x000002d0&nbsp; ; width (720)<br>MEM(0x5c2c) = 0x000001e0&nbsp; ; height(480)<br>MEM(0x5c3f) = 0x00000000&nbsp; ; ???<br><br>MEM(0x0065cae4) = 0xff9b943c&nbsp; ; pointer to 'Vram Instance'<br>MEM(0x0065cae8) = 0x000002d0&nbsp; ; width&nbsp; (720)<br>MEM(0x0065caec) = 0x000002d0&nbsp; ; pitch&nbsp; (720)<br>MEM(0x0065caf0) = 0x000000f0&nbsp; ; height (240)<br>MEM(0x0065caf4) = 0x1065cb5c&nbsp; ; ???<br><br>MEM(0x00671d2c) = 0xff9b943c&nbsp; ; pointer to 'Vram Instance'<br>MEM(0x00671d30) = 0x000002d1&nbsp; ; width&nbsp; (721) ???<br>MEM(0x00671d34) = 0x000002d0&nbsp; ; pitch&nbsp; (720)<br>MEM(0x00671d38) = 0x000000f0&nbsp; ; height (240)<br>MEM(0x00671d3C) = 0x10671da4&nbsp; ; ???<br><br>size = 0x15180 bytes ( 720 / 2&nbsp; * 240 )<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 04, 2012, 04:36:24 AM</strong>
</dt>
<dd class="postbody">
In search of lost VRAM of 40D111...<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(ff9b943c) = 'Vram Instance' (0x6D617256 0x736E4920 0x636E6174 0x00000065)</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">hexdump -C DUMP_RAM_0x0_0x100000.bin | grep "3c 94 9b ff"</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">00005bf0&nbsp; 7f ee ee ee 7f ff ff ff&nbsp; e4 91 9b ff 3c 94 9b ff&nbsp; |............&lt;...|<br>000ea4e0&nbsp; 12 00 00 00 02 00 00 00&nbsp; 3c 94 9b ff 01 00 00 00&nbsp; |........&lt;.......|<br>000ea530&nbsp; 3c 94 9b ff 01 00 00 00&nbsp; 38 a5 0e 00 38 a5 0e 00&nbsp; |&lt;.......8...8...|<br>0065cae0&nbsp; 38 00 00 00 3c 94 9b ff&nbsp; d0 02 00 00 d0 02 00 00&nbsp; |8...&lt;...........|<br>00671d20&nbsp; 10 cb 65 00 58 1d 67 00&nbsp; 38 00 00 00 3c 94 9b ff&nbsp; |..e.X.g.8...&lt;...|</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">MEM(0x00005BF0) = 0xFF9B943C<br><br>MEM(0x000EA4E8) = 0xFF9B943C (LV VRAM 1) maybe<br>MEM(0x000EA530) = 0xFF9B943C (LV VRAM 2) maybe<br><br>MEM(0x0065CAE4) = 0xFF9B943C (BMP VRAM 1) maybe<br>MEM(0x00671D2C) = 0xFF9B943C (BMP VRAM 2) maybe<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>TTS</strong> on <strong>December 05, 2012, 12:19:21 AM</strong>
</dt>
<dd class="postbody">
I've got 2 x 40D, therefore following this development with a smile :-)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 05, 2012, 02:25:26 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg19999#msg19999">Quote from: TTS on December 05, 2012, 12:19:21 AM</a></div></div><blockquote class="bbc_standard_quote">I've got 2 x 40D, therefore following this development with a smile :-)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you! <br><br>When there is life there is hope ... do not give up. <br>Sometimes dreams do come true. If not I give you this, others will certainly do it!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>tanninety</strong> on <strong>December 08, 2012, 12:44:14 AM</strong>
</dt>
<dd class="postbody">
I crossed the T4i off my Christmas list. Still holding on to my 40D :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 08, 2012, 12:54:10 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20332#msg20332">Quote from: tanninety on December 08, 2012, 12:44:14 AM</a></div></div><blockquote class="bbc_standard_quote">I crossed the T4i off my Christmas list. Still holding on to my 40D :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Unfortunately, I've been a little tired and busy with other tasks. Soon I hope to dedicate myself more time to this port. The good news I have to give you is that in principle we have more developers to work with me on this port. We have verified that there are still very users interested in having ML this camera so, you'll spend more time. This of course depends on our available time.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>RenatoPhoto</strong> on <strong>December 08, 2012, 01:57:08 AM</strong>
</dt>
<dd class="postbody">
Unfortunately I just sold my 40D!&nbsp; But I root for your success!&nbsp; Nice work.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 08, 2012, 02:15:15 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20346#msg20346">Quote from: RenatoPhoto on December 08, 2012, 01:57:08 AM</a></div></div><blockquote class="bbc_standard_quote">Unfortunately I just sold my 40D!&nbsp; But I root for your success!&nbsp; Nice work.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you and good Christmas
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>moodoki</strong> on <strong>December 08, 2012, 05:10:15 AM</strong>
</dt>
<dd class="postbody">
newbie developer on the block and willing to help, just had my toolchain setup and looking for a place to start :)<br><br>I have a 40D and i'm more than willing to help with the porting effort.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 08, 2012, 06:44:22 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20367#msg20367">Quote from: moodoki on December 08, 2012, 05:10:15 AM</a></div></div><blockquote class="bbc_standard_quote">newbie developer on the block and willing to help, just had my toolchain setup and looking for a place to start :)<br><br>I have a 40D and i'm more than willing to help with the porting effort.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>You are welcome to our team.<br><br>http://www.magiclantern.fm/develop<br><br>"<br>Become developer<br>Our development capacity is limited. A lot of time goes into bugfixing and working towards a stable version.<br><br>If you'd like to help, here are the steps for getting started:<br><br>Step 1. Get the source code<br>hg clone -r unified https://bitbucket.org/hudson/magic-lantern<br><br>Step 2. Setup the compiler<br>http://magiclantern.wikia.com/wiki/Build_instructions/Unified<br><br>Step 3. Start hacking<br>http://magiclantern.wikia.com/wiki/For_Developers<br>&nbsp;<br>If you get stuck, ask here.<br>"<br><br>You can do: make clean; make 40D<br><br>There are some methods to launch ML but have not yet been published. You need to activate the bootflag. <br>I suggest you start with me to spend a few hours reading documentation. And I did that and still did not stop. <br>You can also look at the source code.<br><br>Thou shalt also read:<br><br>http://wiki.magiclantern.fm/install<br><br>http://wiki.magiclantern.fm/userguide<br><br>You should know that you can turn your camera into a brick. We take great care with the development but we are not free from danger.<br><br>We CAN NOT be responsible for something bad to happen to your camera.<br><br>Good Luck<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 08, 2012, 06:50:05 PM</strong>
</dt>
<dd class="postbody">
@moodoki<br><br>Some more links<br><br>http://magiclantern.wikia.com/wiki/Developing_info<br>http://magiclantern.wikia.com/wiki/Special:AllPages<br><br>http://www.magiclantern.fm/forum/index.php?topic=3267.msg20369#msg20369<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 09, 2012, 02:12:22 AM</strong>
</dt>
<dd class="postbody">
<br>I found a stub with an interesting name (BugDetect).<br><br>One of two ... or Canon admits may have bugs in the firmware, or they implemented some functionality to help take pictures of wildlife :)<br><br>40d111<br><br>NSTUB(0xFFD3E2FC, BugDetect)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>moodoki</strong> on <strong>December 09, 2012, 03:41:50 PM</strong>
</dt>
<dd class="postbody">
@jplxpto<br><br>thanks for all the links:)<br><br>got everything setup correctly (hopefully) and managed to build a version and have it run successfully on a borrowed 550D.<br><br>Now to get working on 40D..
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 09, 2012, 04:09:04 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20499#msg20499">Quote from: moodoki on December 09, 2012, 03:41:50 PM</a></div></div><blockquote class="bbc_standard_quote">@jplxpto<br><br>thanks for all the links:)<br><br>got everything setup correctly (hopefully) and managed to build a version and have it run successfully on a borrowed 550D.<br><br>Now to get working on 40D..<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>You have to check if your camera has installed the FIR version 1.1.1<br><br>Good Luck
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>mrcornelia</strong> on <strong>December 10, 2012, 11:34:43 PM</strong>
</dt>
<dd class="postbody">
Nice work jplxpto and associates! I'm so happy to see the amazing job you guys have done so far! I'll be following with great interest!! :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Faxe</strong> on <strong>December 11, 2012, 12:38:05 PM</strong>
</dt>
<dd class="postbody">
Keep it up! <br>As much as I want new features on the 40d I have to admit the largest problem with taking nice shots is the head behind the camera.&nbsp; ::)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 11, 2012, 02:57:18 PM</strong>
</dt>
<dd class="postbody">
Thank you! <br>Our team likes to know that you value our work and support us. Your words are always welcome lovable.<br><br>I'm a little busy but I still work in this port. In recent days I devoted some time to the forum and other matters of our development team. Soon I hope to have time and can get the intervalometer working. I've invested some time in this feature.<br><br>It is with pleasure that I announce you that we have another developer in the team.The 0xAF from 400dplus.<br>He has already started working on the port of 5DC.<br><br>There is much in common between the 40D and 5DC. <br>I will work in partnership with him. He is a good developer and already has much experience in this type of projects.<br><br>I hope to soon have the collaboration of Chucho. <br>He helped me a lot earlier this port. I hope your life, possible to devote a little more to this project.<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>December 11, 2012, 07:26:20 PM</strong>
</dt>
<dd class="postbody">
Sounds good. Now more developers will be jumping in to explore the world of 40D ML and help to make our dream come true one day. I will not be selling my 40D definitely. I may be able to get $300 for the selling of it but keeping the camera and keep coming back to this thread everyday is like waiting for the birth of my baby and it's a lot of joy and fun.<br><br>Thank you guys.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 11, 2012, 10:47:16 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20744#msg20744">Quote from: samacochan on December 11, 2012, 07:26:20 PM</a></div></div><blockquote class="bbc_standard_quote">Sounds good. Now more developers will be jumping in to explore the world of 40D ML and help to make our dream come true one day. I will not be selling my 40D definitely. I may be able to get $300 for the selling of it but keeping the camera and keep coming back to this thread everyday is like waiting for the birth of my baby and it's a lot of joy and fun.<br><br>Thank you guys.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Hi<br><br>Thank you for your kind words.<br><br>I have the same dream and that is why I have registered in this forum.<br><br>I never thought of creating an application to run on my little princess. <br>I almost killed my little baby, but little by little it grows and and gaining some maturity. <br><br>I started this project by insistence. <br>Everyone told me that this camera has VxWorks and this made it almost impossible one day ML support this equipment.<br>I've always been hurt by this statement. <br>I thought ... why my camera need be excluded from this wonderful world that is ML.<br><br>I wanted to learn a bit more and one day be able to have ML on my camera that I decided to start learning about ML. Past few days I've registered in the forum I was admitted as a developer for this fantastic team. I'm very grateful, they all welcomed me in the best way. Until today, always helped me whenever I needed. My free time is not much but I have learned a lot. I hope one day give you this happiness. Do not worry, I'm hoping to achieve ... if not me, another member will do it for me. Keep on dreaming ... maybe one day wake up and have a surprise in our forum :)<br><br>jp
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 12, 2012, 03:27:05 AM</strong>
</dt>
<dd class="postbody">
I was examining some stubs that allow register, search and call functions by name.<br><br>I already knew them almost all but this time I found one that sounded interesting. <br>Some time ago I wanted to, at runtime, get the list of all registered functions. <br>I intend to write code that creates in the memory card, a file (registered_stubs.S) with all stubs registered by name.<br><br>I found the stub GetListOfName which I believe to be part of the tasks necessary to accomplish this goal.<br>When I have an opportunity I will analyze the firmware in more detail the firmware and do some testing.<br><br><br>40D111<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFFD45DE0, GetListOfName)<br><br>NSTUB(0xFFD3E320, call);<br><br>NSTUB(0xFFD45CB8, FindName)<br><br>NSTUB(0xFFD4ECC0, Register_Func_with_Name)<br>NSTUB(0xFFD3E45C, Register_Func_with_Name_sub_1)<br></code>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 12, 2012, 03:50:11 AM</strong>
</dt>
<dd class="postbody">
As I mentioned in a previous post, I'm trying to put the intervalometer working. <br>I've been examining the firmware and found some strings that can help me find the STUB that take photos. <br>I suspect the FA_Release stub is that I need to take pictures. <br>Once I have the opportunity I will try.<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">NSTUB(0xFF84768C, FA_Release)</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">ff811130 FA_Release<br>ff83ebc8 FA_Release<br>ff83ebd4 FA_ClearReleaseModeForLV<br>ff83ebf0 FA_SetReleaseModeForLV<br><br>ff83edec [FA] FA_CaptureTestImage<br><br>ff8478fc Remote<br>ff847a58 this<br>ff847a60 ../Remote.c<br>ff847a6c rmtRelease<br>ff847a78 rmtSaveToPC<br><br>ff84c148 RssRemoteReleaseQue<br>ff84c15c [RSS]FAReleaseExecute:%lx,%lx,%lx<br>ff84c180 [RSS]rssFAReleaseEnd:%lx<br><br>ff84c19c FA_RemoteRelease<br>ff84c1b0 FA_FinishRemoteRelease<br>ffb64a38 PtpDpsRmtReleaseEventFlag</code><br>The strings rmtRelease and rmtSaveToPC should be used to make the registration by name but i still unknown where on the registration is done. Maybe a solution is to list all the functions that are registered by name at runtime. Maybe.....
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>0xAF</strong> on <strong>December 12, 2012, 10:00:28 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20774#msg20774">Quote from: jplxpto on December 12, 2012, 03:27:05 AM</a></div></div><blockquote class="bbc_standard_quote">I was examining some stubs that allow register, search and call functions by name.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>In 400d most of these registered (by name) functions are only for eventproc stuff and the internal console (the shell) stuff.<br>Not all functions are registered there, and I believe that they wont help you.<br>In 400d there is a list with strings for the functions,<br>let's say for example "Function1, Function2, Function3, ..."<br>These strings are pointing to the real functions which are:<br>eventproc_Function1, eventproc_Function2, eventproc_Function3, ...<br><br>So finding this list with pointers, may only help you to name the real functions (if you haven't done it so far).<br>But if you need to call suck function, you can directly call the eventproc_Function1(), instead of call_function("Function1");<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 12, 2012, 11:52:36 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg20802#msg20802">Quote from: 0xAF on December 12, 2012, 10:00:28 AM</a></div></div><blockquote class="bbc_standard_quote">In 400d most of these registered (by name) functions are only for eventproc stuff and the internal console (the shell) stuff.<br>Not all functions are registered there, and I believe that they wont help you.<br>In 400d there is a list with strings for the functions,<br>let's say for example "Function1, Function2, Function3, ..."<br>These strings are pointing to the real functions which are:<br>eventproc_Function1, eventproc_Function2, eventproc_Function3, ...<br><br>So finding this list with pointers, may only help you to name the real functions (if you haven't done it so far).<br>But if you need to call suck function, you can directly call the eventproc_Function1(), instead of call_function("Function1");<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 15, 2012, 04:21:16 AM</strong>
</dt>
<dd class="postbody">
I used a button to call the stub FA_Release. <br>I could take pictures inside and outside the LV mode but it always opens and closes the shutter and this should not be proper operation for the intervalometer.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>0xAF</strong> on <strong>December 15, 2012, 02:52:26 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg21085#msg21085">Quote from: jplxpto on December 15, 2012, 04:21:16 AM</a></div></div><blockquote class="bbc_standard_quote">I used a button to call the stub FA_Release. <br>I could take pictures inside and outside the LV mode but it always opens and closes the shutter and this should not be proper operation for the intervalometer.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'm not sure how it works on LV cameras, but in 400d it is always moving the mirror, even when MLU (Mirror Lock Up) is set. This is expected behavior.<br>Perhaps what you want to do is not calling the "Release". Which is basically the shutter button press. Perhaps you wanted to take snapshot of the LV screen, but then you wont have the resolution you need ?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 15, 2012, 04:28:26 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg21099#msg21099">Quote from: 0xAF on December 15, 2012, 02:52:26 PM</a></div></div><blockquote class="bbc_standard_quote">I'm not sure how it works on LV cameras, but in 400d it is always moving the mirror, even when MLU (Mirror Lock Up) is set. This is expected behavior.<br>Perhaps what you want to do is not calling the "Release". Which is basically the shutter button press. Perhaps you wanted to take snapshot of the LV screen, but then you wont have the resolution you need ?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>You are right. After writing this post I read a bit more and this seems to be the expected behavior.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 16, 2012, 01:32:09 AM</strong>
</dt>
<dd class="postbody">
I have news.<br><br>After a few days away from development ... I came back to dedicate a few hours to the 40D port.<br><br>I managed to carry one more feature. The intervalometer is already working on my 40D.<br><br>I still can not decide which will be the new feature, maybe start by getting a list of all properties (or more important).<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Crowler</strong> on <strong>December 16, 2012, 04:33:06 PM</strong>
</dt>
<dd class="postbody">
Hello jplxpto ! Focus assist will be work in ML for 40D ? I need it very much !<br>Thank You !
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 16, 2012, 07:42:03 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg21163#msg21163">Quote from: Crowler on December 16, 2012, 04:33:06 PM</a></div></div><blockquote class="bbc_standard_quote">Hello jplxpto ! Focus assist will be work in ML for 40D ? I need it very much !<br>Thank You !<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I hope so, but first I'll have to solve some problems with overlays.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 17, 2012, 03:09:54 AM</strong>
</dt>
<dd class="postbody">
I'm starting to identify some necessary properties for future functionality.<br><br>I've been testing two additional features that seem to be working well:<br><br>Expo/Aperture<br>Expo/Shutter<br><br>I will not be already available features because they change the values ​​of properties and can turn the camera on a brick :)<br>I first got to have more trust in changes.<br><br>Once I have some free time, I'll try to change the value of the ISO and the program.<br><br>I'll try to provide all the features that are on the menu Expo.<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 18, 2012, 01:56:14 AM</strong>
</dt>
<dd class="postbody">
Here is a list with the names of the properties. Regular expressions are not my specialty. :)<br><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">grep ".*[[:space:]]PROP_" 40d.111.ROMF1.0xFF800000.bin.strings | sed -e "s|.*[[:space:]]PROP_|PROP_|g" | sed -e "s|[[:space:]].*$||g" | sed -e "s|[\:\=\[\(].*$||g" | sort | uniq &gt; 40d111_properties.txt <br><br>cat 40d111_properties.txt</code><br><div class="codeheader">Code: <a href="javascript:void(0);" onclick="return smfSelectText(this);" class="codeoperation">[Select]</a></div><code class="bbc_code">PROP_ABORT<br>PROP_ACCESS_REMAIN<br>PROP_ACTIVE_SWEEP_ACTIVATE_CONDITION<br>PROP_ACTIVE_SWEEP_MODE<br>PROP_ACTIVE_SWEEP_STATUS<br>PROP_AEB<br>PROP_AFPOINT<br>PROP_AUTO_POWEROFF_TIME<br>PROP_AUTO_ROTATE<br>PROP_BATTERY_CHECK<br>PROP_BATTERY_REPORT<br>PROP_BEEP<br>PROP_BODY_ID<br>PROP_BUILTIN_STROBO_SETTING<br>PROP_CARD1_CLUSTER_SIZE<br>PROP_CARD1_EXIST<br>PROP_CARD1_FILE_NUMBER<br>PROP_CARD1_FOLDER_NUMBER<br>PROP_CARD1_FREE_SIZE<br>PROP_CARD1_IMAGE_FORMAT<br>PROP_CARD1_IMAGE_QUALITY<br>PROP_CARD1_IMAGE_SIZE<br>PROP_CARD1_NEXT_FOLDER_NUMBER<br>PROP_CARD1_RECORD<br>PROP_CARD1_STATUS<br>PROP_CARD2_CLUSTER_SIZE<br>PROP_CARD2_EXIST<br>PROP_CARD2_FILE_NUMBER<br>PROP_CARD2_FOLDER_NUMBER<br>PROP_CARD2_FREE_SIZE<br>PROP_CARD2_NEXT_FOLDER_NUMBER<br>PROP_CARD2_RECORD<br>PROP_CARD2_STATUS<br>PROP_CARD3_CLUSTER_SIZE<br>PROP_CARD3_EXIST<br>PROP_CARD3_FILE_NUMBER<br>PROP_CARD3_FOLDER_NUMBER<br>PROP_CARD3_FREE_SIZE<br>PROP_CARD3_IMAGE_FORMAT<br>PROP_CARD3_IMAGE_QUALITY<br>PROP_CARD3_IMAGE_SIZE<br>PROP_CARD3_NEXT_FOLDER_NUMBER<br>PROP_CARD3_RECORD<br>PROP_CARD3_STATUS<br>PROP_CARD_EXTENSION<br>PROP_CARD_IMAGE_FORMAT<br>PROP_CARD_IMAGE_QUALITY<br>PROP_CARD_IMAGE_SIZE<br>PROP_CARD?_STATUS<br>PROP_CFN_TAB3<br>PROP_CFN_TAB4<br>PROP_COLOR_SPACE<br>PROP_COMP<br>PROP_COMPRESSION_L<br>PROP_COMPRESSION_M1<br>PROP_COMPRESSION_M2<br>PROP_CONNECT_TARGET<br>PROP_CONNECT_TARGET_WFT<br>PROP_CURRENT_MEDIA<br>PROP_CUSTOM_WB<br>PROP_DATA_INPUT_TRANSMISSION<br>PROP_DATE_DISPLAY_FORMAT<br>PROP_DEFAULT_OBWBREG<br>PROP_DIR_SUFFIX<br>PROP_DISPLAY_AF_POINTS<br>PROP_DP_DPOF_PARAM<br>PROP_DP_EXT_OPTION_PARAM<br>PROP_DP_STANDARD_PARAM<br>PROP_DSDEFINE<br>PROP_DUST_DELETE_DATA<br>PROP_ELECTRIC_SHUTTER_MODE<br>PROP_ERROR_FOR_DISPLAY<br>PROP_FILE_NUMBERING_MODE<br>PROP_FILE_PREFIX<br>PROP_FIRM_VERSION<br>PROP_FIXED_VERSION<br>PROP_FLAVOR_BW<br>PROP_FLAVOR_FAITHFUL<br>PROP_FLAVOR_LANDSCAPE<br>PROP_FLAVOR_MODE<br>PROP_FLAVOR_NEUTRAL<br>PROP_FLAVOR_PORTRAIT<br>PROP_FLAVOR_STANDARD<br>PROP_FLAVOR_USER1<br>PROP_FLAVOR_USER2<br>PROP_FLAVOR_USER3<br>PROP_FLAVOR_XXXX<br>PROP_GPS_STATUS<br>PROP_GUI_STATE<br>PROP_HDD_DCIM_PATH<br>PROP_HIGHLIGHT_ALERT<br>PROP_HISTOGRAM<br>PROP_ICU_AUTO_POWEROFF<br>PROP_ICU_UILOCK<br>PROP_Initialize<br>PROP_LANGUAGE<br>PROP_LAST_JOBID<br>PROP_LAST_JOB_STATE<br>PROP_LCD_BRIGHTNESS<br>PROP_LCD_STATE<br>PROP_LENS<br>PROP_LIVE_VIEW_GRID<br>PROP_LIVE_VIEW_VALID<br>PROP_LOGICAL_CONNECT<br>PROP_LOGICAL_CONNECT_WFT<br>PROP_LV_AF_RESULT<br>PROP_LV_AVAILABLE_AREA<br>PROP_LV_EXPOSURE_MODE<br>PROP_LV_HISTOGRAM<br>PROP_LV_OUTPUT_DEVICE<br>PROP_LV_SPDN_BTN_STATUS<br>PROP_LV_TEST_REMOTE_RELEASE<br>PROP_MENU_POSITION<br>PROP_METERING_MODE<br>PROP_METERING_TIMER_FOR_LV<br>PROP_MWB<br>PROP_MWB1<br>PROP_MYMENU_LIST<br>PROP_NO_CARD_RELEASE<br>PROP_NUMBER_OF_CONTINUOUS_MODE<br>PROP_PC_FLAVOR1_PARAM<br>PROP_PC_FLAVOR2_PARAM<br>PROP_PC_FLAVOR3_PARAM<br>PROP_PC_FREE_SIZE<br>PROP_PC_WB1<br>PROP_PC_WB2<br>PROP_PC_WB3<br>PROP_PC_WB4<br>PROP_PC_WB5<br>PROP_PERMIT_ICU_EVENT<br>PROP_PHOTO_STUDIO_ENABLE_ISOCOMP<br>PROP_PHOTO_STUDIO_ISOCOMP<br>PROP_PHOTO_STUDIO_MODE<br>PROP_PHOTO_STUDIO_MODE_CHANGE_AUTO_PASSWORD_KEY<br>PROP_PHOTO_STUDIO_MODE_CHANGE_MANUAL_PASSWORD<br>PROP_PHOTO_STUDIO_SETUP_PASSWORD<br>PROP_PHYSICAL_CONNECT<br>PROP_QUICKREVIEW<br>PROP_QUICKREVIEW_MODE<br>PROP_RED_EYE_REDUCTION<br>PROP_REMOTE_BULB_RELEASE_END<br>PROP_REMOTE_BULB_RELEASE_START<br>PROP_REMOTE_RELEASE<br>PROP_SAVE_MODE<br>PROP_SaveMpuDebugData<br>PROP_SDIO_PHYSICAL_CONNECT<br>PROP_SDIO_PHYSICAL_CONNECT_START<br>PROP_SELECTED_FILE_PREFIX<br>PROP_SET_TV<br>PROP_SHOOTING_TYPE<br>PROP_SHUTTER_COUNTER<br>PROP_SPECIAL_OPTION<br>PROP_STARTUP_CONDITION<br>PROP_STROBO_CFN<br>PROP_STROBO_SETTING<br>PROP_STROBO_WIRELESS_SETTING<br>PROP_TEMP_STATUS<br>PROP_TRANS_METHOD_WFT<br>PROP_TUNING_FLAG<br>PROP_USBDEVICE_CONNECT<br>PROP_USER_FILE_PREFIX<br>PROP_USER_FILE_PREFIX2<br>PROP_VIDEO_PHYSICAL_CONNECT<br>PROP_VIDEO_SYSTEM<br>PROP_WBB_BA<br>PROP_WBB_GM<br>PROP_WB_MODE<br>PROP_WBS_BA<br>PROP_WBS_GM<br>PROP_WFT_ADAPTERINFO<br>PROP_WFT_CAPTION<br>PROP_WFT_DELIMITER_STATUS<br>PROP_WFT_DONGLE<br>PROP_WFT_FTP<br>PROP_WFT_HOSTINFO<br>PROP_WFT_HTTP<br>PROP_WFT_IMAGE_TRANS<br>PROP_WFT_LOCK<br>PROP_WFT_SYSTEM<br>PROP_WFT_TCPIP<br>PROP_WFT_TRANSMISSION<br>PROP_WFT_WIRED<br>PROP_WFT_WIRELESS<br>PROP_WIZARD_WFT<br></code><br>I think it is not missing any. If you detect any problems let me know. Thank you.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 18, 2012, 02:15:02 AM</strong>
</dt>
<dd class="postbody">
I think that 40D only allows MF on LV mode. What is the purpose of this property? ...<br><br>PROP_LV_AF_RESULT
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>CaesarB</strong> on <strong>December 19, 2012, 09:15:42 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg21325#msg21325">Quote from: jplxpto on December 18, 2012, 02:15:02 AM</a></div></div><blockquote class="bbc_standard_quote">I think that 40D only allows MF on LV mode. What is the purpose of this property? ...<br><br>PROP_LV_AF_RESULT<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Hi guys, glad to see an active develop thread on the 40D.<br><br>My 2 cents: 40D can indeed autofocus in LV, via C. Fn. III-6. Please check http://photography-on-the.net/forum/showthread.php?t=428535, so PROP_LV_AF_RESULT is probably related to it.<br><br>Regards
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>December 20, 2012, 12:27:24 AM</strong>
</dt>
<dd class="postbody">
Hi Thank you for registering at our forum. You are welcome to this community. <br>I appreciate your link. I learn a little more. Glad to hear that works with a 40D. <br>I hope one day to enhance your camera.<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>CaesarB</strong> on <strong>December 20, 2012, 12:35:11 AM</strong>
</dt>
<dd class="postbody">
I'm sure you will.<br><br>Thank you very much!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>December 29, 2012, 09:11:31 AM</strong>
</dt>
<dd class="postbody">
waiting waiting waiting :) <br><br>Just tried ML on a friend's 400d and now waiting aggressively for 40d version.......JPL really nice work and dedication.......<br><br>
</dd>
<dt class="postheader">
Title: <strong>R: Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>December 29, 2012, 11:32:16 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg1#msg1">Quote from: imme on December 29, 2012, 09:11:31 AM</a></div></div><blockquote class="bbc_standard_quote">waiting waiting waiting :) <br><br>Just tried ML on a friend's 400d and now waiting aggressively for 40d version.......JPL really nice work and dedication.......<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>There's no ML for the 400D. It's a different project altogether called 400plus. We do share some code and ideas though
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>December 31, 2012, 02:07:37 PM</strong>
</dt>
<dd class="postbody">
Thanks ......I thought it was ML. 400plus is a good project. I am waiting for 40d ML. It good to see you people working on this project
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>scaricame</strong> on <strong>January 10, 2013, 06:04:18 PM</strong>
</dt>
<dd class="postbody">
News??? :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>January 11, 2013, 01:56:47 PM</strong>
</dt>
<dd class="postbody">
Is there any progress? Any idea (days or months) when we will be able to run ML on our 40d? Please! Do something we are waiting waiting waiting.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>January 12, 2013, 06:22:51 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg23188#msg23188">Quote from: imme on January 11, 2013, 01:56:47 PM</a></div></div><blockquote class="bbc_standard_quote">Is there any progress? Any idea (days or months) when we will be able to run ML on our 40d? Please! Do something we are waiting waiting waiting.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I can't answer that question. <br>I work on this project whenever I have time and disposition. <br>I'm busy finishing a project and I have many issues to deal with in my life. <br>I hope soon to be able to continue with this port.<br><br>I started making the discovery of most properties. <br>Many of them are critical to continue the port but this task takes a long time.<br><br>In recent days I have devoted some time to the 650D. <br>I have a camera with me and I'll start doing some tests with ML.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>January 14, 2013, 09:01:47 AM</strong>
</dt>
<dd class="postbody">
JPLXPTO........i am a big fan of your work. It was you who started working on this port. I am hopeful you will make 40d ML very soon.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>January 24, 2013, 11:21:19 PM</strong>
</dt>
<dd class="postbody">
Thank you!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>j_veitch</strong> on <strong>February 04, 2013, 06:59:12 PM</strong>
</dt>
<dd class="postbody">
I just wanted to say I remember sitting in the earlier days of ML, hoping a 40D patch would come, then hearing not, and I don't know how I missed this thread...<br><br>Anway, just going to give some moral support, and when I get a little time see if I can assist further (I do own a 40D, and am happy to help where I can).<br><br>PS I am really impressed by the work of the developers and the talented people using ML.
</dd>
<dt class="postheader">
Title: <strong>Canon 40D</strong><br>
Post by: <strong>lalama</strong> on <strong>February 04, 2013, 10:59:40 PM</strong>
</dt>
<dd class="postbody">
Took time following the fantastic work they are doing you, and just wanted to congratulate you for it.<br>I also give my moral support to this project, because as j-Veitch said I too have been waiting for the arrival of the patch to the 40D.<br>I think we all know how hard it must be to create this, and I also believe strongly that the EOS 40D ML deserves.<br>I hope to be helpful at some point and I apologize for my bad English.<br>A greeting.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>scaricame</strong> on <strong>February 21, 2013, 10:28:14 AM</strong>
</dt>
<dd class="postbody">
news???
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ariznaf</strong> on <strong>February 21, 2013, 06:38:21 PM</strong>
</dt>
<dd class="postbody">
I have just registered just to post here and give you a thumbs up.<br><br>Great effort, I have been long waiting for somebody to port ML to my 40D.<br>It would be great to be able to record video and many of the ML features in photography, like focus peaking, advance bracketing, focus bracketing, etc.<br><br>I am seeking for any news about it.<br><br>Please keep trying and thanks for your efforts.<br>I will pay for the firmware as soon as there is an early versión.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>February 28, 2013, 12:03:54 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg27125#msg27125">Quote from: ariznaf on February 21, 2013, 06:38:21 PM</a></div></div><blockquote class="bbc_standard_quote">I have just registered just to post here and give you a thumbs up.<br><br>Great effort, I have been long waiting for somebody to port ML to my 40D.<br>It would be great to be able to record video and many of the ML features in photography, like focus peaking, advance bracketing, focus bracketing, etc.<br><br>I am seeking for any news about it.<br><br>Please keep trying and thanks for your efforts.<br>I will pay for the firmware as soon as there is an early versión.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I am afraid you will be disappointed. Come back in six months and see if I am wrong.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>j_veitch</strong> on <strong>February 28, 2013, 12:13:49 AM</strong>
</dt>
<dd class="postbody">
Well, firmware is new to me. And I am reading what I can in the time I have.&nbsp; i did get round to dl'ing the ubuntu vm... And one o the devs at my work has at least used vxworks amd arm in the past. But, really not sure where to go from here.&nbsp; Anyway, i haven't given up hope yet.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>blue9</strong> on <strong>March 01, 2013, 02:02:57 PM</strong>
</dt>
<dd class="postbody">
I have several Eos cameras, however the 40D has the best sharpness per pixel performance. Just look at DP preview's review of 50D and how it compared to the 40D 10mp sensor. So if someone are able to fix ML for the 40D, it think it will be one of the sharpest video enabled DSLR.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jurojuro</strong> on <strong>March 04, 2013, 10:03:45 PM</strong>
</dt>
<dd class="postbody">
&nbsp;I will also pay something if I get HD video properties to 40D! Would be great to utilize the old camera!!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>March 05, 2013, 11:49:00 AM</strong>
</dt>
<dd class="postbody">
We all are desperately waiting for 40d Magiclantern version. But I think 40d is not on priority list of ML. <br><br>Please! I request that If 40d port is possible than keep this thread alive in other case close this thread and say 40d port is not possible due to all new camera portings. It will close the case forever. I am not disappointed or emotional but I am trying to convey feelings of several 40d users who are anxiously waiting for 40d version. But there is no development priority for this.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ariznaf</strong> on <strong>March 06, 2013, 11:13:04 PM</strong>
</dt>
<dd class="postbody">
The dveloper does&nbsp; not seem to be active in the forum, not just this post.<br>It seems he is busy with personal tasks.<br><br>Of course this is not&nbsp; probably his main priority, there is work and family, personal troubles...<br>Hope he will work en this soon.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 21, 2013, 01:56:47 AM</strong>
</dt>
<dd class="postbody">
I'M LIVE :)<br><br>Sorry ... I have spent many days with health problems and hard work. <br>My life has been a bit complicated but I hope to get back to work on this project a few days from now. <br>I'll need to read some posts. I am now a bit outdated. <br><br>I think the developers have done an excellent job. <br><br>I promise appear shortly.<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 21, 2013, 02:04:22 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg28234#msg28234">Quote from: ariznaf on March 06, 2013, 11:13:04 PM</a></div></div><blockquote class="bbc_standard_quote">The dveloper does&nbsp; not seem to be active in the forum, not just this post.<br>It seems he is busy with personal tasks.<br><br>Of course this is not&nbsp; probably his main priority, there is work and family, personal troubles...<br>Hope he will work en this soon.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>YES!!! You are right! Thank you for your kindness. <br><br>You may not believe but I finally went and uncle have not photographed the child with a DSLR. :(<br><br>I love to shoot a little of everything but children are at the top of my list. And now I have a new reason to shoot.<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 21, 2013, 02:08:01 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg28234#msg28234">Quote from: ariznaf on March 06, 2013, 11:13:04 PM</a></div></div><blockquote class="bbc_standard_quote">The dveloper does&nbsp; not seem to be active in the forum, not just this post.<br>It seems he is busy with personal tasks.<br><br>Of course this is not&nbsp; probably his main priority, there is work and family, personal troubles...<br>Hope he will work en this soon.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I still have some outstanding issues to resolve but I will endeavor to return soon.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>blue9</strong> on <strong>March 21, 2013, 12:14:52 PM</strong>
</dt>
<dd class="postbody">
I have several eos cameras, the 40D however produses very sharp and clean images for it's size (10Mp). Take a look at DP's (Digital preview) review of the 50D where the older 40D at delivered the same image quality as the 50D when magnefied, even if the 50D has a 15.1 Mp sensor.<br><br>I think a Magic Lantern converted 40D camera would be one of the best and sharpest film cameras, and to a fair price.&nbsp; ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ariznaf</strong> on <strong>March 21, 2013, 10:21:07 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg29142#msg29142">Quote from: jplxpto on March 21, 2013, 02:04:22 AM</a></div></div><blockquote class="bbc_standard_quote">YES!!! You are right! Thank you for your kindness. <br><br>You may not believe but I finally went and uncle have not photographed the child with a DSLR. :(<br><br>I love to shoot a little of everything but children are at the top of my list. And now I have a new reason to shoot.<br><br>BR<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Well come back and many thanks for your efforts.&nbsp; Glad to hear from you. <br>Hope your personal troubles and your health issues have been solved. <br><br>Programming is a very time consuming task,&nbsp; and this kind of programming Is even more demanding. <br>Hope you find the time to complete the task,&nbsp; but even if you cannot complete it,&nbsp; we should be gratefully for your efforts and time. <br><br>I come often to the thread to read about the progress.&nbsp; I would like to test ml in my 40d and test video in a DSLR. <br><br>May be in the near future,&nbsp; when the price lowers more,&nbsp; I will buy a 7d as my video camera is dead,&nbsp; but I am not sure that a DSLR is an alternative to a consumer video camera. <br><br>Anyway there are many interesting g things in ml for photography too.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>mincanphoto</strong> on <strong>March 24, 2013, 02:33:52 AM</strong>
</dt>
<dd class="postbody">
jplxpto，I found some information for you <br>1.http://valexvir.narod.ru/&nbsp; &nbsp; &nbsp; -----from Russian，for 40D, 50D, 5D Mark II и 1Ds Mark III -&nbsp; record video 1024x680 with a pc.<br>2.DIGIC III - (VxWorks OS) from CHDK&nbsp; &nbsp; http://chdk.wikia.com/wiki/For_Developers <br>3.one&nbsp; chinese cracked the firmware of 40D，found out the “factory menu”；ISO 50-6400；AF CK;but he stoped （write text.bin），<br>http://bbs.fengniao.com/forum/1397306_8.html<br>http://bbs.fengniao.com/forum/1397306_9.html
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 24, 2013, 03:37:32 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg29372#msg29372">Quote from: mincanphoto on March 24, 2013, 02:33:52 AM</a></div></div><blockquote class="bbc_standard_quote">jplxpto，I found some information for you <br>1.http://valexvir.narod.ru/&nbsp; &nbsp; &nbsp; -----from Russian，for 40D, 50D, 5D Mark II и 1Ds Mark III -&nbsp; record video 1024x680 with a pc.<br>2.DIGIC III - (VxWorks OS) from CHDK&nbsp; &nbsp; http://chdk.wikia.com/wiki/For_Developers <br>3.one&nbsp; chinese cracked the firmware of 40D，found out the “factory menu”；ISO 50-6400；AF CK;but he stoped （write text.bin），<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thank you!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 30, 2013, 03:42:18 AM</strong>
</dt>
<dd class="postbody">
My dear friends,<br><br>Finally, I got some time to update my repositories and make the necessary changes to make the build of ML for 40D.<br><br>My next task will be to fix the menus.<br>Many changes were made to the menu system and now some things are not well presented. For example, icons appear with double the size.<br><br>I think, users of 5DC will have the same problem. <br>I made small fixes that should have an impact on 5DC but I do not have this camera for testing.<br><br>https://bitbucket.org/hudson/magic-lantern/pull-request/71/some-change-to-build-ml-for-vxworks/diff<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>j_veitch</strong> on <strong>March 30, 2013, 10:15:27 AM</strong>
</dt>
<dd class="postbody">
Just want to say, thanks for all your efforts so far.&nbsp; I just never seem to have the time to look further myself... It is quite a learning curve for me.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>March 30, 2013, 08:32:55 PM</strong>
</dt>
<dd class="postbody">
Some screenshots:<br><br>http://i.imgur.com/qfFlm6w.jpg<br><br>http://i.imgur.com/cqslQ9x.jpg<br><br>http://i.imgur.com/eRVDcgb.jpg<br><br>http://i.imgur.com/X0YpUVX.jpg
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>muzsielod</strong> on <strong>March 31, 2013, 11:50:44 PM</strong>
</dt>
<dd class="postbody">
This are great news ;D <br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nexiabass</strong> on <strong>April 02, 2013, 07:58:52 AM</strong>
</dt>
<dd class="postbody">
Great to see progress.<br>I really would like to help, so if some alpha-testing is necessary ^^<br>Do you already have an idea if a iso expansion would work?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>April 02, 2013, 09:24:10 AM</strong>
</dt>
<dd class="postbody">
It does already, use Lightroom.<br>;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nexiabass</strong> on <strong>April 02, 2013, 10:26:29 AM</strong>
</dt>
<dd class="postbody">
Thats the standard answer ;)<br>But it's a bit easier and better to handle to select a iso value instead of underexposure.<br>It's just the standard workflow with the cam - for me ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>adentallon</strong> on <strong>April 04, 2013, 04:57:34 AM</strong>
</dt>
<dd class="postbody">
Created an account to show support for this project.&nbsp; I'll also throw my camera up for grabs for testing if needed.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>fotosi</strong> on <strong>April 06, 2013, 03:59:29 PM</strong>
</dt>
<dd class="postbody">
Hello! I have created account too, just to show my support. I already follow this thread unregistered, from the its begining and just because of maybe incoming Magic Lantern for 40D, I still keep my three 40D's.<br>Many many thanks to the developers of Magic Lantern! When I watch what you guys do, it seems to my like a rocket science. Really unbeliveable...<br>If you successfuly finish this project, you will receive a donation from me, for your big success.<br>Big thanks in advance and I will stay tuned to the new happening.... :)<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>April 07, 2013, 02:31:34 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg30264#msg30264">Quote from: fotosi on April 06, 2013, 03:59:29 PM</a></div></div><blockquote class="bbc_standard_quote">Thank you!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Bimmer_E30</strong> on <strong>April 08, 2013, 12:47:47 AM</strong>
</dt>
<dd class="postbody">
I too have created account, to congratulate you all, for trying. My 40D is wainting to test ML.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>danniorn</strong> on <strong>April 09, 2013, 04:12:44 PM</strong>
</dt>
<dd class="postbody">
I did the same thing as anyone else :) i made an account just to say good work and keep it going! i would love to make my 40d take short clips but i have one thing to ask, would it be hard to add the timelaps feature in the 40d magic lantern?&nbsp; becouse i would loe to take some timelaps without the 200$+ remote&nbsp; :o<br><br>Keep doing your awesome work&nbsp; 8)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>vladzilla</strong> on <strong>April 09, 2013, 04:24:55 PM</strong>
</dt>
<dd class="postbody">
&nbsp;:) will we be able to film video on 40D?) cool
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ariznaf</strong> on <strong>April 10, 2013, 10:32:27 PM</strong>
</dt>
<dd class="postbody">
Great, I see that you are now back in the developement and makin progress.<br><br>Thank you for your work and time.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>thome</strong> on <strong>April 11, 2013, 03:33:03 AM</strong>
</dt>
<dd class="postbody">
I love my 40D - its a great camera and it does a great job!<br>If ML is going to hit it, it would be a big rebirth for the cam. <br>I am thankful to all of&nbsp; the developers for their personal effort in ML as a whole and jplxpto in special for his work on the 40D.<br>It's an "old" camera, so it is not a matter of course that someone takes over such a hard and long work for it. So: thumbs up for you jpl and never forget: don't mind how many people are asking for features/dates/whatever: there are more important things in life.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Faxe</strong> on <strong>April 11, 2013, 03:17:04 PM</strong>
</dt>
<dd class="postbody">
&gt; there are more important things in life.<br><br>Such as?!<br><br>No, seriously. While I go to this page almost every day in the hope of some progress, I realize that ML is not a make or break for me becoming a better photographer. And, sadly enough, neither is getting new lenses... But the geek in me would love to test out new features on the 40D any day, so I keep coming back. Keep it up jplxto, really appreciated!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>April 11, 2013, 04:59:50 PM</strong>
</dt>
<dd class="postbody">
At this point, anyone with a 40D and some C skills can grab the source code and improve it. So... what are you waiting for? ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>April 11, 2013, 07:57:30 PM</strong>
</dt>
<dd class="postbody">
Alex is right about it.<br>&nbsp;<br>But is there an easier way to do it for the majority who may not know how to do with the source codes. Is there a simplified version with only a few functions e.g. intervalometer, auto WB control etc. to start with. I think most 40D owners will agree to pay to finance the development.<br><br>Any thoughts from the supporters of this thread.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>April 11, 2013, 08:21:23 PM</strong>
</dt>
<dd class="postbody">
Compiling the current source code will give you that version to get started. The menu works, but other than that I have no idea what else works.<br><br>Maybe jplxpto can publish the devkit (the FIR for enabling the bootflag and dumping the firmware)?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>muzsielod</strong> on <strong>April 15, 2013, 09:22:26 PM</strong>
</dt>
<dd class="postbody">
How much it cost the developing of a working firmware?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nanomad</strong> on <strong>April 15, 2013, 09:34:51 PM</strong>
</dt>
<dd class="postbody">
Hundreds of man-hours.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>blue9</strong> on <strong>April 19, 2013, 01:27:33 AM</strong>
</dt>
<dd class="postbody">
I bought a second 40D (i have another 40D from before) that i intend to reserve for use with and furure realease of ML.
</dd>
<dt class="postheader">
Title: <strong>Canon 40D</strong><br>
Post by: <strong>n0rt0n</strong> on <strong>April 19, 2013, 11:04:16 AM</strong>
</dt>
<dd class="postbody">
Hello all!<br>Tell me please, where I can download current source code?<br>Is there AF microadjustment function? I need only this one.<br>Or maybe I can adjust AF without ML?<br>Thank you for this job!<br>And sorry for my english, I'm from Russia :)
</dd>
<dt class="postheader">
Title: <strong>Will this bring ML to 450D</strong><br>
Post by: <strong>ixtlan</strong> on <strong>April 23, 2013, 11:11:28 AM</strong>
</dt>
<dd class="postbody">
@ jplxpto , coutts.<br><br>Thanks guys for all your efforts and hard work.&nbsp; :)<br><br>If finally we get a ML download for 40D, do we get a ML for 450D as well?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>April 23, 2013, 04:38:58 PM</strong>
</dt>
<dd class="postbody">
No, but it will be easier to port, if anyone is interested in doing that.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>eugene-r</strong> on <strong>April 23, 2013, 07:57:54 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg31311#msg31311">Quote from: n0rt0n on April 19, 2013, 11:04:16 AM</a></div></div><blockquote class="bbc_standard_quote">Is there AF microadjustment function?</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Нету в ML микроаджустмента, такчто даже не надейтесь.<br><br><div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg31311#msg31311">Quote from: n0rt0n on April 19, 2013, 11:04:16 AM</a></div></div><blockquote class="bbc_standard_quote">Or maybe I can adjust AF without ML?</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>У 40д нет такой фичи, так что только нести объектив в сервис. <br><br><div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg31311#msg31311">Quote from: n0rt0n on April 19, 2013, 11:04:16 AM</a></div></div><blockquote class="bbc_standard_quote">I'm from Russia :)</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>Ничего, бывает =)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>zfeet</strong> on <strong>April 24, 2013, 05:25:36 AM</strong>
</dt>
<dd class="postbody">
I have 40D and would like to give it a try with Magic Lantern. I have a background with CHDK but never thought about ML until now. If anyone has a dumped 1.1.1 please PM me.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>April 26, 2013, 06:14:10 PM</strong>
</dt>
<dd class="postbody">
Consider to switch to 50D/550D and install ML to play with. The price drop of the 40D since last year was a significant amount(from $350 to $250 on the Craigslist in Canada) and so are the other two mentioned here. 40D is good but the other two are equally good in some other aspects.<br><br>Anyway, don't waste time waiting, just go out and click, click and click.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ixtlan</strong> on <strong>April 29, 2013, 02:00:49 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg31630#msg31630">Quote from: a1ex on April 23, 2013, 04:38:58 PM</a></div></div><blockquote class="bbc_standard_quote">No, but it will be easier to port, if anyone is interested in doing that.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thanks for the reply. I hope this happens.&nbsp; :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>a1ex</strong> on <strong>April 29, 2013, 02:07:36 PM</strong>
</dt>
<dd class="postbody">
It's not really that hard - if you have enough time, motivation, some basic programming skills and the desire to learn, you can do it. It's quite similar to programming embedded devices or microcontrollers.<br><br>See also:<br>http://chdk.wikia.com/wiki/FAQ#Q._My_camera_isn.27t_ported_yet._Is_a_port_planned.C2.A0.3F_When_will_it_be_ready.C2.A0.3F_How_can_I_help.C2.A0.3F
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>scaricame</strong> on <strong>May 07, 2013, 10:10:32 AM</strong>
</dt>
<dd class="postbody">
news???
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nativeridge</strong> on <strong>May 26, 2013, 10:18:22 PM</strong>
</dt>
<dd class="postbody">
news? oh you are wanting a personal update just for you, gotcha, sorry carry on......
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>samacochan</strong> on <strong>May 27, 2013, 01:56:01 PM</strong>
</dt>
<dd class="postbody">
http://www.eoshd.com/content/10507/it-lives-5-year-old-350-canon-50d-becomes-raw-cinema-monster (http://www.eoshd.com/content/10507/it-lives-5-year-old-350-canon-50d-becomes-raw-cinema-monster)<br><br>Wow......will this happen on 40D ?
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>coutts</strong> on <strong>May 27, 2013, 04:28:03 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg41266#msg41266">Quote from: samacochan on May 27, 2013, 01:56:01 PM</a></div></div><blockquote class="bbc_standard_quote">http://www.eoshd.com/content/10507/it-lives-5-year-old-350-canon-50d-becomes-raw-cinema-monster (http://www.eoshd.com/content/10507/it-lives-5-year-old-350-canon-50d-becomes-raw-cinema-monster)<br><br>Wow......will this happen on 40D ?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>I found the required function stubs for it, so in theory it should work if somebody is still working on this port ;)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Faxe</strong> on <strong>June 14, 2013, 12:43:13 PM</strong>
</dt>
<dd class="postbody">
Too bad that the developer seems to have abandoned ship, so we may never know... :-\<br>Then again, this is all voluntary work, and messy stuff, so I can understand it if he suddenly decided it wasn't worth the effort... I unfortunately completely lacks the skill to finish off what he started.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>iNva</strong> on <strong>June 16, 2013, 04:34:12 PM</strong>
</dt>
<dd class="postbody">
I have 5DmII but I would like to try ML on my 40D its any progress there? :)<br><br>+ I could help you with testing etc
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>redhancer</strong> on <strong>June 16, 2013, 05:14:42 PM</strong>
</dt>
<dd class="postbody">
this topic caught my attention as well. If I had the skills I certainly would help, I did a little of coding in my past years but I can't imagine how hard it is to achieve a firmware modification on a camera. there are certain things that an older camera like the 40D would benfefit from, like the software is really old (auto-iso etc.) but the images are still awesome (I do prefer sometimes the 10MP sensor over smaller pixels) so, what canon wants us to do: buy a newer tool. with software so complicated to adjust on cameras its really a smart step of camera manufactures to keep them at dinousaur stage.<br>well, I assume you all agree, what I wanted to say: If there is a way I can help, I'll invest a lot of my free time (which I got like a month for this summer) If there is enough information available that someone like me could possibly read into that field of work.<br><br>best regards
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>sm105</strong> on <strong>June 16, 2013, 05:35:08 PM</strong>
</dt>
<dd class="postbody">
I was following this thread when it was active, but I think the 50D development has been prioritized for the moment.<br><br>I've got a 40D, so I would certainly help with testing builds, but like others I have limited programming experience.<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>iNva</strong> on <strong>June 16, 2013, 07:53:02 PM</strong>
</dt>
<dd class="postbody">
yea 40D is really good camera.. (I used 50d and I dont like it 40 was better) I like this camera cause this cam is very good in sharp and its really fast in focus (im still using it for rally etc)<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>Bongle</strong> on <strong>June 22, 2013, 09:56:58 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg29141#msg29141">Quote from: jplxpto on March 21, 2013, 01:56:47 AM</a></div></div><blockquote class="bbc_standard_quote">I'M LIVE :)<br><br>Sorry ... I have spent many days with health problems and hard work. <br>My life has been a bit complicated but I hope to get back to work on this project a few days from now. <br>I'll need to read some posts. I am now a bit outdated. <br><br>I think the developers have done an excellent job. <br><br>I promise appear shortly.<br><br>BR<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Hope things have bettered up for you 'jplxpto'. Thanks so much for the dedication you have put into the development of ML for us 40D users. (Of course gratitude goes out to Alex and all the other developers also). <br><br>I heard about ML only last night from my wife's boss who uses it on the 5D MkII. He does commercials and all that stuff with it. He's very excited about it and trust me, I can see why. <br>It would be a real joy to be able to shoot video on my trusty 40D. I just cant wait.<br>Thanks for the great work guys. I'll surely be one of the first to download ML for the 40D.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>July 27, 2013, 10:01:38 PM</strong>
</dt>
<dd class="postbody">
Hello guys ... sorry ... I've been very busy with work ...and also some health problems.<br><br>I've been completely absent during the last months ... <br>I hope to soon be able to return to work for this magnificent community <br>and of course I'll come to invest some time in the port of 40D.<br><br>Best regards
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nativeridge</strong> on <strong>July 28, 2013, 10:46:01 PM</strong>
</dt>
<dd class="postbody">
that is awesome news jplxpto, I am new to the community and although I am fortunate enough to have ML for 6D I have been hoping to see the 40D with some ML 'goodness' :D<br><br>very encouraging!!&nbsp;
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>July 31, 2013, 09:59:31 AM</strong>
</dt>
<dd class="postbody">
Good to hear from jplxpto after long long time. You are only person working on this port and all our eyes are on you.....May God bless you with health and you can work on this port. <br><br>Can you please tell us how much more work would be required to complete this port. Last time I think you were working with menus. hope to hear good news from you and we all pray from your health......amen
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>July 31, 2013, 03:07:45 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg62963#msg62963">Quote from: imme on July 31, 2013, 09:59:31 AM</a></div></div><blockquote class="bbc_standard_quote">Good to hear from jplxpto after long long time. You are only person working on this port and all our eyes are on you.....May God bless you with health and you can work on this port. <br><br>Can you please tell us how much more work would be required to complete this port. Last time I think you were working with menus. hope to hear good news from you and we all pray from your health......amen<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Hi,<br><br>This week I've been reading about the latest news.<br><br>I updated the source code to the 40D but the project did not compile ... <br>I've started to make some changes but still could not test anything.<br><br>The menus have worked in 40D. <br>Before getting out of the project, I was making the discovery of the main properties.<br>The selection of the focus points have worked correctly.<br>I also able to change the aperture and shutter speed.<br><br>Some overlays also have work in play mode.<br>I still can not display the overlays in live view mode. <br>I still could not find the addresses of HDVRAM. I hope to do that soon.<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ilguercio</strong> on <strong>July 31, 2013, 03:19:58 PM</strong>
</dt>
<dd class="postbody">
I hope your health problems are not serious.<br>It's nice to see you are back to work with us!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>July 31, 2013, 10:48:47 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg63009#msg63009">Quote from: ilguercio on July 31, 2013, 03:19:58 PM</a></div></div><blockquote class="bbc_standard_quote">I hope your health problems are not serious.<br>It's nice to see you are back to work with us!<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'm fine... Thank you...<br><br>BR
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>August 01, 2013, 12:54:33 PM</strong>
</dt>
<dd class="postbody">
Goodluck........ :D
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>ariznaf</strong> on <strong>August 07, 2013, 11:08:36 AM</strong>
</dt>
<dd class="postbody">
Well come back.<br>Glad to hear you aee ok and tour health problemas are gone.<br><br>Great to ser you are back to the project toó.<br>As soon as you have a operational alpha versión i will try it in my camera.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2013, 02:49:01 AM</strong>
</dt>
<dd class="postbody">
After a few months away. ML works again on my 40D.<br><br>I hope soon to have time to fix the loading of modules. <br>At this time no module is loaded. <br>I also saw that there are some problems in the menus. <br>The fonts seem to me unclear.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 12, 2013, 02:50:52 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg64911#msg64911">Quote from: ariznaf on August 07, 2013, 11:08:36 AM</a></div></div><blockquote class="bbc_standard_quote">Well come back.<br>Glad to hear you aee ok and tour health problemas are gone.<br><br>Great to ser you are back to the project toó.<br>As soon as you have a operational alpha versión i will try it in my camera.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>Thanks for everything but there is still much work to be done.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>nexiabass</strong> on <strong>August 13, 2013, 11:44:58 AM</strong>
</dt>
<dd class="postbody">
if you could add iso 12800 - i would donate some cash for your work :)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 14, 2013, 12:44:32 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg66556#msg66556">Quote from: nexiabass on August 13, 2013, 11:44:58 AM</a></div></div><blockquote class="bbc_standard_quote">if you could add iso 12800 - i would donate some cash for your work :)<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br><br>I apologize to disappoint you, but all systems have their physical limits (hardware) and the software does not perform miracles ... <br>I do not think that's possible. <br>If I could do that, probably the noise would be so high that no one would want to use.<br><br>Still ... this fantastic community needs help to survive. <br>There are some very active members who deserve to be properly rewarded, even if it's with new equipment, ... new challenges, ... <br>and recognition of their work ... some of them work hard for this project ... day after day ... <br><br>Briefly, a help is always welcome :)<br><br>BR<br><br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>fotosi</strong> on <strong>August 14, 2013, 08:39:23 PM</strong>
</dt>
<dd class="postbody">
Hello jplxpto, I can and wish to help if you just give me a few step-by-steps how to.<br>What do I need of the equipment to start working and helping in this project?<br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>August 15, 2013, 08:50:18 AM</strong>
</dt>
<dd class="postbody">
JPL........its good you are back on track. I know port will take time to complete and also it needs your spare time and good health. We are waiting and wish you goodluck. <br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>August 27, 2013, 12:32:25 AM</strong>
</dt>
<dd class="postbody">
Is there currently a more "modern" version of the firmware extract/build instructions to create a FIR file for the 40D than the one located here : http://www.magiclantern.fm/forum/index.php?topic=1452.msg3856#msg3856 ?<br><br>Some of the tools listed in that don't exist in the repository anymore, so I'm getting the distinct impression that the build process has changed slightly.<br><br>Thanks!
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>August 28, 2013, 05:45:10 PM</strong>
</dt>
<dd class="postbody">
I built a 40D "snapshot" build (but without the FIR loader, as I haven't nailed down a procedure for putting one together yet), if anyone is interested. To "bump up" interest, there's also 5D3 and 50D builds there.<br><br>https://bitbucket.org/rufustfirefly/magic-lantern/downloads
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>jplxpto</strong> on <strong>August 29, 2013, 01:18:08 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg71061#msg71061">Quote from: rufustfirefly on August 28, 2013, 05:45:10 PM</a></div></div><blockquote class="bbc_standard_quote">I built a 40D "snapshot" build (but without the FIR loader, as I haven't nailed down a procedure for putting one together yet), if anyone is interested. To "bump up" interest, there's also 5D3 and 50D builds there.<br><br>https://bitbucket.org/rufustfirefly/magic-lantern/downloads<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>http://www.magiclantern.fm/forum/index.php?topic=7955.new#new (http://www.magiclantern.fm/forum/index.php?topic=7955.new#new)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>September 04, 2013, 08:17:13 AM</strong>
</dt>
<dd class="postbody">
JPL any update???????
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>September 08, 2013, 12:23:21 AM</strong>
</dt>
<dd class="postbody">
I've got a 40D body laying around -- I'd be perfectly willing to dump the firmware, search for function calls, etc; I just have little to no expertise in doing any of that, and the Magic Lantern wiki seems perilously out of date. Could anyone point me to a somewhat more up to date walkthrough of either a) using the extracted firmware components to analyse or b) dumping active ROM to do the same -- and any postings, articles, or pages about digging for the locations of specific calls?<br><br>I know it seems like a tall order, but I'd love to help if anyone can point me in the right direction. I'm using a Linux machine, but I have a Windows VM handy (as well as a copy of WINE) if it's needed.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>September 10, 2013, 07:09:33 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg74153#msg74153">Quote from: rufustfirefly on September 08, 2013, 12:23:21 AM</a></div></div><blockquote class="bbc_standard_quote">I've got a 40D body laying around -- I'd be perfectly willing to dump the firmware, search for function calls, etc; I just have little to no expertise in doing any of that, and the Magic Lantern wiki seems perilously out of date. Could anyone point me to a somewhat more up to date walkthrough of either a) using the extracted firmware components to analyse or b) dumping active ROM to do the same -- and any postings, articles, or pages about digging for the locations of specific calls?<br><br>I know it seems like a tall order, but I'd love to help if anyone can point me in the right direction. I'm using a Linux machine, but I have a Windows VM handy (as well as a copy of WINE) if it's needed.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>rufustfirefly. I am not a developer but if you read this thread from start you will get lots of information. JPL, Nanomad and alex had in detail discussions related to development and 40d porting.&nbsp; <br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>StefanKeller.AC</strong> on <strong>September 21, 2013, 12:07:01 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg71061#msg71061">Quote from: rufustfirefly on August 28, 2013, 05:45:10 PM</a></div></div><blockquote class="bbc_standard_quote">I built a 40D "snapshot" build (but without the FIR loader, as I haven't nailed down a procedure for putting one together yet), if anyone is interested. To "bump up" interest, there's also 5D3 and 50D builds there.<br><br>https://bitbucket.org/rufustfirefly/magic-lantern/downloads<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>loading that 40d00111-ML.2013-08-30-007bb9a0574d.fir with the files from ML-40D.2013-08-30.53fbc6b53da5.zip on the card<br>doesnt work, only the upper display is on, battery has to be taken out...<br>how shall it work?<br><br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>September 25, 2013, 10:16:51 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg77619#msg77619">Quote from: StefanKeller.AC on September 21, 2013, 12:07:01 PM</a></div></div><blockquote class="bbc_standard_quote">loading that 40d00111-ML.2013-08-30-007bb9a0574d.fir with the files from ML-40D.2013-08-30.53fbc6b53da5.zip on the card<br>doesnt work, only the upper display is on, battery has to be taken out...<br>how shall it work?<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'm having some issues getting development rolling on the 40D, primarily because I've been unable to extract an unencrypted version of the 1.1.1 firmware (as I had mentioned earlier in the thread). This has left me unable to find the rest of the function locations, so getting this port working, at least at the 1.1.1 firmware revision, isn't going to happen -- pending being able to get an unencrypted copy of the firmware to work with.<br><br>Alternately, I can try to move to using 1.0.5 or 1.0.8, which have both had their encryption keys reverse engineered. I hate backing out versions of firmware, but if it's the only way I can proceed, I may go that way.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>scaricame</strong> on <strong>October 24, 2013, 06:42:36 PM</strong>
</dt>
<dd class="postbody">
News???
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>October 29, 2013, 09:12:57 PM</strong>
</dt>
<dd class="postbody">
I have built a set of dumpers, which should dump out the active firmware. If someone wants to try to load one or the other up on their 40D running v1.1.1, we should be able to get an unencrypted dump of the firmware.<br><br>It's all based off of the previous 1.0.5 and 1.0.8 work, so mileage may vary.<br><br>https://bitbucket.org/rufustfirefly/magic-lantern/downloads/108D1.fir (https://bitbucket.org/rufustfirefly/magic-lantern/downloads/108D1.fir)<br>https://bitbucket.org/rufustfirefly/magic-lantern/downloads/108D2.fir (https://bitbucket.org/rufustfirefly/magic-lantern/downloads/108D2.fir)<br><br>There's a disclaimer that this could do something awful -- but one of them should just dump a file to your card (after a flurry of activity).<br><br>If anyone wants to check my work, it's all on bitbucket:<br><br>https://bitbucket.org/rufustfirefly/40d108-dumper (https://bitbucket.org/rufustfirefly/40d108-dumper)
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>November 02, 2013, 06:00:11 AM</strong>
</dt>
<dd class="postbody">
rufustfirefly can you please add a little tutorial as how can I added it to 40d and CF card. sorry but I am totally new to these firmwares stuff.&nbsp;
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>November 08, 2013, 09:04:27 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg86391#msg86391">Quote from: imme on November 02, 2013, 06:00:11 AM</a></div></div><blockquote class="bbc_standard_quote">rufustfirefly can you please add a little tutorial as how can I added it to 40d and CF card. sorry but I am totally new to these firmwares stuff. <br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>The trick is to dump the .FIR file onto your CF card (presumably using a CF card reader), then use the "Update Firmware" menu option to attempt to sideload the dumper code. It won't actually upgrade your firmware, but rather attempt to run the custom code which should, in theory, spin the CF card for a bit and dump out a file containing the loaded firmware.<br><br>It could also do bad things, which it shouldn't do. If, for some reason, it locks up completely and hasn't done anything within 30 seconds or so, you might want to pull the battery.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>pixelk</strong> on <strong>November 09, 2013, 02:21:38 PM</strong>
</dt>
<dd class="postbody">
On a 1.1.1 40D with full battery :<br><br>After a few seconds of "loading firmware update"<br><br>- 108D1.fir : White on yellow "Update file error. Please check the memory card and reload the battery and try again."<br>- 108D2.fir : White on yellow "Update file error. Please check the memory card and reload the battery and try again."<br><br>Both needed a battery remove, and the 40D still works fine after that.<br><br>40d00111-ML.2013-08-30-007bb9a0574d.fir : screen turns black, DSLR works apart from the fact that it doesn't recognize the CF carf anymore. Needed a battery remove to restore proper function.
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>anderskvist</strong> on <strong>November 12, 2013, 01:47:38 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg87718#msg87718">Quote from: pixelk on November 09, 2013, 02:21:38 PM</a></div></div><blockquote class="bbc_standard_quote">40d00111-ML.2013-08-30-007bb9a0574d.fir : screen turns black, DSLR works apart from the fact that it doesn't recognize the CF carf anymore. Needed a battery remove to restore proper function.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div>I see more or less the same (also with 1.1.1) - except the camera won't capture, but focus works...<br><br>/Anders
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>pixelk</strong> on <strong>November 18, 2013, 08:00:01 PM</strong>
</dt>
<dd class="postbody">
Yes sorry, I didn't try to capture, maybe it didn't work, maybe it did. But without the CF card recognised, my only urge was a full reset&nbsp; ;D
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>December 03, 2013, 01:53:56 PM</strong>
</dt>
<dd class="postbody">
hi,<br><br>rufustfirefly is there any update on 40d ML version you are working ????
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>December 23, 2013, 11:30:00 AM</strong>
</dt>
<dd class="postbody">
jplxpto &amp; rufustfirefly any latest update on 40d port? have not heard from you guys for a long time. <br>
</dd>
<dt class="postheader">
Title: <strong>Re: Canon 40D</strong><br>
Post by: <strong>frix23</strong> on <strong>January 11, 2014, 08:21:04 PM</strong>
</dt>
<dd class="postbody">
...and here's another guy willing to contribute work that <br>might even brick his camera for the sake of getting a <br>running 40d port. So, if there's anything I could <br>possibly do, let me know!<br>
</dd>
<dt class="postheader">
Title: <strong>Canon 40D</strong><br>
Post by: <strong>AOK</strong> on <strong>February 06, 2014, 08:15:59 PM</strong>
</dt>
<dd class="postbody">
Hi everyone,<br><br>What is the current status? Do we have a forked development of the <strong>40D ML</strong> or <strong>rufustfirefly</strong> progressing on his own? I am very confused.<br><br>Guys whatever the case is thank you so much! Let us hope for the best.&nbsp; ;D<br><br>I've just installed his build - and it has a few features... Now I know we are talking about quite an old body. Indeed since 2007 way too many things have developed. And yet could some more features<br>be expected?<br>
</dd>
<dt class="postheader">
Title: <strong>Re: [UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>imme</strong> on <strong>February 28, 2014, 01:27:32 PM</strong>
</dt>
<dd class="postbody">
Can you please tell me what features are supported in this firmware. I just need HDR and timelapse feature. is it there?
</dd>
<dt class="postheader">
Title: <strong>Re: [UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>Canon40D</strong> on <strong>March 31, 2014, 05:18:59 AM</strong>
</dt>
<dd class="postbody">
Anyone have an update on ML for the 40D? I've read this thread start to finish and looked all over without a clear answer. The ML website claims it's compatible with the 40D but I can't get it to work. Any help or guidance is much appreciated thanks to all for the hard work and time given to make this possible.
</dd>
<dt class="postheader">
Title: <strong>Re: [UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>Marsu42</strong> on <strong>March 31, 2014, 11:37:32 AM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg109673#msg109673">Quote from: Canon40D on March 31, 2014, 05:18:59 AM</a></div></div><blockquote class="bbc_standard_quote">Anyone have an update on ML for the 40D? I've read this thread start to finish and looked all over without a clear answer. The ML website claims it's compatible with the 40D but I can't get it to work. Any help or guidance is much appreciated thanks to all for the hard work and time given to make this possible.</blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I also thought so and even told other people as such, but then I was told here that 40d is not working at all and this most likely won't change :-\ ... it's not even digic4 so copy/pasting code most likely won't work.
</dd>
<dt class="postheader">
Title: <strong>Re: [UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>Canon40D</strong> on <strong>March 31, 2014, 08:08:53 PM</strong>
</dt>
<dd class="postbody">
<div class="quoteheader"><div class="topslice_quote"><a href="http://www.magiclantern.fm/forum/index.php?topic=1452.msg109701#msg109701">Quote from: Marsu42 on March 31, 2014, 11:37:32 AM</a></div></div><blockquote class="bbc_standard_quote">I also thought so and even told other people as such, but then I was told here that 40d is not working at all and this most likely won't change :-\ ... it's not even digic4 so copy/pasting code most likely won't work.<br></blockquote><div class="quotefooter"><div class="botslice_quote"></div></div><br>I'll just stick to my T2i for now, though I love the feel of my 40D over my T2i which is why I would love to get ML working on it.
</dd>
<dt class="postheader">
Title: <strong>Re: [UNMAINTAINED] Canon 40D</strong><br>
Post by: <strong>rufustfirefly</strong> on <strong>April 02, 2014, 05:49:10 PM</strong>
</dt>
<dd class="postbody">
If anyone's still watching this, here's where I'm at:<br><br>I had tried, relatively unsuccessfully, to port the existing VxWorks ports to the 40D. I'm going back to the 1000d_dev work, and pushing out my current work, etc, to github. If anyone would like to assist, it's here:<br><br>https://github.com/jbuchbinder/40d_dev (https://github.com/jbuchbinder/40d_dev)<br><br>Thanks!
</dd>
</dl>
<div id="footer" class="smalltext">
<span class="smalltext" style="display: inline; visibility: visible; font-family: Verdana, Arial, sans-serif;"><a href="http://www.magiclantern.fm/forum/index.php?action=credits" title="Simple Machines Forum" target="_blank" class="new_win">SMF 2.0.7</a> |
<a href="http://www.simplemachines.org/about/smf/license.php" title="License" target="_blank" class="new_win">SMF © 2013</a>, <a href="http://www.simplemachines.org/" title="Simple Machines" target="_blank" class="new_win">Simple Machines</a>
</span>
</div>

</body></html>